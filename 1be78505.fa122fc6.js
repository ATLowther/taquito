/*! For license information please see 1be78505.fa122fc6.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{151:function(t,e,r){"use strict";r.d(e,"a",(function(){return o})),r.d(e,"b",(function(){return p})),r.d(e,"c",(function(){return I})),r.d(e,"d",(function(){return S})),r.d(e,"e",(function(){return R})),r.d(e,"f",(function(){return C})),r.d(e,"g",(function(){return P})),r.d(e,"h",(function(){return N})),r.d(e,"i",(function(){return x})),r.d(e,"j",(function(){return k})),r.d(e,"k",(function(){return D})),r.d(e,"l",(function(){return h})),r.d(e,"m",(function(){return L})),r.d(e,"n",(function(){return s})),r.d(e,"o",(function(){return v})),r.d(e,"p",(function(){return b})),r.d(e,"q",(function(){return E})),r.d(e,"r",(function(){return w})),r.d(e,"s",(function(){return A})),r.d(e,"t",(function(){return O}));var n,i,o,a=r(92);!function(t){t.TZ1="tz1",t.TZ2="tz2",t.TZ3="tz3",t.KT="KT",t.KT1="KT1",t.EDSK2="edsk2",t.SPSK="spsk",t.P2SK="p2sk",t.EDPK="edpk",t.SPPK="sppk",t.P2PK="p2pk",t.EDESK="edesk",t.SPESK="spesk",t.P2ESK="p2esk",t.EDSK="edsk",t.EDSIG="edsig",t.SPSIG="spsig",t.P2SIG="p2sig",t.SIG="sig",t.NET="Net",t.NCE="nce",t.B="b",t.O="o",t.LO="Lo",t.LLO="LLo",t.P="P",t.CO="Co",t.ID="id",t.EXPR="expr",t.TZ="TZ"}(o||(o={}));var s=((n={})[o.TZ1]=new Uint8Array([6,161,159]),n[o.TZ2]=new Uint8Array([6,161,161]),n[o.TZ3]=new Uint8Array([6,161,164]),n[o.KT]=new Uint8Array([2,90,121]),n[o.KT1]=new Uint8Array([2,90,121]),n[o.EDSK]=new Uint8Array([43,246,78,7]),n[o.EDSK2]=new Uint8Array([13,15,58,7]),n[o.SPSK]=new Uint8Array([17,162,224,201]),n[o.P2SK]=new Uint8Array([16,81,238,189]),n[o.EDPK]=new Uint8Array([13,15,37,217]),n[o.SPPK]=new Uint8Array([3,254,226,86]),n[o.P2PK]=new Uint8Array([3,178,139,127]),n[o.EDESK]=new Uint8Array([7,90,60,179,41]),n[o.SPESK]=new Uint8Array([9,237,241,174,150]),n[o.P2ESK]=new Uint8Array([9,48,57,115,171]),n[o.EDSIG]=new Uint8Array([9,245,205,134,18]),n[o.SPSIG]=new Uint8Array([13,115,101,19,63]),n[o.P2SIG]=new Uint8Array([54,240,44,52]),n[o.SIG]=new Uint8Array([4,130,43]),n[o.NET]=new Uint8Array([87,82,0]),n[o.NCE]=new Uint8Array([69,220,169]),n[o.B]=new Uint8Array([1,52]),n[o.O]=new Uint8Array([5,116]),n[o.LO]=new Uint8Array([133,233]),n[o.LLO]=new Uint8Array([29,159,109]),n[o.P]=new Uint8Array([2,170]),n[o.CO]=new Uint8Array([79,179]),n[o.ID]=new Uint8Array([153,103]),n[o.EXPR]=new Uint8Array([13,44,64,27]),n[o.TZ]=new Uint8Array([2,90,121]),n),c=((i={})[o.TZ1]=20,i[o.TZ2]=20,i[o.TZ3]=20,i[o.KT]=20,i[o.KT1]=20,i[o.EDPK]=32,i[o.SPPK]=33,i[o.P2PK]=33,i[o.EDSIG]=64,i[o.SPSIG]=64,i[o.P2SIG]=64,i[o.SIG]=64,i[o.NET]=4,i[o.B]=32,i[o.P]=32,i);function u(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(s){i={error:s}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a}var p,l=r(261);function h(t){return"string"==typeof t&&t in s}function f(t,e){var r=new RegExp("^("+e.join("|")+")").exec(t);if(!r||0===r.length)return p.NO_PREFIX_MATCHED;var n=r[0];if(!h(n))return p.NO_PREFIX_MATCHED;var i=l.decodeUnsafe(t);return i?(i=i.slice(s[n].length)).length!==c[n]?p.INVALID_LENGTH:p.VALID:p.INVALID_CHECKSUM}!function(t){t[t.NO_PREFIX_MATCHED=0]="NO_PREFIX_MATCHED",t[t.INVALID_CHECKSUM=1]="INVALID_CHECKSUM",t[t.INVALID_LENGTH=2]="INVALID_LENGTH",t[t.VALID=3]="VALID"}(p||(p={}));var d=[o.TZ1,o.TZ2,o.TZ3],m=[o.KT1],g=[o.EDSIG,o.P2SIG,o.SPSIG,o.SIG],y=[o.EDPK,o.SPPK,o.P2PK];function v(t){return f(t,function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(u(arguments[e]));return t}(d,m))}function b(t){return f(t,[o.NET])}function E(t){return f(t,m)}function w(t){return f(t,d)}function O(t){return f(t,g)}function A(t){return f(t,y)}var T=r(510),_=r(261);function P(t){return S(T.blake2b(D(t),null,32),s.expr)}function S(t,e){var r="string"==typeof t?Uint8Array.from(a.Buffer.from(t,"hex")):t,n=new Uint8Array(e.length+r.length);return n.set(e),n.set(r,e.length),_.encode(a.Buffer.from(n.buffer))}var I=function(t,e){return _.decode(t).slice(e.length)};function R(t){var e,r=_.decode(t),n=((e={})[s.tz1.toString()]="0000",e[s.tz2.toString()]="0001",e[s.tz3.toString()]="0002",e)[new Uint8Array(r.slice(0,3)).toString()];return n?n+C(r.slice(3)):"01"+C(r.slice(3,42))+"00"}function k(t){if("00"===t.substring(0,2)){var e={"0000":s.tz1,"0001":s.tz2,"0002":s.tz3};return S(t.substring(4),e[t.substring(0,4)])}return S(t.substring(2,42),s.KT)}function N(t){if("0"===t[0]){var e={"00":new Uint8Array([13,15,37,217]),"01":new Uint8Array([3,254,226,86]),"02":new Uint8Array([3,178,139,127])};return S(t.substring(2),e[t.substring(0,2)])}}function x(t){if("0"===t[0]){var e={"00":new Uint8Array([6,161,159]),"01":new Uint8Array([6,161,161]),"02":new Uint8Array([6,161,164])};return S(t.substring(2),e[t.substring(0,2)])}}var D=function(t){return new Uint8Array(t.match(/[\da-f]{2}/gi).map((function(t){return parseInt(t,16)})))},L=function(t,e){var r=new Uint8Array(t.length+e.length);return r.set(t),r.set(e,t.length),r},C=function(t){var e=new Uint8Array(t),r=[];return e.forEach((function(t){var e=("00"+t.toString(16)).slice(-2);r.push(e)})),r.join("")}},179:function(t,e,r){"use strict";r.d(e,"a",(function(){return lt})),r.d(e,"b",(function(){return yn})),r.d(e,"c",(function(){return Dr})),r.d(e,"d",(function(){return Cr})),r.d(e,"e",(function(){return Lr}));var n=r(247),i=r(432),o=r.n(i),a=function(){return(a=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r}function c(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{c(n.next(t))}catch(e){o(e)}}function s(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}c((n=n.apply(t,e||[])).next())}))}function u(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var p,l=r(433),h=r(472);function f(t,e){var r=Array.isArray(t);void 0===e&&(e=Object.keys(t));var n=r?[]:{};return e.forEach((function(e){var r,i=l(t,e);if(void 0!==i){if(Array.isArray(i))return r=f(i),void h(n,e,r);r=new o.a(i),h(n,e,r)}})),n}!function(t){t.ORIGINATION="origination",t.DELEGATION="delegation",t.REVEAL="reveal",t.TRANSACTION="transaction",t.ACTIVATION="activate_account",t.ENDORSEMENT="endorsement",t.SEED_NONCE_REVELATION="seed_nonce_revelation",t.DOUBLE_ENDORSEMENT_EVIDENCE="double_endorsement_evidence",t.DOUBLE_BAKING_EVIDENCE="double_baking_evidence",t.PROPOSALS="proposals",t.BALLOT="ballot"}(p||(p={}));var d={block:"head"},m=function(){function t(t,e,r){void 0===e&&(e="main"),void 0===r&&(r=new n.a),this.url=t,this.chain=e,this.httpBackend=r}return t.prototype.createURL=function(t){return""+this.url.replace(/\/+$/g,"")+t},t.prototype.getBlockHash=function(t){var e=(void 0===t?d:t).block;return c(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return[4,this.httpBackend.createRequest({url:this.createURL("/chains/"+this.chain+"/blocks/"+e+"/hash"),method:"GET"})];case 1:return[2,t.sent()]}}))}))},t.prototype.getLiveBlocks=function(t){var e=(void 0===t?d:t).block;return c(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return[4,this.httpBackend.createRequest({url:this.createURL("/chains/"+this.chain+"/blocks/"+e+"/live_blocks"),method:"GET"})];case 1:return[2,t.sent()]}}))}))},t.prototype.getBalance=function(t,e){var r=(void 0===e?d:e).block;return c(this,void 0,void 0,(function(){var e;return u(this,(function(n){switch(n.label){case 0:return[4,this.httpBackend.createRequest({url:this.createURL("/chains/"+this.chain+"/blocks/"+r+"/context/contracts/"+t+"/balance"),method:"GET"})];case 1:return e=n.sent(),[2,new o.a(e)]}}))}))},t.prototype.getStorage=function(t,e){var r=(void 0===e?d:e).block;return c(this,void 0,void 0,(function(){return u(this,(function(e){return[2,this.httpBackend.createRequest({url:this.createURL("/chains/"+this.chain+"/blocks/"+r+"/context/contracts/"+t+"/storage"),method:"GET"})]}))}))},t.prototype.getScript=function(t,e){var r=(void 0===e?d:e).block;return c(this,void 0,void 0,(function(){return u(this,(function(e){return[2,this.httpBackend.createRequest({url:this.createURL("/chains/"+this.chain+"/blocks/"+r+"/context/contracts/"+t+"/script"),method:"GET"})]}))}))},t.prototype.getContract=function(t,e){var r=(void 0===e?d:e).block;return c(this,void 0,void 0,(function(){var e;return u(this,(function(n){switch(n.label){case 0:return[4,this.httpBackend.createRequest({url:this.createURL("/chains/"+this.chain+"/blocks/"+r+"/context/contracts/"+t),method:"GET"})];case 1:return e=n.sent(),[2,a(a({},e),{balance:new o.a(e.balance)})]}}))}))},t.prototype.getManagerKey=function(t,e){var r=(void 0===e?d:e).block;return c(this,void 0,void 0,(function(){return u(this,(function(e){return[2,this.httpBackend.createRequest({url:this.createURL("/chains/"+this.chain+"/blocks/"+r+"/context/contracts/"+t+"/manager_key"),method:"GET"})]}))}))},t.prototype.getDelegate=function(t,e){var r=(void 0===e?d:e).block;return c(this,void 0,void 0,(function(){return u(this,(function(e){return[2,this.httpBackend.createRequest({url:this.createURL("/chains/"+this.chain+"/blocks/"+r+"/context/contracts/"+t+"/delegate"),method:"GET"})]}))}))},t.prototype.getBigMapKey=function(t,e,r){var n=(void 0===r?d:r).block;return c(this,void 0,void 0,(function(){return u(this,(function(r){return[2,this.httpBackend.createRequest({url:this.createURL("/chains/"+this.chain+"/blocks/"+n+"/context/contracts/"+t+"/big_map_get"),method:"POST"},e)]}))}))},t.prototype.getBigMapExpr=function(t,e,r){var n=(void 0===r?d:r).block;return c(this,void 0,void 0,(function(){return u(this,(function(r){return[2,this.httpBackend.createRequest({url:this.createURL("/chains/"+this.chain+"/blocks/"+n+"/context/big_maps/"+t+"/"+e),method:"GET"})]}))}))},t.prototype.getDelegates=function(t,e){var r=(void 0===e?d:e).block;return c(this,void 0,void 0,(function(){var e;return u(this,(function(n){switch(n.label){case 0:return[4,this.httpBackend.createRequest({url:this.createURL("/chains/"+this.chain+"/blocks/"+r+"/context/delegates/"+t),method:"GET"})];case 1:return[2,{deactivated:(e=n.sent()).deactivated,balance:new o.a(e.balance),frozen_balance:new o.a(e.frozen_balance),frozen_balance_by_cycle:e.frozen_balance_by_cycle.map((function(t){var e=t.deposit,r=t.fees,n=t.rewards,i=s(t,["deposit","fees","rewards"]);return a(a({},i),{deposit:new o.a(e),fees:new o.a(r),rewards:new o.a(n)})})),staking_balance:new o.a(e.staking_balance),delegated_contracts:e.delegated_contracts,delegated_balance:new o.a(e.delegated_balance),grace_period:e.grace_period}]}}))}))},t.prototype.getConstants=function(t){var e=(void 0===t?d:t).block;return c(this,void 0,void 0,(function(){var t,r;return u(this,(function(n){switch(n.label){case 0:return[4,this.httpBackend.createRequest({url:this.createURL("/chains/"+this.chain+"/blocks/"+e+"/context/constants"),method:"GET"})];case 1:return t=n.sent(),r=f(t,["time_between_blocks","hard_gas_limit_per_operation","hard_gas_limit_per_block","proof_of_work_threshold","tokens_per_roll","seed_nonce_revelation_tip","block_security_deposit","endorsement_security_deposit","block_reward","endorsement_reward","cost_per_byte","hard_storage_limit_per_operation","test_chain_duration","baking_reward_per_endorsement","delay_per_missing_endorsement"]),[2,a(a({},t),r)]}}))}))},t.prototype.getBlock=function(t){var e=(void 0===t?d:t).block;return c(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return[4,this.httpBackend.createRequest({url:this.createURL("/chains/"+this.chain+"/blocks/"+e),method:"GET"})];case 1:return[2,t.sent()]}}))}))},t.prototype.getBlockHeader=function(t){var e=(void 0===t?d:t).block;return c(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return[4,this.httpBackend.createRequest({url:this.createURL("/chains/"+this.chain+"/blocks/"+e+"/header"),method:"GET"})];case 1:return[2,t.sent()]}}))}))},t.prototype.getBlockMetadata=function(t){var e=(void 0===t?d:t).block;return c(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return[4,this.httpBackend.createRequest({url:this.createURL("/chains/"+this.chain+"/blocks/"+e+"/metadata"),method:"GET"})];case 1:return[2,t.sent()]}}))}))},t.prototype.getBakingRights=function(t,e){void 0===t&&(t={});var r=(void 0===e?d:e).block;return c(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return[4,this.httpBackend.createRequest({url:this.createURL("/chains/"+this.chain+"/blocks/"+r+"/helpers/baking_rights"),method:"GET",query:t})];case 1:return[2,e.sent()]}}))}))},t.prototype.getEndorsingRights=function(t,e){void 0===t&&(t={});var r=(void 0===e?d:e).block;return c(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return[4,this.httpBackend.createRequest({url:this.createURL("/chains/"+this.chain+"/blocks/"+r+"/helpers/endorsing_rights"),method:"GET",query:t})];case 1:return[2,e.sent()]}}))}))},t.prototype.getBallotList=function(t){var e=(void 0===t?d:t).block;return c(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return[4,this.httpBackend.createRequest({url:this.createURL("/chains/"+this.chain+"/blocks/"+e+"/votes/ballot_list"),method:"GET"})];case 1:return[2,t.sent()]}}))}))},t.prototype.getBallots=function(t){var e=(void 0===t?d:t).block;return c(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return[4,this.httpBackend.createRequest({url:this.createURL("/chains/"+this.chain+"/blocks/"+e+"/votes/ballots"),method:"GET"})];case 1:return[2,t.sent()]}}))}))},t.prototype.getCurrentPeriodKind=function(t){var e=(void 0===t?d:t).block;return c(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return[4,this.httpBackend.createRequest({url:this.createURL("/chains/"+this.chain+"/blocks/"+e+"/votes/current_period_kind"),method:"GET"})];case 1:return[2,t.sent()]}}))}))},t.prototype.getCurrentProposal=function(t){var e=(void 0===t?d:t).block;return c(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return[4,this.httpBackend.createRequest({url:this.createURL("/chains/"+this.chain+"/blocks/"+e+"/votes/current_proposal"),method:"GET"})];case 1:return[2,t.sent()]}}))}))},t.prototype.getCurrentQuorum=function(t){var e=(void 0===t?d:t).block;return c(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return[4,this.httpBackend.createRequest({url:this.createURL("/chains/"+this.chain+"/blocks/"+e+"/votes/current_quorum"),method:"GET"})];case 1:return[2,t.sent()]}}))}))},t.prototype.getVotesListings=function(t){var e=(void 0===t?d:t).block;return c(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return[4,this.httpBackend.createRequest({url:this.createURL("/chains/"+this.chain+"/blocks/"+e+"/votes/listings"),method:"GET"})];case 1:return[2,t.sent()]}}))}))},t.prototype.getProposals=function(t){var e=(void 0===t?d:t).block;return c(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return[4,this.httpBackend.createRequest({url:this.createURL("/chains/"+this.chain+"/blocks/"+e+"/votes/proposals"),method:"GET"})];case 1:return[2,t.sent()]}}))}))},t.prototype.forgeOperations=function(t,e){var r=(void 0===e?d:e).block;return c(this,void 0,void 0,(function(){return u(this,(function(e){return[2,this.httpBackend.createRequest({url:this.createURL("/chains/"+this.chain+"/blocks/"+r+"/helpers/forge/operations"),method:"POST"},t)]}))}))},t.prototype.injectOperation=function(t){return c(this,void 0,void 0,(function(){return u(this,(function(e){return[2,this.httpBackend.createRequest({url:this.createURL("/injection/operation"),method:"POST"},t)]}))}))},t.prototype.preapplyOperations=function(t,e){var r=(void 0===e?d:e).block;return c(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return[4,this.httpBackend.createRequest({url:this.createURL("/chains/"+this.chain+"/blocks/"+r+"/helpers/preapply/operations"),method:"POST"},t)];case 1:return[2,e.sent()]}}))}))},t.prototype.getEntrypoints=function(t,e){var r=(void 0===e?d:e).block;return c(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return[4,this.httpBackend.createRequest({url:this.createURL("/chains/"+this.chain+"/blocks/"+r+"/context/contracts/"+t+"/entrypoints"),method:"GET"})];case 1:return[2,e.sent()]}}))}))},t.prototype.runOperation=function(t,e){var r=(void 0===e?d:e).block;return c(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return[4,this.httpBackend.createRequest({url:this.createURL("/chains/"+this.chain+"/blocks/"+r+"/helpers/scripts/run_operation"),method:"POST"},t)];case 1:return[2,e.sent()]}}))}))},t.prototype.getChainId=function(){return c(this,void 0,void 0,(function(){return u(this,(function(t){return[2,this.httpBackend.createRequest({url:this.createURL("/chains/"+this.chain+"/chain_id"),method:"GET"})]}))}))},t.prototype.packData=function(t,e){var r=(void 0===e?d:e).block;return c(this,void 0,void 0,(function(){var e,n,i,c,p;return u(this,(function(u){switch(u.label){case 0:return[4,this.httpBackend.createRequest({url:this.createURL("/chains/"+this.chain+"/blocks/"+r+"/helpers/scripts/pack_data"),method:"POST"},t)];case 1:return e=u.sent(),n=e.gas,i=s(e,["gas"]),c=n,(p=new o.a(n||"")).isNaN()||(c=p),[2,a({gas:c},i)]}}))}))},t.prototype.getRpcUrl=function(){return this.url},t}(),g=r(390),y=r(763),v=r(236),b=r(750),E=r(513),w=r(766),O=r(279),A=r(752),T=r(744),_=r(283),P=r(760),S=r(103),I=r(747),R=r(748),k=r(205),N=r(514),x=r(762),D=r(515),L=r(749),C=r(516),j=r(751),U=r(765),M=r(753),K=r(754),F=r(755),G=r(756),B=r(757),H=r(758),V=r(759),z=r(764),W=r(517),q=r(761),Q=r(478),Y=r.n(Q),X=r(479),$=r.n(X),Z=r(480),J=r.n(Z),tt=r(151),et=function(t,e){return(et=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};function rt(t,e){function r(){this.constructor=t}et(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var nt,it=function(){return(it=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function ot(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function at(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function st(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(s){i={error:s}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a}function ct(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(st(arguments[e]));return t}var ut=Symbol.for("taquito-michelson-map-type-symbol"),pt=function(t,e,r){this.value=t,this.type=e,this.name="MapTypecheckError",this.message=r+" not compliant with underlying michelson type"},lt=function(){function t(t){this.valueMap=new Map,this.keyMap=new Map,this[nt]=!0,t&&this.setType(t)}return t.isMichelsonMap=function(t){return t&&!0===t[ut]},t.prototype.setType=function(t){if(!("args"in(e=t))||!Array.isArray(e.args)||2!==e.args.length)throw new Error("mapType is not a valid michelson map type");var e;this.keySchema=new ne(t.args[0]),this.valueSchema=new ne(t.args[1])},t.prototype.removeType=function(){this.keySchema=void 0,this.valueSchema=void 0},t.fromLiteral=function(e,r){var n=new t(r);return Object.keys(e).forEach((function(t){n.set(t,e[t])})),n},t.prototype.typecheckKey=function(t){return!this.keySchema||this.keySchema.Typecheck(t)},t.prototype.typecheckValue=function(t){return!this.valueSchema||this.valueSchema.Typecheck(t)},t.prototype.assertTypecheckValue=function(t){if(!this.typecheckValue(t))throw new pt(t,this.valueSchema,"value")},t.prototype.assertTypecheckKey=function(t){if(!this.typecheckKey(t))throw new pt(t,this.keySchema,"key")},t.prototype.serializeDeterministically=function(t){return $()(t)},t.prototype.keys=function(){var t,e,r,n,i,o;return ot(this,(function(a){switch(a.label){case 0:a.trys.push([0,5,6,7]),t=at(this.entries()),e=t.next(),a.label=1;case 1:return e.done?[3,4]:(r=st(e.value,1),[4,r[0]]);case 2:a.sent(),a.label=3;case 3:return e=t.next(),[3,1];case 4:return[3,7];case 5:return n=a.sent(),i={error:n},[3,7];case 6:try{e&&!e.done&&(o=t.return)&&o.call(t)}finally{if(i)throw i.error}return[7];case 7:return[2]}}))},t.prototype.values=function(){var t,e,r,n,i,o;return ot(this,(function(a){switch(a.label){case 0:a.trys.push([0,5,6,7]),t=at(this.entries()),e=t.next(),a.label=1;case 1:return e.done?[3,4]:(r=st(e.value,2),[4,r[1]]);case 2:a.sent(),a.label=3;case 3:return e=t.next(),[3,1];case 4:return[3,7];case 5:return n=a.sent(),i={error:n},[3,7];case 6:try{e&&!e.done&&(o=t.return)&&o.call(t)}finally{if(i)throw i.error}return[7];case 7:return[2]}}))},t.prototype.entries=function(){var t,e,r,n,i,o;return ot(this,(function(a){switch(a.label){case 0:a.trys.push([0,5,6,7]),t=at(this.valueMap.keys()),e=t.next(),a.label=1;case 1:return e.done?[3,4]:(r=e.value,[4,[this.keyMap.get(r),this.valueMap.get(r)]]);case 2:a.sent(),a.label=3;case 3:return e=t.next(),[3,1];case 4:return[3,7];case 5:return n=a.sent(),i={error:n},[3,7];case 6:try{e&&!e.done&&(o=t.return)&&o.call(t)}finally{if(i)throw i.error}return[7];case 7:return[2]}}))},t.prototype.get=function(t){this.assertTypecheckKey(t);var e=this.serializeDeterministically(t);return this.valueMap.get(e)},t.prototype.set=function(t,e){this.assertTypecheckKey(t),this.assertTypecheckValue(e);var r=this.serializeDeterministically(t);this.keyMap.set(r,t),this.valueMap.set(r,e)},t.prototype.delete=function(t){this.assertTypecheckKey(t),this.keyMap.delete(this.serializeDeterministically(t)),this.valueMap.delete(this.serializeDeterministically(t))},t.prototype.has=function(t){this.assertTypecheckKey(t);var e=this.serializeDeterministically(t);return this.keyMap.has(e)&&this.valueMap.has(e)},t.prototype.clear=function(){this.keyMap.clear(),this.valueMap.clear()},Object.defineProperty(t.prototype,"size",{get:function(){return this.keyMap.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){var e,r;try{for(var n=at(this.entries()),i=n.next();!i.done;i=n.next()){var o=st(i.value,2),a=o[0];t(o[1],a,this)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t}();nt=ut;var ht,ft=function(t,e,r){this.value=t,this.token=e,this.name="ValidationError";var n=this.token.annot(),i=n?"["+n+"] ":"";this.message=""+i+r},dt=function(){function t(t,e,r){this.val=t,this.idx=e,this.fac=r,this.createToken=this.fac}return t.prototype.typeWithoutAnnotations=function(){return function t(e){return e.args?{prim:e.prim,args:e.args.map((function(e){return t(e)}))}:{prim:e.prim}}(this.val)},t.prototype.annot=function(){return(Array.isArray(this.val.annots)&&this.val.annots.length>0?this.val.annots[0]:String(this.idx)).replace(/(%|\:)(_Liq_entry_)?/,"")},t.prototype.hasAnnotations=function(){return Array.isArray(this.val.annots)&&this.val.annots.length},t.prototype.ExtractSignature=function(){return[[this.ExtractSchema()]]},t}(),mt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return rt(e,t),e.prototype.compare=function(t,e){return t===e?0:t<e?-1:1},e}(dt),gt=function(t){function e(e,r,n){var i=t.call(this,e,r,n)||this;return i.value=e,i.token=r,i.name="BigMapValidationError",i}return rt(e,t),e}(ft),yt=function(t){function e(e,r,n){var i=t.call(this,e,r,n)||this;return i.val=e,i.idx=r,i.fac=n,i}return rt(e,t),Object.defineProperty(e.prototype,"ValueSchema",{get:function(){return this.createToken(this.val.args[1],0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"KeySchema",{get:function(){return this.createToken(this.val.args[0],0)},enumerable:!1,configurable:!0}),e.prototype.ExtractSchema=function(){var t;return(t={})[this.KeySchema.ExtractSchema()]=this.ValueSchema.ExtractSchema(),t},e.prototype.isValid=function(t){return lt.isMichelsonMap(t)?null:new gt(t,this,"Value must be a MichelsonMap")},e.prototype.Encode=function(t){var e=this,r=t.pop(),n=this.isValid(r);if(n)throw n;return Array.from(r.keys()).sort((function(t,r){return e.KeySchema.compare(t,r)})).map((function(t){return{prim:"Elt",args:[e.KeySchema.EncodeObject(t),e.ValueSchema.EncodeObject(r.get(t))]}}))},e.prototype.EncodeObject=function(t){var e=this,r=t,n=this.isValid(r);if(n)throw n;return Array.from(r.keys()).sort((function(t,r){return e.KeySchema.compare(t,r)})).map((function(t){return{prim:"Elt",args:[e.KeySchema.EncodeObject(t),e.ValueSchema.EncodeObject(r.get(t))]}}))},e.prototype.Execute=function(t,r){var n=this;if(r&&r[e.prim])return r[e.prim](t,this.val);if(Array.isArray(t)){var i=new lt(this.val);return t.forEach((function(t){i.set(n.KeySchema.ToKey(t.args[0]),n.ValueSchema.Execute(t.args[1]))})),i}if("int"in t)return t.int;throw new Error("Big map is expecting either an array (Athens) or an object with an int property (Babylon). Got "+JSON.stringify(t))},e.prim="big_map",e}(dt),vt=function(t){function e(e,r,n){var i=t.call(this,e,r,n)||this;return i.val=e,i.idx=r,i.fac=n,i}return rt(e,t),e.prototype.Encode=function(t){var r=t[t.length-1],n=this.createToken(this.val.args[0],this.idx),i=1;n instanceof e&&(i=Object.keys(n.ExtractSchema()).length);var o=this.createToken(this.val.args[1],this.idx+i);if(String(n.annot())!==String(r)||n instanceof e){if(String(o.annot())!==String(r)||o instanceof e){var a;if(n instanceof e)if(a=n.Encode(t))return{prim:"Left",args:[a]};if(o instanceof e)if(a=o.Encode(t))return{prim:"Right",args:[a]};return null}return t.pop(),{prim:"Right",args:[o.Encode(t)]}}return t.pop(),{prim:"Left",args:[n.Encode(t)]}},e.prototype.ExtractSignature=function(){var t,r,n,i,o=this.createToken(this.val.args[0],this.idx),a=1;o instanceof e&&(a=Object.keys(o.ExtractSchema()).length);var s=this.createToken(this.val.args[1],this.idx+a),c=[];if(o instanceof e)c.push.apply(c,ct(o.ExtractSignature()));else try{for(var u=at(o.ExtractSignature()),p=u.next();!p.done;p=u.next()){var l=p.value;c.push(ct([o.annot()],l))}}catch(d){t={error:d}}finally{try{p&&!p.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}if(s instanceof e)c.push.apply(c,ct(s.ExtractSignature()));else try{for(var h=at(s.ExtractSignature()),f=h.next();!f.done;f=h.next()){l=f.value;c.push(ct([s.annot()],l))}}catch(m){n={error:m}}finally{try{f&&!f.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}return c},e.prototype.EncodeObject=function(t){var r=Object.keys(t)[0],n=this.createToken(this.val.args[0],this.idx),i=1;n instanceof e&&(i=Object.keys(n.ExtractSchema()).length);var o=this.createToken(this.val.args[1],this.idx+i);if(String(n.annot())!==String(r)||n instanceof e){if(String(o.annot())!==String(r)||o instanceof e){var a;if(n instanceof e)if(a=n.EncodeObject(t))return{prim:"Left",args:[a]};if(o instanceof e)if(a=o.EncodeObject(t))return{prim:"Right",args:[a]};return null}return{prim:"Right",args:[o.EncodeObject(t[r])]}}return{prim:"Left",args:[n.EncodeObject(t[r])]}},e.prototype.Execute=function(t,r){var n,i=this.createToken(this.val.args[0],this.idx),o=1;i instanceof e&&(o=Object.keys(i.ExtractSchema()).length);var a=this.createToken(this.val.args[1],this.idx+o);if("Right"===t.prim)return a.Execute(t.args[0],r);if("Left"===t.prim)return(n={})[i.annot()]=i.Execute(t.args[0],r),n;throw new Error("Was expecting Left or Right prim but got: "+t.prim)},e.prototype.traversal=function(t,r,n){var i,o,a,s=this.createToken(this.val.args[0],this.idx),c=1;s instanceof e&&!s.hasAnnotations()?(a=t(s),c=Object.keys(s.ExtractSchema()).length):((i={})[s.annot()]=t(s),a=i);var u,p=this.createToken(this.val.args[1],this.idx+c);return p instanceof e&&!p.hasAnnotations()?u=r(p):((o={})[p.annot()]=r(p),u=o),n(a,u)},e.prototype.ExtractSchema=function(){return this.traversal((function(t){return t.ExtractSchema()}),(function(t){return t.ExtractSchema()}),(function(t,e){return it(it({},t),e)}))},e.prim="or",e}(dt),bt=function(t){function e(e,r,n){var i=t.call(this,e,r,n)||this;return i.val=e,i.idx=r,i.fac=n,i}return rt(e,t),e.prototype.Encode=function(t){var r=this.createToken(this.val.args[0],this.idx),n=1;r instanceof e&&(n=Object.keys(r.ExtractSchema()).length);var i=this.createToken(this.val.args[1],this.idx+n);return{prim:"Pair",args:[r.Encode(t),i.Encode(t)]}},e.prototype.ExtractSignature=function(){var t,e,r,n,i=this.createToken(this.val.args[0],this.idx),o=1;i instanceof vt&&(o=Object.keys(i.ExtractSchema()).length);var a=this.createToken(this.val.args[1],this.idx+o),s=[];try{for(var c=at(i.ExtractSignature()),u=c.next();!u.done;u=c.next()){var p=u.value;try{for(var l=(r=void 0,at(a.ExtractSignature())),h=l.next();!h.done;h=l.next()){var f=h.value;s.push(ct(p,f))}}catch(d){r={error:d}}finally{try{h&&!h.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}}}catch(m){t={error:m}}finally{try{u&&!u.done&&(e=c.return)&&e.call(c)}finally{if(t)throw t.error}}return s},e.prototype.ToBigMapKey=function(t){return{key:this.EncodeObject(t),type:this.typeWithoutAnnotations()}},e.prototype.ToKey=function(t){return this.Execute(t)},e.prototype.EncodeObject=function(t){var r=this.createToken(this.val.args[0],this.idx),n=1;r instanceof e&&(n=Object.keys(r.ExtractSchema()).length);var i,o,a=this.createToken(this.val.args[1],this.idx+n);return i=r instanceof e&&!r.hasAnnotations()?t:t[r.annot()],o=a instanceof e&&!a.hasAnnotations()?t:t[a.annot()],{prim:"Pair",args:[r.EncodeObject(i),a.EncodeObject(o)]}},e.prototype.traversal=function(t,r){var n,i,o,a=this.createToken(this.val.args[0],this.idx),s=1;a instanceof e&&!a.hasAnnotations()?(o=t(a),s=Object.keys(a.ExtractSchema()).length):((n={})[a.annot()]=t(a),o=n);var c,u=this.createToken(this.val.args[1],this.idx+s);return u instanceof e&&!u.hasAnnotations()?c=r(u):((i={})[u.annot()]=r(u),c=i),it(it({},o),c)},e.prototype.Execute=function(t,e){return this.traversal((function(r){return r.Execute(t.args[0],e)}),(function(r){return r.Execute(t.args[1],e)}))},e.prototype.ExtractSchema=function(){return this.traversal((function(t){return t.ExtractSchema()}),(function(t){return t.ExtractSchema()}))},e.prototype.compare=function(t,r){var n=this.createToken(this.val.args[0],this.idx),i=1;n instanceof e&&(i=Object.keys(n.ExtractSchema()).length);var o=this.createToken(this.val.args[1],this.idx+i),a=function(t,r){return t instanceof e&&!t.hasAnnotations()?r:r[t.annot()]};if(n instanceof mt&&o instanceof mt){var s=n.compare(a(n,t),a(n,r));return 0===s?o.compare(a(o,t),a(o,r)):s}throw new Error("Not a comparable pair")},e.prim="pair",e}(mt),Et=function(t){function e(e,r,n){var i=t.call(this,e,r,n)||this;return i.value=e,i.token=r,i.name="NatValidationError",i}return rt(e,t),e}(ft),wt=function(t){function e(e,r,n){var i=t.call(this,e,r,n)||this;return i.val=e,i.idx=r,i.fac=n,i}return rt(e,t),e.prototype.Execute=function(t){return new J.a(t[Object.keys(t)[0]])},e.prototype.Encode=function(t){var e=t.pop(),r=this.isValid(e);if(r)throw r;return{int:String(e).toString()}},e.prototype.isValid=function(t){var e=new J.a(t);return e.isNaN()?new Et(t,this,"Value is not a number: "+t):e.isNegative()?new Et(t,this,"Value cannot be negative: "+t):null},e.prototype.EncodeObject=function(t){var e=this.isValid(t);if(e)throw e;return{int:String(t).toString()}},e.prototype.ExtractSchema=function(){return e.prim},e.prototype.ToBigMapKey=function(t){return{key:{int:t},type:{prim:e.prim}}},e.prototype.ToKey=function(t){return t.int},e.prim="nat",e}(mt),Ot=function(t){function e(e,r,n){var i=t.call(this,e,r,n)||this;return i.val=e,i.idx=r,i.fac=n,i}return rt(e,t),e.prototype.Execute=function(t){return t[Object.keys(t)[0]]},e.prototype.ExtractSchema=function(){return e.prim},e.prototype.Encode=function(t){return{string:t.pop()}},e.prototype.EncodeObject=function(t){return{string:t}},e.prototype.ToKey=function(t){return t.string},e.prototype.ToBigMapKey=function(t){return{key:{string:t},type:{prim:e.prim}}},e.prim="string",e}(mt),At=function(t){function e(e,r,n){var i=t.call(this,e,r,n)||this;return i.value=e,i.token=r,i.name="AddressValidationError",i}return rt(e,t),e}(ft),Tt=function(t){function e(e,r,n){var i=t.call(this,e,r,n)||this;return i.val=e,i.idx=r,i.fac=n,i}return rt(e,t),e.prototype.ToBigMapKey=function(t){return{key:{bytes:Object(tt.e)(t)},type:{prim:"bytes"}}},e.prototype.isValid=function(t){return Object(tt.o)(t)!==tt.b.VALID?new At(t,this,"Address is not valid: "+t):null},e.prototype.Encode=function(t){var e=t.pop(),r=this.isValid(e);if(r)throw r;return{string:e}},e.prototype.EncodeObject=function(t){var e=this.isValid(t);if(e)throw e;return{string:t}},e.prototype.Execute=function(t){return t.string?t.string:Object(tt.j)(t.bytes)},e.prototype.ExtractSchema=function(){return e.prim},e.prototype.ToKey=function(t){var e=t.bytes,r=t.string;return r||Object(tt.j)(e)},e.prototype.compare=function(e,r){var n=function(t){return t.startsWith("tz")};return n(e)&&n(r)?t.prototype.compare.call(this,e,r):n(e)?-1:n(r)?1:t.prototype.compare.call(this,e,r)},e.prim="address",e}(mt),_t=function(t){function e(e,r,n){var i=t.call(this,e,r,n)||this;return i.value=e,i.token=r,i.name="MapValidationError",i}return rt(e,t),e}(ft),Pt=function(t){function e(e,r,n){var i=t.call(this,e,r,n)||this;return i.val=e,i.idx=r,i.fac=n,i}return rt(e,t),Object.defineProperty(e.prototype,"ValueSchema",{get:function(){return this.createToken(this.val.args[1],0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"KeySchema",{get:function(){return this.createToken(this.val.args[0],0)},enumerable:!1,configurable:!0}),e.prototype.isValid=function(t){return lt.isMichelsonMap(t)?null:new _t(t,this,"Value must be a MichelsonMap")},e.prototype.Execute=function(t,e){var r=this,n=new lt(this.val);return t.forEach((function(t){n.set(r.KeySchema.ToKey(t.args[0]),r.ValueSchema.Execute(t.args[1],e))})),n},e.prototype.Encode=function(t){var e=this,r=t.pop(),n=this.isValid(r);if(n)throw n;return Array.from(r.keys()).sort((function(t,r){return e.KeySchema.compare(t,r)})).map((function(t){return{prim:"Elt",args:[e.KeySchema.EncodeObject(t),e.ValueSchema.EncodeObject(r.get(t))]}}))},e.prototype.EncodeObject=function(t){var e=this,r=t,n=this.isValid(r);if(n)throw n;return Array.from(r.keys()).sort((function(t,r){return e.KeySchema.compare(t,r)})).map((function(t){return{prim:"Elt",args:[e.KeySchema.EncodeObject(t),e.ValueSchema.EncodeObject(r.get(t))]}}))},e.prototype.ExtractSchema=function(){return{map:{key:this.KeySchema.ExtractSchema(),value:this.ValueSchema.ExtractSchema()}}},e.prim="map",e}(dt),St=function(t){function e(e,r,n){var i=t.call(this,e,r,n)||this;return i.val=e,i.idx=r,i.fac=n,i}return rt(e,t),e.prototype.Execute=function(t){return"true"===String(t.prim).toLowerCase()},e.prototype.Encode=function(t){return{prim:t.pop()?"True":"False"}},e.prototype.EncodeObject=function(t){return{prim:t?"True":"False"}},e.prototype.ExtractSchema=function(){return e.prim},e.prototype.ToBigMapKey=function(t){return{key:this.EncodeObject(t),type:{prim:e.prim}}},e.prototype.ToKey=function(t){return this.EncodeObject(t)},e.prototype.compare=function(t,e){return t&&e||!t&&!e?0:t?1:-1},e.prim="bool",e}(mt),It=function(t){function e(e,r,n){var i=t.call(this,e,r,n)||this;return i.value=e,i.token=r,i.name="ContractValidationError",i}return rt(e,t),e}(ft),Rt=function(t){function e(e,r,n){var i=t.call(this,e,r,n)||this;return i.val=e,i.idx=r,i.fac=n,i}return rt(e,t),e.prototype.isValid=function(t){return Object(tt.o)(t)!==tt.b.VALID?new It(t,this,"Contract address is not valid"):null},e.prototype.Execute=function(t){return t.string?t.string:Object(tt.j)(t.bytes)},e.prototype.Encode=function(t){var e=t.pop(),r=this.isValid(e);if(r)throw r;return{string:e}},e.prototype.EncodeObject=function(t){var e=this.isValid(t);if(e)throw e;return{string:t}},e.prototype.ExtractSchema=function(){return e.prim},e.prim="contract",e}(dt),kt=function(t){function e(e,r,n){var i=t.call(this,e,r,n)||this;return i.value=e,i.token=r,i.name="ListValidationError",i}return rt(e,t),e}(ft),Nt=function(t){function e(e,r,n){var i=t.call(this,e,r,n)||this;return i.val=e,i.idx=r,i.fac=n,i}return rt(e,t),e.prototype.isValid=function(t){return Array.isArray(t)?null:new kt(t,this,"Value must be an array")},e.prototype.Encode=function(t){var e=t.pop(),r=this.isValid(e);if(r)throw r;var n=this.createToken(this.val.args[0],0);return e.reduce((function(t,e){return ct(t,[n.EncodeObject(e)])}),[])},e.prototype.Execute=function(t,e){var r=this.createToken(this.val.args[0],0),n=this.isValid(t);if(n)throw n;return t.reduce((function(t,n){return ct(t,[r.Execute(n,e)])}),[])},e.prototype.EncodeObject=function(t){var e=this.createToken(this.val.args[0],0),r=this.isValid(t);if(r)throw r;return t.reduce((function(t,r){return ct(t,[e.EncodeObject(r)])}),[])},e.prototype.ExtractSchema=function(){return e.prim},e.prim="list",e}(dt),xt=function(t){function e(e,r,n){var i=t.call(this,e,r,n)||this;return i.value=e,i.token=r,i.name="MutezValidationError",i}return rt(e,t),e}(ft),Dt=function(t){function e(e,r,n){var i=t.call(this,e,r,n)||this;return i.val=e,i.idx=r,i.fac=n,i}return rt(e,t),e.prototype.Execute=function(t){return new J.a(t[Object.keys(t)[0]])},e.prototype.ExtractSchema=function(){return e.prim},e.prototype.isValid=function(t){return new J.a(t).isNaN()?new xt(t,this,"Value is not a number: "+t):null},e.prototype.Encode=function(t){var e=t.pop(),r=this.isValid(e);if(r)throw r;return{int:String(e).toString()}},e.prototype.EncodeObject=function(t){var e=this.isValid(t);if(e)throw e;return{int:String(t).toString()}},e.prototype.ToBigMapKey=function(t){return{key:{int:t},type:{prim:e.prim}}},e.prototype.ToKey=function(t){return t.int},e.prim="mutez",e}(mt),Lt=function(t){function e(e,r,n){var i=t.call(this,e,r,n)||this;return i.value=e,i.token=r,i.name="BytesValidationError",i}return rt(e,t),e}(ft),Ct=function(t){function e(e,r,n){var i=t.call(this,e,r,n)||this;return i.val=e,i.idx=r,i.fac=n,i}return rt(e,t),e.prototype.ToBigMapKey=function(t){return{key:{bytes:t},type:{prim:e.prim}}},e.prototype.isValid=function(t){return"string"==typeof t&&/^[0-9a-fA-F]*$/.test(t)&&t.length%2==0?null:new Lt(t,this,"Invalid bytes: "+t)},e.prototype.Encode=function(t){var e=t.pop(),r=this.isValid(e);if(r)throw r;return{bytes:String(e).toString()}},e.prototype.EncodeObject=function(t){var e=this.isValid(t);if(e)throw e;return{bytes:String(t).toString()}},e.prototype.Execute=function(t){return t.bytes},e.prototype.ExtractSchema=function(){return e.prim},e.prototype.ToKey=function(t){var e=t.bytes,r=t.string;return r||e},e.prim="bytes",e}(mt),jt=function(t){function e(e,r,n){var i=t.call(this,e,r,n)||this;return i.val=e,i.idx=r,i.fac=n,i}return rt(e,t),e.prototype.subToken=function(){return this.createToken(this.val.args[0],this.idx)},e.prototype.annot=function(){return Array.isArray(this.val.annots)?t.prototype.annot.call(this):this.createToken(this.val.args[0],this.idx).annot()},e.prototype.Encode=function(t){var e=t;return null==e?{prim:"None"}:!Array.isArray(e)||void 0!==e[e.length-1]&&null!==e[e.length-1]?{prim:"Some",args:[this.createToken(this.val.args[0],0).Encode(t)]}:(e.pop(),{prim:"None"})},e.prototype.EncodeObject=function(t){var e=this.createToken(this.val.args[0],0),r=t;return null==r?{prim:"None"}:{prim:"Some",args:[e.EncodeObject(r)]}},e.prototype.Execute=function(t,e){return"None"===t.prim?null:this.createToken(this.val.args[0],0).Execute(t.args[0],e)},e.prototype.ExtractSchema=function(){return this.createToken(this.val.args[0],0).ExtractSchema()},e.prototype.ExtractSignature=function(){return ct(this.createToken(this.val.args[0],0).ExtractSignature(),[[]])},e.prim="option",e}(dt),Ut=function(t){function e(e,r,n){var i=t.call(this,e,r,n)||this;return i.val=e,i.idx=r,i.fac=n,i}return rt(e,t),e.prototype.Execute=function(t){return t.string?new Date(t.string).toISOString():t.int?new Date(1e3*Number(t.int)).toISOString():void 0},e.prototype.Encode=function(t){return{string:t.pop()}},e.prototype.EncodeObject=function(t){return{string:t}},e.prototype.ExtractSchema=function(){return e.prim},e.prototype.ToKey=function(t){return t.string},e.prototype.ToBigMapKey=function(t){return{key:{string:t},type:{prim:e.prim}}},e.prim="timestamp",e}(mt),Mt=function(t){function e(e,r,n){var i=t.call(this,e,r,n)||this;return i.value=e,i.token=r,i.name="IntValidationError",i}return rt(e,t),e}(ft),Kt=function(t){function e(e,r,n){var i=t.call(this,e,r,n)||this;return i.val=e,i.idx=r,i.fac=n,i}return rt(e,t),e.prototype.Execute=function(t){return new J.a(t[Object.keys(t)[0]])},e.prototype.ExtractSchema=function(){return e.prim},e.prototype.isValid=function(t){return new J.a(t).isNaN()?new Mt(t,this,"Value is not a number: "+t):null},e.prototype.Encode=function(t){var e=t.pop(),r=this.isValid(e);if(r)throw r;return{int:String(e).toString()}},e.prototype.EncodeObject=function(t){var e=this.isValid(t);if(e)throw e;return{int:String(t).toString()}},e.prototype.ToBigMapKey=function(t){return{key:{int:t},type:{prim:e.prim}}},e.prototype.ToKey=function(t){return t.int},e.prim="int",e}(mt),Ft=function(t){function e(e,r,n){var i=t.call(this,e,r,n)||this;return i.val=e,i.idx=r,i.fac=n,i}return rt(e,t),e.prototype.Encode=function(t){return t.pop(),{prim:"Unit"}},e.prototype.EncodeObject=function(t){return{prim:"Unit"}},e.prototype.Execute=function(){return oe},e.prototype.ExtractSchema=function(){return e.prim},e.prim="unit",e}(dt),Gt=function(t){function e(e,r,n){var i=t.call(this,e,r,n)||this;return i.value=e,i.token=r,i.name="KeyValidationError",i}return rt(e,t),e}(ft),Bt=function(t){function e(e,r,n){var i=t.call(this,e,r,n)||this;return i.val=e,i.idx=r,i.fac=n,i}return rt(e,t),e.prototype.Execute=function(t){return t.string?t.string:Object(tt.h)(t.bytes)},e.prototype.isValid=function(t){return Object(tt.s)(t)!==tt.b.VALID?new Gt(t,this,"Key is not valid"):null},e.prototype.Encode=function(t){var e=t.pop(),r=this.isValid(e);if(r)throw r;return{string:e}},e.prototype.EncodeObject=function(t){var e=this.isValid(t);if(e)throw e;return{string:t}},e.prototype.ExtractSchema=function(){return e.prim},e.prim="key",e}(dt),Ht=function(t){function e(e,r,n){var i=t.call(this,e,r,n)||this;return i.value=e,i.token=r,i.name="KeyHashValidationError",i}return rt(e,t),e}(ft),Vt=function(t){function e(e,r,n){var i=t.call(this,e,r,n)||this;return i.val=e,i.idx=r,i.fac=n,i}return rt(e,t),e.prototype.Execute=function(t){return t.string?t.string:Object(tt.i)(t.bytes)},e.prototype.isValid=function(t){return Object(tt.r)(t)!==tt.b.VALID?new Ht(t,this,"KeyHash is not valid: "+t):null},e.prototype.Encode=function(t){var e=t.pop(),r=this.isValid(e);if(r)throw r;return{string:e}},e.prototype.EncodeObject=function(t){var e=this.isValid(t);if(e)throw e;return{string:t}},e.prototype.ExtractSchema=function(){return e.prim},e.prototype.ToKey=function(t){var e=t.string,r=t.bytes;return e||Object(tt.i)(r)},e.prototype.ToBigMapKey=function(t){return{key:{string:t},type:{prim:e.prim}}},e.prim="key_hash",e}(mt),zt=function(t){function e(e,r,n){var i=t.call(this,e,r,n)||this;return i.value=e,i.token=r,i.name="SignatureValidationError",i}return rt(e,t),e}(ft),Wt=function(t){function e(e,r,n){var i=t.call(this,e,r,n)||this;return i.val=e,i.idx=r,i.fac=n,i}return rt(e,t),e.prototype.Execute=function(t){return t.string},e.prototype.isValid=function(t){return Object(tt.t)(t)!==tt.b.VALID?new zt(t,this,"Signature is not valid"):null},e.prototype.Encode=function(t){var e=t.pop(),r=this.isValid(e);if(r)throw r;return{string:e}},e.prototype.EncodeObject=function(t){var e=this.isValid(t);if(e)throw e;return{string:t}},e.prototype.ExtractSchema=function(){return e.prim},e.prim="signature",e}(dt),qt=function(t){function e(e,r,n){var i=t.call(this,e,r,n)||this;return i.val=e,i.idx=r,i.fac=n,i}return rt(e,t),e.prototype.Execute=function(t){return t.string},e.prototype.Encode=function(t){return t.pop()},e.prototype.EncodeObject=function(t){return t},e.prototype.ExtractSchema=function(){var t,r=this.createToken(this.val.args[0],this.idx),n=this.createToken(this.val.args[1],this.idx+1);return(t={})[e.prim]={parameters:r.ExtractSchema(),returns:n.ExtractSchema()},t},e.prim="lambda",e}(dt),Qt=function(t){function e(e,r,n){var i=t.call(this,e,r,n)||this;return i.val=e,i.idx=r,i.fac=n,i}return rt(e,t),e.prototype.Execute=function(t){return t.string},e.prototype.Encode=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t.pop();return{string:r}},e.prototype.EncodeObject=function(t){return{string:t}},e.prototype.ExtractSchema=function(){return e.prim},e.prim="operation",e}(dt),Yt=function(t){function e(e,r,n){var i=t.call(this,e,r,n)||this;return i.value=e,i.token=r,i.name="SetValidationError",i}return rt(e,t),e}(ft),Xt=function(t){function e(e,r,n){var i=t.call(this,e,r,n)||this;return i.val=e,i.idx=r,i.fac=n,i}return rt(e,t),Object.defineProperty(e.prototype,"KeySchema",{get:function(){return this.createToken(this.val.args[0],0)},enumerable:!1,configurable:!0}),e.prototype.isValid=function(t){return Array.isArray(t)?null:new Yt(t,this,"Value must be an array")},e.prototype.Encode=function(t){var e=this,r=t.pop(),n=this.isValid(r);if(n)throw n;return r.sort((function(t,r){return e.KeySchema.compare(t,r)})).reduce((function(t,r){return ct(t,[e.KeySchema.EncodeObject(r)])}),[])},e.prototype.Execute=function(t,e){var r=this;return t.reduce((function(t,n){return ct(t,[r.KeySchema.Execute(n,e)])}),[])},e.prototype.EncodeObject=function(t){var e=this,r=this.isValid(t);if(r)throw r;return t.sort((function(t,r){return e.KeySchema.compare(t,r)})).reduce((function(t,r){return ct(t,[e.KeySchema.EncodeObject(r)])}),[])},e.prototype.ExtractSchema=function(){return e.prim},e.prim="set",e}(dt),$t=function(t){function e(e,r,n){var i=t.call(this,e,r,n)||this;return i.value=e,i.token=r,i.name="ChainIDValidationError",i}return rt(e,t),e}(ft),Zt=function(t){function e(e,r,n){var i=t.call(this,e,r,n)||this;return i.val=e,i.idx=r,i.fac=n,i}return rt(e,t),e.prototype.isValid=function(t){return Object(tt.p)(t)!==tt.b.VALID?new $t(t,this,"ChainID is not valid"):null},e.prototype.Execute=function(t){return t[Object.keys(t)[0]]},e.prototype.ExtractSchema=function(){return e.prim},e.prototype.Encode=function(t){var e=t.pop(),r=this.isValid(e);if(r)throw r;return{string:e}},e.prototype.EncodeObject=function(t){var e=this.isValid(t);if(e)throw e;return{string:t}},e.prototype.ToKey=function(t){return t.string},e.prototype.ToBigMapKey=function(t){return{key:{string:t},type:{prim:e.prim}}},e.prim="chain_id",e}(mt),Jt=[bt,wt,Ot,yt,Tt,Pt,St,vt,Rt,Nt,Dt,Ct,jt,Ut,Kt,Ft,Bt,Vt,Wt,qt,Qt,Xt,Zt],te=function(t,e){this.message=t,this.data=e,this.name="Invalid token error"};function ee(t,e){var r=Jt.find((function(e){return e.prim===t.prim}));if(!r)throw new te("Malformed data expected a value with a valid prim property",t);return new r(t,e,ee)}var re=Symbol.for("taquito-schema-type-symbol"),ne=function(){function t(t){if(this[ht]=!0,this.root=ee(t,0),this.root instanceof yt)this.bigMap=this.root;else if(this.isExpressionExtended(t)&&"pair"===t.prim){var e=t.args[0];this.isExpressionExtended(e)&&"big_map"===e.prim&&(this.bigMap=new yt(e,0,ee))}}return t.isSchema=function(t){return t&&!0===t[re]},t.fromRPCResponse=function(e){var r=e&&e.script&&Array.isArray(e.script.code)&&e.script.code.find((function(t){return"storage"===t.prim}));if(!r||!Array.isArray(r.args))throw new Error("Invalid rpc response passed as arguments");return new t(r.args[0])},t.prototype.isExpressionExtended=function(t){return"prim"in t&&Array.isArray(t.args)},t.prototype.removeTopLevelAnnotation=function(t){return(this.root instanceof bt||this.root instanceof vt)&&this.root.hasAnnotations()&&"object"==typeof t&&1===Object.keys(t).length?t[Object.keys(t)[0]]:t},t.prototype.Execute=function(t,e){var r=this.root.Execute(t,e);return this.removeTopLevelAnnotation(r)},t.prototype.Typecheck=function(t){try{return this.root.EncodeObject(t),!0}catch(e){return!1}},t.prototype.ExecuteOnBigMapDiff=function(t,e){if(!this.bigMap)throw new Error("No big map schema");if(!Array.isArray(t))throw new Error("Invalid big map diff. It must be an array");var r=t.map((function(t){return{args:[t.key,t.value]}}));return this.bigMap.Execute(r,e)},t.prototype.ExecuteOnBigMapValue=function(t,e){if(!this.bigMap)throw new Error("No big map schema");return this.bigMap.ValueSchema.Execute(t,e)},t.prototype.EncodeBigMapKey=function(t){if(!this.bigMap)throw new Error("No big map schema");try{return this.bigMap.KeySchema.ToBigMapKey(t)}catch(e){throw new Error("Unable to encode big map key: "+e)}},t.prototype.Encode=function(t){try{return this.root.EncodeObject(t)}catch(e){if(e instanceof ft)throw e;throw new Error("Unable to encode storage object. "+e)}},t.prototype.ExtractSchema=function(){return this.removeTopLevelAnnotation(this.root.ExtractSchema())},t.prototype.ComputeState=function(t,e){var r,n=this;if(!this.bigMap)throw new Error("No big map schema");var i=t.reduce((function(t,e){return it(it({},t),n.ExecuteOnBigMapDiff(e.contents[0].metadata.operation_result.big_map_diff))}),{});return it(it({},this.Execute(e)),((r={})[this.bigMap.annot()]=i,r))},t}();ht=re;var ie=function(){function t(t){this.root=ee(t,0)}return t.fromRPCResponse=function(e){var r=e&&e.script&&Array.isArray(e.script.code)&&e.script.code.find((function(t){return"parameter"===t.prim}));if(!r||!Array.isArray(r.args))throw new Error("Invalid rpc response passed as arguments");return new t(r.args[0])},Object.defineProperty(t.prototype,"isMultipleEntryPoint",{get:function(){return this.root instanceof vt||this.root instanceof jt&&this.root.subToken()instanceof vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasAnnotation",{get:function(){return!this.isMultipleEntryPoint||"0"!==Object.keys(this.ExtractSchema())[0]},enumerable:!1,configurable:!0}),t.prototype.Execute=function(t,e){return this.root.Execute(t,e)},t.prototype.Encode=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return this.root.Encode(t.reverse())}catch(r){if(r instanceof ft)throw r;throw new Error("Unable to encode storage object. "+r)}},t.prototype.ExtractSchema=function(){return this.root.ExtractSchema()},t.prototype.ExtractSignatures=function(){return this.root.ExtractSignature()},t}(),oe=Symbol(),ae=function(t,e){return(ae=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};function se(t,e){function r(){this.constructor=t}ae(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var ce=function(){return(ce=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function ue(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function pe(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function le(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(s){i={error:s}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a}function he(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(le(arguments[e]));return t}var fe,de=function(t){function e(e,r,n){var i=t.call(this,n)||this;return i.src=e,i.idx=r,i}return se(e,t),e}(Error);!function(t){t[t.Comment=0]="Comment",t[t.Number=1]="Number",t[t.String=2]="String",t[t.Bytes=3]="Bytes",t[t.Ident=4]="Ident"}(fe||(fe={}));var me=new RegExp("\\s"),ge=new RegExp("[:@%_A-Za-z]"),ye=new RegExp("[@%_\\.A-Za-z0-9]"),ve=new RegExp("[0-9]"),be=new RegExp("[0-9a-fA-F]");function Ee(t,e){var r,n,i,o,a;return void 0===e&&(e=!1),ue(this,(function(s){switch(s.label){case 0:r=0,s.label=1;case 1:if(!(r<t.length))return[3,16];for(;r<t.length&&me.test(t[r]);)r++;if(r===t.length)return[2];if(n=t[r],i=r,!ge.test(n))return[3,3];for(r++;r<t.length&&ye.test(t[r]);)r++;return[4,{t:fe.Ident,v:t.slice(i,r),offset:r}];case 2:return s.sent(),[3,15];case 3:if(!(t.length-r>1&&"0x"===t.substr(r,2)))return[3,5];for(r+=2;r<t.length&&be.test(t[r]);)r++;if(r-i==2)throw new de(t,r,"Bytes literal is too short");if(0!=(r-i&1))throw new de(t,r,"Bytes literal length is expected to be power of two");return[4,{t:fe.Bytes,v:t.slice(i,r),offset:r}];case 4:return s.sent(),[3,15];case 5:if(!ve.test(n)&&"-"!==n)return[3,7];for("-"===n&&r++,o=r;r<t.length&&ve.test(t[r]);)r++;if(o===r)throw new de(t,r,"Number literal is too short");return[4,{t:fe.Number,v:t.slice(i,r),offset:r}];case 6:return s.sent(),[3,15];case 7:if('"'!==n)return[3,9];for(r++,a=!1;r<t.length&&(a||'"'!==t[r]);r++)a=!a&&"\\"===t[r];if(r===t.length)throw new de(t,r,"Unterminated string literal");return r++,[4,{t:fe.String,v:t.slice(i,r),offset:r}];case 8:return s.sent(),[3,15];case 9:if("#"!==n)return[3,12];for(r++;r<t.length&&"\n"!==t[r];)r++;return e?[4,{t:fe.Comment,v:t.slice(i,r),offset:r}]:[3,11];case 10:s.sent(),s.label=11;case 11:return[3,15];case 12:return"("!==n&&")"!==n&&"{"!==n&&"}"!==n&&";"!==n?[3,14]:(r++,[4,{t:n,v:n,offset:r}]);case 13:return s.sent(),[3,15];case 14:throw new de(t,r,"Invalid character at offset "+r+": `"+n+"'");case 15:return[3,1];case 16:return[2]}}))}var we=function(t){function e(r,n){var i=t.call(this,n)||this;return i.prim=r,Object.setPrototypeOf(i,e.prototype),i}return se(e,t),e}(Error);function Oe(t,e){var r,n;if(0===e&&void 0===t.args||(null===(r=t.args)||void 0===r?void 0:r.length)===e)return!0;throw new we(t,"macro "+t.prim+" expects "+e+" arguments, was given "+(null===(n=t.args)||void 0===n?void 0:n.length))}function Ae(t){if(void 0===t.annots)return!0;throw new we(t,"unexpected annotation on macro "+t.prim+": "+t.annots)}function Te(t,e,r,n){var i,o=0,a=0,s=[null,null];if(o===e.length)throw new we(t,"unexpected end: "+t.prim);var c,u=e[o++];switch(u){case"P":var p=Te(t,e.slice(o),r.slice(a),n);i=h=p.r,o+=f=p.n,a+=d=p.an;break;case"A":a!==r.length&&(s[0]=r[a++]);break;default:throw new we(t,t.prim+": unexpected character: "+u)}if(o===e.length)throw new we(t,"unexpected end: "+t.prim);switch(u=e[o++]){case"P":var l=Te(t,e.slice(o),r.slice(a),n),h=l.r,f=l.n,d=l.an;c=h.map((function(t){var e=le(t,2);return[e[0]+1,e[1]]})),o+=f,a+=d;break;case"I":a!==r.length&&(s[1]=r[a++]);break;default:throw new we(t,t.prim+": unexpected character: "+u)}return{r:n(i,c,[0,s]),n:o,an:a}}function _e(t,e,r,n){var i=e[0];switch(i){case"A":return e.length>1?[{prim:"DUP"},{prim:"DIP",args:[[{prim:"CAR",annots:["@%%"]},_e(t,e.slice(1),[],n)]]},{prim:"CDR",annots:["@%%"]},{prim:"SWAP"},{prim:"PAIR",annots:he(["%@","%@"],r)}]:n.a;case"D":return e.length>1?[{prim:"DUP"},{prim:"DIP",args:[[{prim:"CDR",annots:["@%%"]},_e(t,e.slice(1),[],n)]]},{prim:"CAR",annots:["@%%"]},{prim:"PAIR",annots:he(["%@","%@"],r)}]:n.d;default:throw new we(t,t.prim+": unexpected character: "+i)}}function Pe(t){var e,r,n=[],i=[];if(void 0!==t)try{for(var o=pe(t),a=o.next();!a.done;a=o.next()){var s=a.value;(0!==s.length&&"%"===s[0]?n:i).push(s)}}catch(c){e={error:c}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return{fields:n,rest:i}}function Se(t){var e=t.prim,r=t.annots,n=t.args;return ce(ce({prim:e},r&&{annots:r}),n&&{args:n})}var Ie=/^P[PAI]{3,}R$/,Re=/^UNP[PAI]{2,}R$/,ke=/^C[AD]{2,}R$/,Ne=/^SET_C[AD]+R$/,xe=/^MAP_C[AD]+R$/,De=/^DI{2,}P$/,Le=/^DU+P$/;function Ce(t){function e(t){return void 0!==t?[{prim:"RENAME",annots:t}]:[]}switch(t.prim){case"CMPEQ":case"CMPNEQ":case"CMPLT":case"CMPGT":case"CMPLE":case"CMPGE":if(Oe(t,0))return[{prim:"COMPARE"},Se({prim:t.prim.slice(3),annots:t.annots})];break;case"IFEQ":case"IFNEQ":case"IFLT":case"IFGT":case"IFLE":case"IFGE":if(Oe(t,2))return[{prim:t.prim.slice(2)},Se({prim:"IF",annots:t.annots,args:t.args})];break;case"IFCMPEQ":case"IFCMPNEQ":case"IFCMPLT":case"IFCMPGT":case"IFCMPLE":case"IFCMPGE":if(Oe(t,2))return[{prim:"COMPARE"},{prim:t.prim.slice(5)},Se({prim:"IF",annots:t.annots,args:t.args})];break;case"FAIL":if(Oe(t,0)&&Ae(t))return[{prim:"UNIT"},{prim:"FAILWITH"}];break;case"ASSERT":if(Oe(t,0)&&Ae(t))return[{prim:"IF",args:[[],[[{prim:"UNIT"},{prim:"FAILWITH"}]]]}];break;case"ASSERT_EQ":case"ASSERT_NEQ":case"ASSERT_LT":case"ASSERT_GT":case"ASSERT_LE":case"ASSERT_GE":if(Oe(t,0)&&Ae(t))return[{prim:t.prim.slice(7)},{prim:"IF",args:[[],[[{prim:"UNIT"},{prim:"FAILWITH"}]]]}];break;case"ASSERT_CMPEQ":case"ASSERT_CMPNEQ":case"ASSERT_CMPLT":case"ASSERT_CMPGT":case"ASSERT_CMPLE":case"ASSERT_CMPGE":if(Oe(t,0)&&Ae(t))return[[{prim:"COMPARE"},{prim:t.prim.slice(10)}],{prim:"IF",args:[[],[[{prim:"UNIT"},{prim:"FAILWITH"}]]]}];break;case"ASSERT_NONE":if(Oe(t,0)&&Ae(t))return[{prim:"IF_NONE",args:[[],[[{prim:"UNIT"},{prim:"FAILWITH"}]]]}];break;case"ASSERT_SOME":if(Oe(t,0))return[{prim:"IF_NONE",args:[[[{prim:"UNIT"},{prim:"FAILWITH"}]],e(t.annots)]}];break;case"ASSERT_LEFT":if(Oe(t,0))return[{prim:"IF_LEFT",args:[e(t.annots),[[{prim:"UNIT"},{prim:"FAILWITH"}]]]}];break;case"ASSERT_RIGHT":if(Oe(t,0))return[{prim:"IF_LEFT",args:[[[{prim:"UNIT"},{prim:"FAILWITH"}]],e(t.annots)]}];break;case"IF_SOME":if(Oe(t,2))return[Se({prim:"IF_NONE",annots:t.annots,args:[t.args[1],t.args[0]]})];break;case"IF_RIGHT":if(Oe(t,2))return[Se({prim:"IF_LEFT",annots:t.annots,args:[t.args[1],t.args[0]]})]}if(Ie.test(t.prim)&&Oe(t,0)){var r=Pe(t.annots),n=r.fields,i=r.rest,o=Te(t,t.prim.slice(1),n,(function(t,e,r){return he(t||[],e||[],[r])})).r;return o.map((function(t,e){var r=le(t,2),n=r[0],a=he(function(t,e){for(var r=t.length;r>0&&t[r-1]===e;)r--;return t.slice(0,r)}(r[1],null).map((function(t){return null===t?"%":t})),0===n&&e===o.length-1?i:[]),s=Se({prim:"PAIR",annots:0!==a.length?a:void 0});return 0===n?s:{prim:"DIP",args:1===n?[[s]]:[{int:String(n)},[s]]}}))}if(Re.test(t.prim)&&Oe(t,0))return Te(t,t.prim.slice(3),t.annots||[],(function(t,e,r){return he([r],e||[],t||[])})).r.map((function(t){var e=le(t,2),r=e[0],n=e[1],i=[{prim:"DUP"},Se({prim:"CAR",annots:null!==n[0]?[n[0]]:void 0}),{prim:"DIP",args:[[Se({prim:"CDR",annots:null!==n[1]?[n[1]]:void 0})]]}];return 0===r?i:{prim:"DIP",args:1===r?[[i]]:[{int:String(r)},[i]]}}));if(ke.test(t.prim)&&Oe(t,0)){var a=he(t.prim.slice(1,t.prim.length-1));return a.map((function(e,r){var n=r===a.length-1?t.annots:void 0;switch(e){case"A":return Se({prim:"CAR",annots:n});case"D":return Se({prim:"CDR",annots:n});default:throw new we(t,"unexpected character: "+e)}}))}if(Ne.test(t.prim)&&Oe(t,0)){var s=Pe(t.annots),c=(n=s.fields,s.rest);if(n.length>1)throw new we(t,"unexpected annotation on macro "+t.prim+": "+n);var u=0!==n.length?{a:[{prim:"DUP"},{prim:"CAR",annots:n},{prim:"DROP"},{prim:"CDR",annots:["@%%"]},{prim:"SWAP"},{prim:"PAIR",annots:[n[0],"%@"]}],d:[{prim:"DUP"},{prim:"CDR",annots:n},{prim:"DROP"},{prim:"CAR",annots:["@%%"]},{prim:"PAIR",annots:["%@",n[0]]}]}:{a:[{prim:"CDR",annots:["@%%"]},{prim:"SWAP"},{prim:"PAIR",annots:["%","%@"]}],d:[{prim:"CAR",annots:["@%%"]},{prim:"PAIR",annots:["%@","%"]}]};return _e(t,t.prim.slice(5,t.prim.length-1),c,u)}if(xe.test(t.prim)&&Oe(t,1)){if((n=Pe(t.annots).fields).length>1)throw new we(t,"unexpected annotation on macro "+t.prim+": "+n);u={a:[{prim:"DUP"},{prim:"CDR",annots:["@%%"]},{prim:"DIP",args:[[Se({prim:"CAR",annots:0!==n.length?["@"+n[0].slice(1)]:void 0}),t.args[0]]]},{prim:"SWAP"},{prim:"PAIR",annots:[0!==n.length?n[0]:"%","%@"]}],d:[{prim:"DUP"},Se({prim:"CDR",annots:0!==n.length?["@"+n[0].slice(1)]:void 0}),t.args[0],{prim:"SWAP"},{prim:"CAR",annots:["@%%"]},{prim:"PAIR",annots:["%@",0!==n.length?n[0]:"%"]}]};return _e(t,t.prim.slice(5,t.prim.length-1),[],u)}if(De.test(t.prim)&&Oe(t,1)){for(var p=0;"I"===t.prim[1+p];)p++;return Se({prim:"DIP",args:[{int:String(p)},t.args[0]]})}if(Le.test(t.prim)){for(p=0;"U"===t.prim[1+p];)p++;if(1===p){if(void 0===t.args)return t;Oe(t,1)&&function(t,e){if("int"in e)return!0;throw new we(t,"macro "+t.prim+" expects int argument")}(t,t.args[0])&&(p=parseInt(t.args[0].int,10))}else Oe(t,0);return 1===p?[Se({prim:"DUP",annots:t.annots})]:2===p?[{prim:"DIP",args:[[Se({prim:"DUP",annots:t.annots})]]},{prim:"SWAP"}]:[{prim:"DIP",args:[{int:String(p-1)},[Se({prim:"DUP",annots:t.annots})]]},{prim:"DIG",args:[{int:String(p)}]}]}return t}var je=function(t){function e(e,r){var n=t.call(this,r)||this;return n.token=e,n}return se(e,t),e}(Error),Ue=function(t){function e(e,r){var n=t.call(this,r)||this;return n.node=e,n}return se(e,t),e}(Error),Me=new je(null,"Unexpected EOF");function Ke(t){return t.t===fe.Ident&&("@"===t.v[0]||"%"===t.v[0]||":"===t.v[0])}var Fe=new RegExp("^-?[0-9]+$"),Ge=new RegExp("^([0-9a-fA-F]{2})+$"),Be=function(){function t(t){this.opt=t}return t.prototype.expand=function(t){var e;return(null===(e=this.opt)||void 0===e?void 0:e.expandMacros)?Ce(t):t},t.prototype.parseList=function(t){var e=t.next();if(e.done)throw Me;if(e.value.t!==fe.Ident)throw new je(e.value,"List: not an identifier: "+e.value.v);for(var r={prim:e.value.v};;){var n=t.next();if(n.done)throw Me;if(")"===n.value.t)break;Ke(n.value)?(r.annots=r.annots||[],r.annots.push(n.value.v)):(r.args=r.args||[],r.args.push(this.parseExpr(t,n.value)))}return this.expand(r)},t.prototype.parseArgs=function(t,e,r){for(var n={prim:e};;){var i=t.next();if(i.done){if(r)throw Me;return[n,!0]}if("}"===i.value.t){if(r)return[n,!0];throw new je(i.value,"Seq: unexpected token: "+i.value.v)}if(";"===i.value.t)return[n,!1];Ke(i.value)?(n.annots=n.annots||[],n.annots.push(i.value.v)):(n.args=n.args||[],n.args.push(this.parseExpr(t,i.value)))}},t.prototype.parseSequence=function(t,e,r){for(var n=[];;){var i=void 0;if(null!==e)i=e,e=null;else{if((c=t.next()).done){if(r)throw Me;return n}i=c.value}if("}"===i.t){if(r)return n;throw new je(i,"Seq: unexpected token: "+i.v)}if(i.t===fe.Ident){var o=le(this.parseArgs(t,i.v,r),2),a=o[0],s=o[1];if(n.push(this.expand(a)),s)return n}else{var c;if(n.push(this.parseExpr(t,i)),(c=t.next()).done){if(r)throw Me;return n}if("}"===c.value.t){if(r)return n;throw new je(c.value,"Seq: unexpected token: "+c.value.v)}if(";"!==c.value.t)throw new je(c.value,"Seq: unexpected token: "+c.value.v)}}},t.prototype.parseExpr=function(t,e){switch(e.t){case fe.Ident:return this.expand({prim:e.v});case fe.Number:return{int:e.v};case fe.String:return{string:JSON.parse(e.v)};case fe.Bytes:return{bytes:e.v.substr(2)};case"(":return this.parseList(t);case"{":return this.parseSequence(t,null,!0);default:throw new je(e,"Expr: unexpected token: "+e.v)}},t.prototype.parseScript=function(t){if("string"!=typeof t)throw new TypeError("string type was expected, got "+typeof t+" instead");var e=Ee(t),r=e.next();return r.done?null:"{"===r.value.t?this.parseSequence(e,null,!0):this.parseSequence(e,r.value,!1)},t.prototype.parseMichelineExpression=function(t){if("string"!=typeof t)throw new TypeError("string type was expected, got "+typeof t+" instead");var e=Ee(t),r=e.next();return r.done?null:this.parseExpr(e,r.value)},t.prototype.parseJSON=function(t){var e,r,n,i,o,a;if("object"!=typeof t)throw new TypeError("object type was expected, got "+typeof t+" instead");if(Array.isArray(t)){var s=[];try{for(var c=pe(t),u=c.next();!u.done;u=c.next()){var p=u.value;if(null===p||"object"!=typeof p)throw new Ue(p,"unexpected sequence element: "+p);s.push(this.parseJSON(p))}}catch(y){e={error:y}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}return s}if("prim"in t){var l=t;if("string"==typeof l.prim&&(void 0===l.annots||Array.isArray(l.annots))&&(void 0===l.args||Array.isArray(l.args))){s={prim:l.prim};if(void 0!==l.annots){try{for(var h=pe(l.annots),f=h.next();!f.done;f=h.next()){if("string"!=typeof(g=f.value))throw new Ue(g,"string expected: "+g)}}catch(v){n={error:v}}finally{try{f&&!f.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}s.annots=l.annots}if(void 0!==l.args){s.args=[];try{for(var d=pe(l.args),m=d.next();!m.done;m=d.next()){var g;if(null===(g=m.value)||"object"!=typeof g)throw new Ue(g,"unexpected argument: "+g);s.args.push(this.parseJSON(g))}}catch(b){o={error:b}}finally{try{m&&!m.done&&(a=d.return)&&a.call(d)}finally{if(o)throw o.error}}}return this.expand(s)}throw new Ue(t,"malformed prim expression: "+t)}if("string"in t){if("string"==typeof t.string)return{string:t.string};throw new Ue(t,"malformed string literal: "+t)}if("int"in t){if("string"==typeof t.int&&Fe.test(t.int))return{int:t.int};throw new Ue(t,"malformed int literal: "+t)}if("bytes"in t){if("string"==typeof t.bytes&&Ge.test(t.bytes))return{bytes:t.bytes};throw new Ue(t,"malformed bytes literal: "+t)}throw new Ue(t,"unexpected object: "+t)},t}();!function(){function t(t,e){void 0===e&&(e=0),this.opt=t,this.lev=e}t.prototype.indent=function(t){var e;void 0===t&&(t=0);var r="";if(void 0!==(null===(e=this.opt)||void 0===e?void 0:e.indent))for(var n=this.lev+t;n>0;n--)r+=this.opt.indent;return r},Object.defineProperty(t.prototype,"lf",{get:function(){var t;return(null===(t=this.opt)||void 0===t?void 0:t.newline)||""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lfsp",{get:function(){var t;return(null===(t=this.opt)||void 0===t?void 0:t.newline)||" "},enumerable:!1,configurable:!0}),t.prototype.down=function(e){return new t(this.opt,this.lev+e)}}();!function(t){function e(e,r,n){var i=t.call(this,n)||this;return i.val=e,i.path=r,i}se(e,t)}(Error);var He={DUP:!0,SWAP:!0,SOME:!0,UNIT:!0,PAIR:!0,CAR:!0,CDR:!0,CONS:!0,SIZE:!0,MEM:!0,GET:!0,UPDATE:!0,EXEC:!0,FAILWITH:!0,RENAME:!0,CONCAT:!0,SLICE:!0,PACK:!0,ADD:!0,SUB:!0,MUL:!0,EDIV:!0,ABS:!0,ISNAT:!0,INT:!0,NEG:!0,LSL:!0,LSR:!0,OR:!0,AND:!0,XOR:!0,NOT:!0,COMPARE:!0,EQ:!0,NEQ:!0,LT:!0,GT:!0,LE:!0,GE:!0,SELF:!0,TRANSFER_TOKENS:!0,SET_DELEGATE:!0,CREATE_ACCOUNT:!0,IMPLICIT_ACCOUNT:!0,NOW:!0,AMOUNT:!0,BALANCE:!0,CHECK_SIGNATURE:!0,BLAKE2B:!0,SHA256:!0,SHA512:!0,HASH_KEY:!0,STEPS_TO_QUOTA:!0,SOURCE:!0,SENDER:!0,ADDRESS:!0,CHAIN_ID:!0};Object.assign({},He,{DROP:!0,DIG:!0,DUG:!0,NONE:!0,LEFT:!0,RIGHT:!0,NIL:!0,UNPACK:!0,CONTRACT:!0,CAST:!0,IF_NONE:!0,IF_LEFT:!0,IF_CONS:!0,IF:!0,MAP:!0,ITER:!0,LOOP:!0,LOOP_LEFT:!0,DIP:!0,CREATE_CONTRACT:!0,PUSH:!0,EMPTY_SET:!0,EMPTY_MAP:!0,EMPTY_BIG_MAP:!0,LAMBDA:!0});var Ve=function(t,e){return(Ve=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};function ze(t,e){function r(){this.constructor=t}Ve(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var We=function(){return(We=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function qe(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r}function Qe(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{c(n.next(t))}catch(e){o(e)}}function s(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}c((n=n.apply(t,e||[])).next())}))}function Ye(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function Xe(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function $e(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(s){i={error:s}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a}function Ze(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat($e(arguments[e]));return t}var Je,tr,er,rr,nr=function(){function t(t){this.context=t}return t.prototype.forge=function(t){var e=t.branch,r=t.contents;return this.context.rpc.forgeOperations({branch:e,contents:r})},t}(),ir=function(){function t(t){this.context=t}return t.prototype.inject=function(t){return this.context.rpc.injectOperation(t)},t}(),or=function(){this.name="UnconfiguredSignerError",this.message="No signer has been configured. Please configure one by calling setProvider({signer}) on your TezosToolkit instance."},ar=function(){function t(){}return t.prototype.publicKey=function(){return Qe(this,void 0,void 0,(function(){return Ye(this,(function(t){throw new or}))}))},t.prototype.publicKeyHash=function(){return Qe(this,void 0,void 0,(function(){return Ye(this,(function(t){throw new or}))}))},t.prototype.secretKey=function(){return Qe(this,void 0,void 0,(function(){return Ye(this,(function(t){throw new or}))}))},t.prototype.sign=function(t,e){return Qe(this,void 0,void 0,(function(){return Ye(this,(function(t){throw new or}))}))},t}(),sr=function(t,e){return We(We({},t),{kind:e})},cr=function(t,e){if(Array.isArray(t)){var r=t.find((function(t){return t.kind===e}));if(r&&ur(r,e))return r}},ur=function(t,e){return t.kind===e},pr=function(t){return-1!==["transaction","delegation","origination","reveal"].indexOf(t.kind)},lr=function(t){return"metadata"in t},hr=function(t){return lr(t)&&"operation_result"in t.metadata},fr=function(t){this.errors=t,this.name="TezosOperationError";var e=t[t.length-1];this.id=e.id,this.kind=e.kind,this.message="("+this.kind+") "+this.id,"with"in e&&e.with.string&&(this.message=e.with.string)},dr=function(t){this.result=t,this.name="TezosPreapplyFailureError",this.message="Preapply returned an unexpected result"},mr=function(t){for(var e=Array.isArray(t)?t:[t],r=[],n=0;n<e.length;n++)for(var i=0;i<e[n].contents.length;i++){var o=e[n].contents[i];hr(o)&&(r.push(We({fee:o.fee},o.metadata.operation_result)),Array.isArray(o.metadata.internal_operation_results)&&o.metadata.internal_operation_results.forEach((function(t){return r.push(t.result)})))}return r},gr=function(t,e){var r,n;void 0===e&&(e="failed");for(var i,o=Array.isArray(t)?t:[t],a=[],s=0;s<o.length;s++)for(var c=0;c<o[s].contents.length;c++){var u=o[s].contents[c];if(lr(u)&&(hr(u)&&u.metadata.operation_result.status===e&&(a=a.concat(u.metadata.operation_result.errors||[])),lr(i=u)&&"internal_operation_results"in i.metadata&&Array.isArray(u.metadata.internal_operation_results)))try{for(var p=(r=void 0,Xe(u.metadata.internal_operation_results)),l=p.next();!l.done;l=p.next()){var h=l.value;"result"in h&&h.result.status===e&&(a=a.concat(h.result.errors||[]))}}catch(f){r={error:f}}finally{try{l&&!l.done&&(n=p.return)&&n.call(p)}finally{if(r)throw r.error}}}return a},yr=function(t,e){var r=void 0===e?{ALLOCATION_BURN:257,ORIGINATION_BURN:257}:e,n=r.ALLOCATION_BURN,i=r.ORIGINATION_BURN,o=mr({contents:t}),a=new Y.a(0),s=new Y.a(0),c=new Y.a(0),u=new Y.a(0),p=new Y.a(0),l=new Y.a(0);return o.forEach((function(t){c=c.plus(t.fee||0),u=u.plus(Array.isArray(t.originated_contracts)?t.originated_contracts.length*i:0),p=p.plus("allocated_destination_contract"in t?n:0),a=a.plus(t.consumed_gas||0),l=l.plus("paid_storage_size_diff"in t&&Number(t.paid_storage_size_diff)||0)})),s=s.plus(p).plus(u).plus(l),{totalFee:c,totalGas:a,totalStorage:s,totalAllocationBurn:p,totalOriginationBurn:u,totalPaidStorageDiff:l,totalStorageBurn:new Y.a(s.multipliedBy(1e3))}},vr=function(){this.name="MissedBlockDuringConfirmationError",this.message="Taquito missed a block while waiting for operation confirmation and was not able to find the operation"},br=function(){function t(t,e,r){var n=this;this.opHash=t,this.context=e,this._newHead$=r,this._operationResult=new g.a(1),this._includedInBlock=new g.a(1),this._included=!1,this.newHead$=this._newHead$.pipe(Object(I.a)((function(t){if(!n._included&&n.lastHead&&t.header.level-n.lastHead.header.level>1)throw new vr;n.lastHead=t})),Object(R.a)({bufferSize:1,refCount:!0})),this.confirmed$=this.newHead$.pipe(Object(k.a)((function(t){var e,r,i,o;try{for(var a=Xe(t.operations),s=a.next();!s.done;s=a.next()){var c=s.value;try{for(var u=(i=void 0,Xe(c)),p=u.next();!p.done;p=u.next()){var l=p.value;if(l.hash===n.opHash)return n._included=!0,n._includedInBlock.next(t),n._operationResult.next(l.contents),t}}catch(h){i={error:h}}finally{try{p&&!p.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}}}catch(f){e={error:f}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}})),Object(N.a)((function(t){return void 0!==t})),Object(x.a)(),Object(R.a)({bufferSize:1,refCount:!0})),this.confirmed$.pipe(Object(x.a)()).subscribe()}return t.prototype.operationResults=function(){return Qe(this,void 0,void 0,(function(){return Ye(this,(function(t){return[2,this._operationResult.pipe(Object(x.a)()).toPromise()]}))}))},t.prototype.receipt=function(){return Qe(this,void 0,void 0,(function(){var t;return Ye(this,(function(e){switch(e.label){case 0:return t=yr,[4,this.operationResults()];case 1:return[2,t.apply(void 0,[e.sent()])]}}))}))},t.prototype.getCurrentConfirmation=function(){return Qe(this,void 0,void 0,(function(){return Ye(this,(function(t){return this._included?[2,Object(y.a)([this._includedInBlock,Object(v.a)(this.context.rpc.getBlock())]).pipe(Object(k.a)((function(t){var e=$e(t,2),r=e[0];return e[1].header.level-r.header.level+1})),Object(x.a)()).toPromise()]:[2,0]}))}))},t.prototype.isInCurrentBranch=function(t){return void 0===t&&(t="head"),Qe(this,void 0,void 0,(function(){var e,r,n,i,o;return Ye(this,(function(a){switch(a.label){case 0:return this._included?[4,this.context.rpc.getBlockHeader({block:t})]:[2,!0];case 1:return e=a.sent(),[4,this._includedInBlock.pipe(Object(x.a)()).toPromise()];case 2:return r=a.sent(),(n=e.level-r.header.level)<=0?[2,!0]:(i=Math.min(r.header.level+n,r.header.level+60),o=Set.bind,[4,this.context.rpc.getLiveBlocks({block:String(i)})]);case 3:return[2,(new(o.apply(Set,[void 0,a.sent()]))).has(r.hash)]}}))}))},t.prototype.confirmationObservable=function(t){var e=this;if(void 0!==t&&t<1)throw new Error("Confirmation count must be at least 1");var r=this.context.config.defaultConfirmationCount,n=void 0!==t?t:r;return Object(y.a)([this._includedInBlock,this.newHead$]).pipe(Object(D.a)((function(t,e){var r=$e(t,2)[1],n=$e(e,2)[1];return r.hash===n.hash})),Object(k.a)((function(t){var r=$e(t,2),i=r[0],o=r[1];return{block:o,expectedConfirmation:n,currentConfirmation:o.header.level-i.header.level+1,completed:o.header.level-i.header.level>=n-1,isInCurrentBranch:function(){return e.isInCurrentBranch(o.hash)}}})),Object(L.a)((function(t){return!t.completed}),!0))},t.prototype.confirmation=function(t){return this.confirmationObservable(t).toPromise()},t}(),Er=function(t){function e(e,r,n){var i=t.call(this,e,r,n)||this;return i.opHash=e,i.context=r,i}return ze(e,t),e.prototype.revealOperation=function(){return Qe(this,void 0,void 0,(function(){return Ye(this,(function(t){switch(t.label){case 0:return[4,this.operationResults()];case 1:return[2,t.sent().find((function(t){return t.kind===p.REVEAL}))]}}))}))},e.prototype.delegationOperation=function(){return Qe(this,void 0,void 0,(function(){return Ye(this,(function(t){switch(t.label){case 0:return[4,this.operationResults()];case 1:return[2,t.sent().find((function(t){return t.kind===p.DELEGATION}))]}}))}))},e.prototype.status=function(){return Qe(this,void 0,void 0,(function(){var t;return Ye(this,(function(e){switch(e.label){case 0:return this._included?[4,this.delegationOperation()]:[2,"pending"];case 1:return(t=e.sent())?[2,t.metadata.operation_result.status]:[2,"unknown"]}}))}))},e}(br),wr=function(t){function e(e,r,n){var i=t.call(this,e,r,n)||this;return i.opHash=e,i.context=r,i}return ze(e,t),e.prototype.originationOperation=function(){return Qe(this,void 0,void 0,(function(){var t;return Ye(this,(function(e){switch(e.label){case 0:return[4,this.operationResults()];case 1:return t=e.sent(),[2,cr(t,p.ORIGINATION)]}}))}))},e.prototype.revealOperation=function(){return Qe(this,void 0,void 0,(function(){var t;return Ye(this,(function(e){switch(e.label){case 0:return[4,this.operationResults()];case 1:return t=e.sent(),[2,cr(t,p.REVEAL)]}}))}))},e.prototype.status=function(){return Qe(this,void 0,void 0,(function(){var t;return Ye(this,(function(e){switch(e.label){case 0:return this._included?[4,this.originationOperation()]:[2,"pending"];case 1:return(t=e.sent())?[2,t.metadata.operation_result.status]:[2,"unknown"]}}))}))},e.prototype.contract=function(){return Qe(this,void 0,void 0,(function(){var t,e;return Ye(this,(function(r){switch(r.label){case 0:return[4,this.originationOperation()];case 1:return t=r.sent(),e=(t.metadata.operation_result.originated_contracts||[])[0],[2,this.context.wallet.at(e)]}}))}))},e}(br),Or=function(t){function e(e,r,n){var i=t.call(this,e,r,n)||this;return i.opHash=e,i.context=r,i}return ze(e,t),e.prototype.revealOperation=function(){return Qe(this,void 0,void 0,(function(){return Ye(this,(function(t){switch(t.label){case 0:return[4,this.operationResults()];case 1:return[2,t.sent().find((function(t){return t.kind===p.REVEAL}))]}}))}))},e.prototype.transactionOperation=function(){return Qe(this,void 0,void 0,(function(){return Ye(this,(function(t){switch(t.label){case 0:return[4,this.operationResults()];case 1:return[2,t.sent().find((function(t){return t.kind===p.TRANSACTION}))]}}))}))},e.prototype.status=function(){return Qe(this,void 0,void 0,(function(){var t;return Ye(this,(function(e){switch(e.label){case 0:return this._included?[4,this.transactionOperation()]:[2,"pending"];case 1:return(t=e.sent())?[2,t.metadata.operation_result.status]:[2,"unknown"]}}))}))},e}(br),Ar=function(){function t(t){var e,r=this;this.context=t,this.sharedHeadObs=Object(b.a)((function(){return Object(v.a)(r.context.rpc.getBlock())})).pipe((e=Object(w.a)(0,1e3),function(t){var r=null;return Object(b.a)((function(){return r||(r=new g.a,t.pipe(Object(x.a)()).subscribe(r),e.pipe(Object(x.a)()).subscribe((function(){r=null}))),r}))}))}return t.prototype.createNewHeadObservable=function(){return t=Object(w.a)(0,1e3*this.context.config.confirmationPollingIntervalSecond),e=this.sharedHeadObs,r=this.context,t.pipe(Object(C.a)((function(){return e})),Object(j.a)("hash"),Object(U.a)(1e3*r.config.confirmationPollingTimeoutSecond,Object(E.a)(new Error("Confirmation polling timed out")),n),Object(R.a)({refCount:!0,scheduler:n}));var t,e,r,n},t.prototype.createPastBlockWalker=function(t,e){var r=this;return void 0===e&&(e=1),Object(v.a)(this.context.rpc.getBlock({block:t})).pipe(Object(C.a)((function(t){return 1===e?Object(O.a)(t):Object(A.a)(t.header.level,e-1).pipe(Object(M.a)(t),Object(K.a)((function(t){return Qe(r,void 0,void 0,(function(){return Ye(this,(function(e){return[2,this.context.rpc.getBlock({block:String(t)})]}))}))})))})))},t.prototype.createHeadObservableFromConfig=function(t){var e=t.blockIdentifier,r=[];return e&&r.push(this.createPastBlockWalker(e)),r.push(this.createNewHeadObservable()),T.a.apply(void 0,Ze(r))},t.prototype.createOperation=function(t,e){return void 0===e&&(e={}),new br(t,this.context.clone(),this.createHeadObservableFromConfig(e))},t.prototype.createTransactionOperation=function(t,e){return void 0===e&&(e={}),new Or(t,this.context.clone(),this.createHeadObservableFromConfig(e))},t.prototype.createDelegationOperation=function(t,e){return void 0===e&&(e={}),new Er(t,this.context.clone(),this.createHeadObservableFromConfig(e))},t.prototype.createOriginationOperation=function(t,e){return void 0===e&&(e={}),new wr(t,this.context.clone(),this.createHeadObservableFromConfig(e))},t}();!function(t){t[t.DELEGATION=10600]="DELEGATION",t[t.ORIGINATION=10600]="ORIGINATION",t[t.TRANSFER=10600]="TRANSFER",t[t.REVEAL=10600]="REVEAL"}(Je||(Je={})),function(t){t[t.DELEGATION=1257]="DELEGATION",t[t.ORIGINATION=1e4]="ORIGINATION",t[t.TRANSFER=1e4]="TRANSFER",t[t.REVEAL=1420]="REVEAL"}(tr||(tr={})),function(t){t[t.DELEGATION=0]="DELEGATION",t[t.ORIGINATION=257]="ORIGINATION",t[t.TRANSFER=257]="TRANSFER",t[t.REVEAL=0]="REVEAL"}(er||(er={})),function(t){t.Pt24m4xi="Pt24m4xiPbLDhVgVfABUjirbmda3yohdN82Sp9FeuAXJ4eV9otd",t.PsBABY5H="PsBABY5HQTSkA4297zNHfsZNKtxULfL18y95qb3m53QJiXGmrbU",t.PsBabyM1="PsBabyM1eUXZseaJdmXFApDSBqj8YBfwELoxZHHW77EMcAbbwAS",t.PsCARTHA="PsCARTHAGazKbHtnKfLzQg3kms52kSRpgnDY982a9oYsSXRLQEb",t.PsDELPH1="PsDELPH1Kxsxt8f9eWbxQeRxkjfbxoqM52jvs5Y5fBxWWh4ifpo"}(rr||(rr={}));var Tr,_r;rr.Pt24m4xi,rr.PsBABY5H,rr.PsBabyM1,rr.PsCARTHA,rr.PsDELPH1;!function(t){t.MAINNET="KT1CPuTzwC7h7uLXd5WQmpMFso1HxrLBUtpE",t.CARTHAGENET="KT1VAy1o1FGiXYfD3YT7x7k5eF5HSHhmc1u6",t.DELPHINET="KT19abMFs3haqyKYwqdLjK9GbtofryZLvpiK"}(Tr||(Tr={})),function(t){t.MAINNET="NetXdQprcVkpaWU",t.CARTHAGENET="NetXjD3HPJJjmcd",t.DELPHINET="NetXm8tYqnMWky1"}(_r||(_r={}));var Pr=function(){function t(t){this.context=t}return Object.defineProperty(t.prototype,"rpc",{get:function(){return this.context.rpc},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"signer",{get:function(){return this.context.signer},enumerable:!1,configurable:!0}),t.prototype.prepareOperation=function(t){var e=t.operation,r=t.source;return Qe(this,void 0,void 0,(function(){var t,n,i,o,a,s,c,u,l,h,f,d,m,g,y,v,b,E,w,O,A,T,_,P,S;return Ye(this,(function(I){switch(I.label){case 0:return n={},i=!1,o=[],s=this.rpc.getBlockHeader(),c=this.rpc.getBlockMetadata(),o=Array.isArray(e)?Ze(e):[e],[4,this.signer.publicKeyHash()];case 1:u=I.sent(),l=Promise.resolve(void 0),h=Promise.resolve(void 0),f=0,I.label=2;case 2:return f<o.length?(R=o[f],-1===["transaction","delegation","origination"].indexOf(R.kind)?[3,4]:(i=!0,[4,this.rpc.getContract(u)])):[3,5];case 3:return d=I.sent().counter,l=Promise.resolve(d),h=this.rpc.getManagerKey(u),[3,5];case 4:return f++,[3,2];case 5:return[4,Promise.all([s,c,l,h])];case 6:if(m=$e.apply(void 0,[I.sent(),4]),g=m[0],y=m[1],v=m[2],b=m[3],!g)throw new Error("Unable to fetch latest block header");if(!y)throw new Error("Unable to fetch latest metadata");return a=g,i?(b&&"object"==typeof b?!!b.key:!!b)?[3,8]:(S={kind:p.REVEAL,fee:tr.REVEAL},[4,this.signer.publicKey()]):[3,8];case 7:S.public_key=I.sent(),S.source=u,S.gas_limit=Je.REVEAL,S.storage_limit=er.REVEAL,E=S,o.unshift(E),I.label=8;case 8:return t=parseInt(v||"0",10),(!n[u]||n[u]<t)&&(n[u]=t),w=function(t){return{counter:""+ ++n[u],fee:void 0===t.fee?"0":""+t.fee,gas_limit:void 0===t.gas_limit?"0":""+t.gas_limit,storage_limit:void 0===t.storage_limit?"0":""+t.storage_limit}},O=function(t){return{source:void 0===t.source?r||u:t.source}},A=function(t){return t.map((function(t){switch(t.kind){case p.ACTIVATION:return We({},t);case p.REVEAL:return We(We(We({},t),O(t)),w(t));case p.ORIGINATION:return We(We(We(We({},t),{balance:void 0!==t.balance?""+t.balance:"0"}),O(t)),w(t));case p.TRANSACTION:var e=We(We(We(We({},t),{amount:void 0!==t.amount?""+t.amount:"0"}),O(t)),w(t));if(e.source.toLowerCase().startsWith("kt1"))throw new Error("KT1 addresses are not supported as source since "+rr.PsBabyM1);return e;case p.DELEGATION:return We(We(We({},t),O(t)),w(t));default:throw new Error("Unsupported operation")}}))},T=a.hash,_=A(o),P=y.next_protocol,[2,{opOb:{branch:T,contents:_,protocol:P},counter:t}]}var R}))}))},t.prototype.prepareAndForge=function(t){return Qe(this,void 0,void 0,(function(){var e;return Ye(this,(function(r){switch(r.label){case 0:return[4,this.prepareOperation(t)];case 1:return e=r.sent(),[2,this.forge(e)]}}))}))},t.prototype.forge=function(t){var e=t.opOb,r=e.branch,n=e.contents,i=e.protocol,o=t.counter;return Qe(this,void 0,void 0,(function(){return Ye(this,(function(t){switch(t.label){case 0:return[4,this.context.forger.forge({branch:r,contents:n})];case 1:return[2,{opbytes:t.sent(),opOb:{branch:r,contents:n,protocol:i},counter:o}]}}))}))},t.prototype.simulate=function(t){return Qe(this,void 0,void 0,(function(){var e;return Ye(this,(function(r){switch(r.label){case 0:return e={},[4,this.rpc.runOperation(t)];case 1:return[2,(e.opResponse=r.sent(),e.op=t,e.context=this.context.clone(),e)]}}))}))},t.prototype.estimate=function(t,e){var r=t.fee,n=t.gasLimit,i=t.storageLimit,o=qe(t,["fee","gasLimit","storageLimit"]);return Qe(this,void 0,void 0,(function(){var t,a,s,c;return Ye(this,(function(u){switch(u.label){case 0:return t=r,a=n,s=i,void 0!==r&&void 0!==n&&void 0!==i?[3,2]:[4,e(We({fee:r,gasLimit:n,storageLimit:i},o))];case 1:c=u.sent(),void 0===t&&(t=c.suggestedFeeMutez),void 0===a&&(a=c.gasLimit),void 0===s&&(s=c.storageLimit),u.label=2;case 2:return[2,{fee:t,gasLimit:a,storageLimit:s}]}}))}))},t.prototype.signAndInject=function(t){return Qe(this,void 0,void 0,(function(){var e,r,n,i,o,a,s;return Ye(this,(function(c){switch(c.label){case 0:return[4,this.signer.sign(t.opbytes,new Uint8Array([3]))];case 1:return e=c.sent(),t.opbytes=e.sbytes,t.opOb.signature=e.prefixSig,r=[],[4,this.rpc.preapplyOperations([t.opOb])];case 2:if(n=c.sent(),!Array.isArray(n))throw new dr(n);for(i=0;i<n.length;i++)for(o=0;o<n[i].contents.length;o++)r.push(n[i].contents[o]);if((a=gr(n)).length)throw new fr(a);return s={},[4,this.context.injector.inject(t.opbytes)];case 3:return[2,(s.hash=c.sent(),s.forgedBytes=t,s.opResponse=r,s.context=this.context.clone(),s)]}}))}))},t}(),Sr=function(){function t(t,e,r,n){var i=this;this.hash=t,this.raw=e,this.results=r,this.context=n,this._pollingConfig$=new g.a(1),this._currentHeadPromise=void 0,this.currentHead$=Object(b.a)((function(){return i._currentHeadPromise||(i._currentHeadPromise=i.context.rpc.getBlock(),Object(w.a)(1e3).pipe(Object(x.a)()).subscribe((function(){i._currentHeadPromise=void 0}))),Object(v.a)(i._currentHeadPromise)})),this.polling$=Object(b.a)((function(){return i._pollingConfig$.pipe(Object(I.a)((function(t){var e=t.timeout,r=t.interval;if(e<=0)throw new Error("Timeout must be more than 0");if(r<=0)throw new Error("Interval must be more than 0")})),Object(k.a)((function(t){return We(We({},t),{timeoutAt:Math.ceil(t.timeout/t.interval)+1,count:0})})),Object(C.a)((function(t){return Object(w.a)(0,1e3*t.interval).pipe(Object(F.a)(t))})),Object(I.a)((function(t){if(t.count++,t.count>t.timeoutAt)throw new Error("Confirmation polling timed out")})))})),this.confirmed$=this.polling$.pipe(Object(G.a)(this.currentHead$),Object(k.a)((function(t){for(var e=3;e>=0;e--)t.operations[e].forEach((function(e){e.hash===i.hash&&(i._foundAt=t.header.level)}));if(t.header.level-i._foundAt>=0)return i._foundAt})),Object(N.a)((function(t){return void 0!==t})),Object(x.a)(),Object(R.a)()),this._foundAt=Number.POSITIVE_INFINITY,this.confirmed$.pipe(Object(x.a)()).subscribe()}return Object.defineProperty(t.prototype,"includedInBlock",{get:function(){return this._foundAt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"revealOperation",{get:function(){return Array.isArray(this.results)&&this.results.find((function(t){return"reveal"===t.kind}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"revealStatus",{get:function(){return this.revealOperation?this.revealOperation.metadata.operation_result.status:"unknown"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"status",{get:function(){return this.results.map((function(t){return hr(t)?t.metadata.operation_result.status:"unknown"}))[0]||"unknown"},enumerable:!1,configurable:!0}),t.prototype.confirmation=function(t,e,r){var n=this;if(void 0!==t&&t<1)throw new Error("Confirmation count must be at least 1");var i=this.context.config,o=i.defaultConfirmationCount,a=i.confirmationPollingIntervalSecond,s=i.confirmationPollingTimeoutSecond;this._pollingConfig$.next({interval:e||a,timeout:r||s});var c=void 0!==t?t:o;return new Promise((function(t,e){n.confirmed$.pipe(Object(C.a)((function(){return n.polling$})),Object(C.a)((function(){return n.currentHead$})),Object(N.a)((function(t){return t.header.level-n._foundAt>=c-1})),Object(x.a)()).subscribe((function(e){t(n._foundAt+(c-1))}),e)}))},t}(),Ir=function(t){function e(e){return t.call(this,e)||this}return ze(e,t),e.prototype.getBalance=function(t){return Qe(this,void 0,void 0,(function(){return Ye(this,(function(e){return[2,this.rpc.getBalance(t)]}))}))},e.prototype.getDelegate=function(t){return Qe(this,void 0,void 0,(function(){return Ye(this,(function(e){return[2,this.rpc.getDelegate(t)]}))}))},e.prototype.activate=function(t,e){return Qe(this,void 0,void 0,(function(){var r,n,i,o;return Ye(this,(function(a){switch(a.label){case 0:return r={kind:p.ACTIVATION,pkh:t,secret:e},[4,this.prepareAndForge({operation:[r],source:t})];case 1:return n=a.sent(),i=n.opbytes+"00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",o=Sr.bind,[4,this.rpc.injectOperation(i)];case 2:return[2,new(o.apply(Sr,[void 0,a.sent(),We(We({},n),{opbytes:i}),[],this.context.clone()]))]}}))}))},e}(Pr),Rr=100,kr=function(){function t(t,e,r,n,i){void 0===i&&(i=Rr),this._milligasLimit=t,this._storageLimit=e,this.opSize=r,this.minimalFeePerStorageByteMutez=n,this.baseFeeMutez=i}return Object.defineProperty(t.prototype,"burnFeeMutez",{get:function(){return this.roundUp(Number(this.storageLimit)*Number(this.minimalFeePerStorageByteMutez))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storageLimit",{get:function(){var t=Math.max(Number(this._storageLimit),0);return t>0?t:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gasLimit",{get:function(){return this.roundUp(Number(this._milligasLimit)/1e3+100)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"operationFeeMutez",{get:function(){return.1*(Number(this._milligasLimit)/1e3+100)+1*Number(this.opSize)},enumerable:!1,configurable:!0}),t.prototype.roundUp=function(t){return Math.ceil(Number(t))},Object.defineProperty(t.prototype,"minimalFeeMutez",{get:function(){return this.roundUp(Rr+this.operationFeeMutez)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"suggestedFeeMutez",{get:function(){return this.roundUp(this.operationFeeMutez+200)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"usingBaseFeeMutez",{get:function(){return Math.max(Number(this.baseFeeMutez),Rr)+this.roundUp(this.operationFeeMutez)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalCost",{get:function(){return this.minimalFeeMutez+this.burnFeeMutez},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"consumedMilligas",{get:function(){return Number(this._milligasLimit)},enumerable:!1,configurable:!0}),t}();function Nr(t){switch(t){case"tz":return 6;case"mtz":return 3;case"mutez":default:return 0}}function xr(t,e,r){void 0===t&&(t="mutez"),void 0===e&&(e="mutez");var n=new Y.a(r);return n.isNaN()?r:n.multipliedBy(Math.pow(10,Nr(t))).dividedBy(Math.pow(10,Nr(e)))}var Dr=function(t){var e=t.code,r=t.init,n=t.balance,i=void 0===n?"0":n,o=t.delegate,a=t.storage,s=t.fee,c=void 0===s?tr.ORIGINATION:s,u=t.gasLimit,l=void 0===u?Je.ORIGINATION:u,h=t.storageLimit,f=void 0===h?er.ORIGINATION:h;return Qe(void 0,void 0,void 0,(function(){var t,n,s,u,h,d,m,g,y;return Ye(this,(function(v){if(void 0!==a&&void 0!==r)throw new Error("Storage and Init cannot be set a the same time. Please either use storage or init but not both.");if(t=new Be({expandMacros:!0}),"string"==typeof e){if(null===(m=t.parseScript(e)))throw new Error("Empty Michelson source");n=m}else{if(m=t.parseJSON(e),!Array.isArray(m))throw new Error("JSON encoded Michelson script must be an array");s=["parameter","storage","code"],n=m.sort((function(t,e){return s.indexOf(t.prim)-s.indexOf(e.prim)}))}if(void 0!==a){if(void 0===(null==(h=n.find((function(t){return"prim"in t&&"storage"===t.prim})))?void 0:h.args))throw new Error("Missing storage section");d=new ne(h.args[0]),u=d.Encode(a)}else if("string"==typeof r){if(null===(m=t.parseMichelineExpression(r)))throw new Error("Empty initial storage value");u=m}else"object"==typeof r&&(u=t.parseJSON(r));return g={code:n,storage:u},y={kind:p.ORIGINATION,fee:c,gas_limit:l,storage_limit:f,balance:xr("tz","mutez",i).toString(),script:g},o&&(y.delegate=o),[2,y]}))}))},Lr=function(t){var e=t.to,r=t.amount,n=t.parameter,i=t.fee,o=void 0===i?tr.TRANSFER:i,a=t.gasLimit,s=void 0===a?Je.TRANSFER:a,c=t.storageLimit,u=void 0===c?er.TRANSFER:c,l=t.mutez,h=void 0!==l&&l;return Qe(void 0,void 0,void 0,(function(){return Ye(this,(function(t){return[2,{kind:p.TRANSACTION,fee:o,gas_limit:s,storage_limit:u,amount:h?r.toString():xr("tz","mutez",r).toString(),destination:e,parameters:n}]}))}))},Cr=function(t){var e=t.delegate,r=t.source,n=t.fee,i=void 0===n?tr.DELEGATION:n,o=t.gasLimit,a=void 0===o?Je.DELEGATION:o,s=t.storageLimit,c=void 0===s?er.DELEGATION:s;return Qe(void 0,void 0,void 0,(function(){return Ye(this,(function(t){return[2,{kind:p.DELEGATION,source:r,fee:i,gas_limit:a,storage_limit:c,delegate:e}]}))}))},jr=function(t,e){var r=t.fee,n=void 0===r?tr.DELEGATION:r,i=t.gasLimit,o=void 0===i?Je.DELEGATION:i,a=t.storageLimit,s=void 0===a?er.DELEGATION:a;return Qe(void 0,void 0,void 0,(function(){return Ye(this,(function(t){return[2,{kind:p.DELEGATION,fee:n,gas_limit:o,storage_limit:s,delegate:e}]}))}))},Ur=function(t,e){return{fee:void 0===t.fee?e.fee:t.fee,gasLimit:void 0===t.gasLimit?e.gasLimit:t.gasLimit,storageLimit:void 0===t.storageLimit?e.storageLimit:t.storageLimit}},Mr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ALLOCATION_STORAGE=257,e.ORIGINATION_STORAGE=257,e}return ze(e,t),e.prototype.getAccountLimits=function(t){return Qe(this,void 0,void 0,(function(){var e,r,n,i,o;return Ye(this,(function(a){switch(a.label){case 0:return[4,this.rpc.getBalance(t)];case 1:return e=a.sent(),[4,this.rpc.getConstants()];case 2:return r=a.sent(),n=r.hard_gas_limit_per_operation,i=r.hard_storage_limit_per_operation,o=r.cost_per_byte,[2,{fee:0,gasLimit:n.toNumber(),storageLimit:Math.floor(Y.a.min(e.dividedBy(o),i).toNumber())}]}}))}))},e.prototype.createEstimateFromOperationContent=function(t,e,r){var n=this,i=mr({contents:[t]}),o=0,a=0,s=0;return i.forEach((function(t){s+="originated_contracts"in t&&void 0!==t.originated_contracts?t.originated_contracts.length*n.ORIGINATION_STORAGE:0,s+="allocated_destination_contract"in t?n.ALLOCATION_STORAGE:0,o+=Number(t.consumed_gas)||0,a+=Number(t.consumed_milligas)||0,s+="paid_storage_size_diff"in t&&Number(t.paid_storage_size_diff)||0})),0!==o&&0===a&&(a=1e3*o),pr(t)?new kr(a||0,Number(s||0),e,r.toNumber()):new kr(0,0,e,r.toNumber(),0)},e.prototype.createEstimate=function(t){return Qe(this,void 0,void 0,(function(){var e,r,n,i,o,a,s,c,u,p,l=this;return Ye(this,(function(h){switch(h.label){case 0:return[4,this.prepareAndForge(t)];case 1:return e=h.sent(),r=e.opbytes,n=e.opOb,i=n.branch,o=n.contents,p={operation:{branch:i,contents:o,signature:"edsigtkpiSSschcaCt9pUVrpNPf7TTcgvgDEDD6NCEHMy8NNQJCGnMfLZzYoQj74yLjo9wx6MPVV29CvVzgi7qEcEUok3k7AuMg"}},[4,this.rpc.getChainId()];case 2:return p.chain_id=h.sent(),a=p,[4,this.simulate(a)];case 3:return s=h.sent().opResponse,[4,this.rpc.getConstants()];case 4:if(c=h.sent().cost_per_byte,(u=Ze(gr(s,"backtracked"),gr(s))).length)throw new fr(u);for(;s.contents.length!==(Array.isArray(t.operation)?t.operation.length:1);)s.contents.shift();return[2,s.contents.map((function(t){return l.createEstimateFromOperationContent(t,r.length/2/s.contents.length,c)}))]}}))}))},e.prototype.originate=function(t){var e=t.fee,r=t.storageLimit,n=t.gasLimit,i=qe(t,["fee","storageLimit","gasLimit"]);return Qe(this,void 0,void 0,(function(){var t,o,a;return Ye(this,(function(s){switch(s.label){case 0:return[4,this.signer.publicKeyHash()];case 1:return t=s.sent(),[4,this.getAccountLimits(t)];case 2:return o=s.sent(),[4,Dr(We(We({},i),Ur({fee:e,storageLimit:r,gasLimit:n},o)))];case 3:return a=s.sent(),[4,this.createEstimate({operation:a,source:t})];case 4:return[2,s.sent()[0]]}}))}))},e.prototype.transfer=function(t){var e=t.fee,r=t.storageLimit,n=t.gasLimit,i=qe(t,["fee","storageLimit","gasLimit"]);return Qe(this,void 0,void 0,(function(){var t,o,a;return Ye(this,(function(s){switch(s.label){case 0:return[4,this.signer.publicKeyHash()];case 1:return t=s.sent(),[4,this.getAccountLimits(t)];case 2:return o=s.sent(),[4,Lr(We(We({},i),Ur({fee:e,storageLimit:r,gasLimit:n},o)))];case 3:return a=s.sent(),[4,this.createEstimate({operation:a,source:t})];case 4:return[2,s.sent()[0]]}}))}))},e.prototype.setDelegate=function(t){var e=t.fee,r=t.gasLimit,n=t.storageLimit,i=qe(t,["fee","gasLimit","storageLimit"]);return Qe(this,void 0,void 0,(function(){var t,o,a,s;return Ye(this,(function(c){switch(c.label){case 0:return(o=i.source)?[3,2]:[4,this.signer.publicKeyHash()];case 1:o=c.sent(),c.label=2;case 2:return t=o,[4,this.getAccountLimits(t)];case 3:return a=c.sent(),[4,Cr(We(We({},i),Ur({fee:e,storageLimit:n,gasLimit:r},a)))];case 4:return s=c.sent(),[4,this.createEstimate({operation:s,source:t})];case 5:return[2,c.sent()[0]]}}))}))},e.prototype.batch=function(t){return Qe(this,void 0,void 0,(function(){var e,r,n,i,o,a,s,c,u,l,h,f,d,m,g;return Ye(this,(function(y){switch(y.label){case 0:return e=[],n=this.getAccountLimits,[4,this.signer.publicKeyHash()];case 1:return[4,n.apply(this,[y.sent()])];case 2:r=y.sent(),y.label=3;case 3:y.trys.push([3,15,16,17]),i=Xe(t),o=i.next(),y.label=4;case 4:if(o.done)return[3,14];switch(a=o.value,a.kind){case p.TRANSACTION:return[3,5];case p.ORIGINATION:return[3,7];case p.DELEGATION:return[3,9];case p.ACTIVATION:return[3,11]}return[3,12];case 5:return c=(s=e).push,[4,Lr(We(We({},a),Ur(a,r)))];case 6:return c.apply(s,[y.sent()]),[3,13];case 7:return l=(u=e).push,[4,Dr(We(We({},a),Ur(a,r)))];case 8:return l.apply(u,[y.sent()]),[3,13];case 9:return f=(h=e).push,[4,Cr(We(We({},a),Ur(a,r)))];case 10:return f.apply(h,[y.sent()]),[3,13];case 11:return e.push(We(We({},a),r)),[3,13];case 12:throw new Error("Unsupported operation kind: "+a.kind);case 13:return o=i.next(),[3,4];case 14:return[3,17];case 15:return d=y.sent(),m={error:d},[3,17];case 16:try{o&&!o.done&&(g=i.return)&&g.call(i)}finally{if(m)throw m.error}return[7];case 17:return[2,this.createEstimate({operation:e})]}}))}))},e.prototype.registerDelegate=function(t){return Qe(this,void 0,void 0,(function(){var e,r,n,i,o,a,s;return Ye(this,(function(c){switch(c.label){case 0:return r=this.getAccountLimits,[4,this.signer.publicKeyHash()];case 1:return[4,r.apply(this,[c.sent()])];case 2:return e=c.sent(),i=jr,o=[We(We({},t),e)],[4,this.signer.publicKeyHash()];case 3:return[4,i.apply(void 0,o.concat([c.sent()]))];case 4:return n=c.sent(),a=this.createEstimate,s={operation:n},[4,this.signer.publicKeyHash()];case 5:return[4,a.apply(this,[(s.source=c.sent(),s)])];case 6:return[2,c.sent()[0]]}}))}))},e}(Pr),Kr=function(t){function e(e,r,n,i,o,a){var s=t.call(this,e,i,o,a)||this;return s.params=r,s.source=n,s}return ze(e,t),Object.defineProperty(e.prototype,"operationResults",{get:function(){var t=Array.isArray(this.results)&&this.results.find((function(t){return"delegation"===t.kind})),e=t&&t.metadata&&t.metadata.operation_result;return e||void 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"status",{get:function(){var t=this.operationResults;return t?t.status:"unknown"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"delegate",{get:function(){return this.delegate},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRegisterOperation",{get:function(){return this.delegate===this.source},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fee",{get:function(){return this.params.fee},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gasLimit",{get:function(){return this.params.gas_limit},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"storageLimit",{get:function(){return this.params.storage_limit},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"consumedGas",{get:function(){var t=this.operationResults&&this.operationResults.consumed_gas;return t||void 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errors",{get:function(){return this.operationResults&&this.operationResults.errors},enumerable:!1,configurable:!0}),e}(Sr),Fr=function(t){function e(e,r,n,i,o,a){var s=t.call(this,e,n,i,o)||this;s.params=r,s.contractProvider=a;var c=s.operationResults&&s.operationResults.originated_contracts;return Array.isArray(c)&&(s.contractAddress=c[0]),s}return ze(e,t),Object.defineProperty(e.prototype,"status",{get:function(){var t=this.operationResults;return t?t.status:"unknown"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"operationResults",{get:function(){var t=Array.isArray(this.results)&&this.results.find((function(t){return"origination"===t.kind})),e=t&&hr(t)&&t.metadata.operation_result;return e||void 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fee",{get:function(){return this.params.fee},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gasLimit",{get:function(){return this.params.gas_limit},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"storageLimit",{get:function(){return this.params.storage_limit},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"consumedGas",{get:function(){var t=this.operationResults&&this.operationResults.consumed_gas;return t||void 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"storageDiff",{get:function(){var t=this.operationResults&&this.operationResults.paid_storage_size_diff;return t||void 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"storageSize",{get:function(){var t=this.operationResults&&this.operationResults.storage_size;return t||void 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errors",{get:function(){return this.operationResults&&this.operationResults.errors},enumerable:!1,configurable:!0}),e.prototype.contract=function(t,e,r){return Qe(this,void 0,void 0,(function(){return Ye(this,(function(n){switch(n.label){case 0:if(!this.contractAddress)throw new Error("No contract was originated in this operation");return[4,this.confirmation(t,e,r)];case 1:return n.sent(),[2,this.contractProvider.at(this.contractAddress)]}}))}))},e}(Sr),Gr=function(t){function e(e,r,n,i,o,a){var s=t.call(this,e,i,o,a)||this;return s.params=r,s.source=n,s}return ze(e,t),Object.defineProperty(e.prototype,"operationResults",{get:function(){var t=Array.isArray(this.results)&&this.results.find((function(t){return"transaction"===t.kind}));return t?[t]:[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"status",{get:function(){var t=this.operationResults[0];return t?t.metadata.operation_result.status:"unknown"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"amount",{get:function(){return new Y.a(this.params.amount)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"destination",{get:function(){return this.params.destination},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fee",{get:function(){return this.params.fee},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gasLimit",{get:function(){return this.params.gas_limit},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"storageLimit",{get:function(){return this.params.storage_limit},enumerable:!1,configurable:!0}),e.prototype.sumProp=function(t,e){return t.reduce((function(t,r){return e in r?Number(r[e])+t:t}),0)},Object.defineProperty(e.prototype,"consumedGas",{get:function(){return String(this.sumProp(mr({contents:this.operationResults}),"consumed_gas"))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"storageDiff",{get:function(){return String(this.sumProp(mr({contents:this.operationResults}),"paid_storage_size_diff"))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"storageSize",{get:function(){return String(this.sumProp(mr({contents:this.operationResults}),"storage_size"))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errors",{get:function(){return gr({contents:this.operationResults})},enumerable:!1,configurable:!0}),e}(Sr),Br=function(t,e,r){this.smartContractMethodName=t,this.sigs=e,this.args=r,this.name="Invalid parameters error",this.message=t+" Received "+r.length+" arguments while expecting one of the following signatures ("+JSON.stringify(e)+")"},Hr=function(){this.name="Undefined LambdaContract error",this.message="This might happen if you are using a sandbox. Please provide the address of a lambda contract as a parameter of the read method."},Vr=function(t){this.source=t,this.name="Invalid delegation source error",this.message="Since Babylon delegation source can no longer be a contract address "+t+". Please use the smart contract abstraction to set your delegate."},zr=function(){function t(t,e){this.walletProvider=t,this.operationFactory=e,this.operations=[]}return t.prototype.withTransfer=function(t){return this.operations.push(We({kind:p.TRANSACTION},t)),this},t.prototype.withContractCall=function(t){return this.withTransfer(t.toTransferParams())},t.prototype.withDelegation=function(t){return this.operations.push(We({kind:p.DELEGATION},t)),this},t.prototype.withOrigination=function(t){return this.operations.push(We({kind:p.ORIGINATION},t)),this},t.prototype.mapOperation=function(t){return Qe(this,void 0,void 0,(function(){return Ye(this,(function(e){switch(t.kind){case p.TRANSACTION:return[2,this.walletProvider.mapTransferParamsToWalletParams(We({},t))];case p.ORIGINATION:return[2,this.walletProvider.mapOriginateParamsToWalletParams(We({},t))];case p.DELEGATION:return[2,this.walletProvider.mapDelegateParamsToWalletParams(We({},t))];default:throw new Error("Unsupported operation kind: "+t.kind)}}))}))},t.prototype.with=function(t){var e,r;try{for(var n=Xe(t),i=n.next();!i.done;i=n.next()){var o=i.value;switch(o.kind){case p.TRANSACTION:this.withTransfer(o);break;case p.ORIGINATION:this.withOrigination(o);break;case p.DELEGATION:this.withDelegation(o);break;default:throw new Error("Unsupported operation kind: "+o.kind)}}}catch(a){e={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return this},t.prototype.send=function(){return Qe(this,void 0,void 0,(function(){var t,e,r,n,i,o,a,s,c,u;return Ye(this,(function(p){switch(p.label){case 0:t=[],p.label=1;case 1:p.trys.push([1,6,7,8]),e=Xe(this.operations),r=e.next(),p.label=2;case 2:return r.done?[3,5]:(n=r.value,o=(i=t).push,[4,this.mapOperation(n)]);case 3:o.apply(i,[p.sent()]),p.label=4;case 4:return r=e.next(),[3,2];case 5:return[3,8];case 6:return a=p.sent(),c={error:a},[3,8];case 7:try{r&&!r.done&&(u=e.return)&&u.call(e)}finally{if(c)throw c.error}return[7];case 8:return[4,this.walletProvider.sendOperations(t)];case 9:return s=p.sent(),[2,this.operationFactory.createOperation(s)]}}))}))},t}(),Wr=function(){function t(t){this.context=t,this.walletCommand=function(t){return{send:t}}}return Object.defineProperty(t.prototype,"walletProvider",{get:function(){return this.context.walletProvider},enumerable:!1,configurable:!0}),t.prototype.pkh=function(t){var e=(void 0===t?{}:t).forceRefetch;return Qe(this,void 0,void 0,(function(){var t;return Ye(this,(function(r){switch(r.label){case 0:return this._pkh&&!e?[3,2]:(t=this,[4,this.walletProvider.getPKH()]);case 1:t._pkh=r.sent(),r.label=2;case 2:return[2,this._pkh]}}))}))},t.prototype.originate=function(t){var e=this;return this.walletCommand((function(){return Qe(e,void 0,void 0,(function(){var e,r;return Ye(this,(function(n){switch(n.label){case 0:return[4,this.walletProvider.mapOriginateParamsToWalletParams(We({},t))];case 1:return e=n.sent(),[4,this.walletProvider.sendOperations([e])];case 2:return r=n.sent(),[2,this.context.operationFactory.createOriginationOperation(r)]}}))}))}))},t.prototype.setDelegate=function(t){var e=this;return this.walletCommand((function(){return Qe(e,void 0,void 0,(function(){var e,r;return Ye(this,(function(n){switch(n.label){case 0:return[4,this.walletProvider.mapDelegateParamsToWalletParams(We({},t))];case 1:return e=n.sent(),[4,this.walletProvider.sendOperations([e])];case 2:return r=n.sent(),[2,this.context.operationFactory.createDelegationOperation(r)]}}))}))}))},t.prototype.registerDelegate=function(){var t=this;return this.walletCommand((function(){return Qe(t,void 0,void 0,(function(){var t,e,r,n,i;return Ye(this,(function(o){switch(o.label){case 0:return r=(e=this.walletProvider).mapDelegateParamsToWalletParams,i={},[4,this.pkh()];case 1:return[4,r.apply(e,[(i.delegate=o.sent(),i)])];case 2:return t=o.sent(),[4,this.walletProvider.sendOperations([t])];case 3:return n=o.sent(),[2,this.context.operationFactory.createDelegationOperation(n)]}}))}))}))},t.prototype.transfer=function(t){var e=this;return this.walletCommand((function(){return Qe(e,void 0,void 0,(function(){var e,r;return Ye(this,(function(n){switch(n.label){case 0:return[4,this.walletProvider.mapTransferParamsToWalletParams(t)];case 1:return e=n.sent(),[4,this.walletProvider.sendOperations([e])];case 2:return r=n.sent(),[2,this.context.operationFactory.createTransactionOperation(r)]}}))}))}))},t.prototype.batch=function(t){var e=new zr(this.walletProvider,this.context.operationFactory);return e.with(t),e},t.prototype.at=function(t){return Qe(this,void 0,void 0,(function(){var e,r,n,i;return Ye(this,(function(o){switch(o.label){case 0:return[4,this.context.rpc.getScript(t)];case 1:return e=o.sent(),[4,this.context.rpc.getEntrypoints(t)];case 2:return r=o.sent(),[4,this.context.rpc.getBlockHeader()];case 3:return n=o.sent(),i=n.chain_id,[2,new Jr(t,e,this,this.context.contract,r,i)]}}))}))},t}(),qr=function(){function t(t){this.context=t}return t.prototype.getPKH=function(){return Qe(this,void 0,void 0,(function(){return Ye(this,(function(t){return[2,this.context.signer.publicKeyHash()]}))}))},t.prototype.mapTransferParamsToWalletParams=function(t){return Qe(this,void 0,void 0,(function(){return Ye(this,(function(e){return[2,sr(t,p.TRANSACTION)]}))}))},t.prototype.mapOriginateParamsToWalletParams=function(t){return Qe(this,void 0,void 0,(function(){return Ye(this,(function(e){return[2,sr(t,p.ORIGINATION)]}))}))},t.prototype.mapDelegateParamsToWalletParams=function(t){return Qe(this,void 0,void 0,(function(){return Ye(this,(function(e){return[2,sr(t,p.DELEGATION)]}))}))},t.prototype.sendOperations=function(t){return Qe(this,void 0,void 0,(function(){return Ye(this,(function(e){switch(e.label){case 0:return[4,this.context.batch.batch(t).send()];case 1:return[2,e.sent().hash]}}))}))},t}(),Qr=function(){function t(t,e,r,n){void 0===r&&(r="default"),void 0===n&&(n={prim:"Unit"}),this.lambdaContract=t,this.viewContract=e,this.viewMethod=r,this.contractParameter=n,this.voidLambda=this.createVoidLambda()}return t.prototype.execute=function(){return Qe(this,void 0,void 0,(function(){var t,e;return Ye(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.lambdaContract.methods.default(this.voidLambda).send()];case 1:return r.sent(),[3,3];case 2:return(t=r.sent())instanceof fr?(e=t.errors[t.errors.length-1],[2,e.with]):[3,3];case 3:return[2]}}))}))},t.prototype.createVoidLambda=function(){var t=$e(this.getView(),2),e=t[0],r=t[1],n=[{prim:"pair",args:[e,{prim:"contract",args:[r]}]}];return"default"===this.viewMethod&&(n=[{string:"%default"}].concat(n)),[{prim:"PUSH",args:[{prim:"mutez"},{int:"0"}]},{prim:"NONE",args:[{prim:"key_hash"}]},{prim:"CREATE_CONTRACT",args:[[{prim:"parameter",args:[r]},{prim:"storage",args:[{prim:"unit"}]},{prim:"code",args:[[{prim:"CAR"},{prim:"FAILWITH"}]]}]]},{prim:"DIP",args:[[{prim:"DIP",args:[[{prim:"LAMBDA",args:[{prim:"pair",args:[{prim:"address"},{prim:"unit"}]},{prim:"pair",args:[{prim:"list",args:[{prim:"operation"}]},{prim:"unit"}]},[{prim:"CAR"},{prim:"CONTRACT",args:[r]},{prim:"IF_NONE",args:[[{prim:"PUSH",args:[{prim:"string"},{string:"Callback type unmatched"}]},{prim:"FAILWITH"}],[]]},{prim:"PUSH",args:[e,this.contractParameter]},{prim:"PAIR"},{prim:"DIP",args:[[{prim:"PUSH",args:[{prim:"address"},{string:this.viewContract.address+"%"+this.viewMethod}]},{prim:"DUP"},{prim:"CONTRACT",args:n},{prim:"IF_NONE",args:[[{prim:"PUSH",args:[{prim:"string"},{string:"Contract does not exist"}]},{prim:"FAILWITH"}],[{prim:"DIP",args:[[{prim:"DROP"}]]}]]},{prim:"PUSH",args:[{prim:"mutez"},{int:"0"}]}]]},{prim:"TRANSFER_TOKENS"},{prim:"DIP",args:[[{prim:"NIL",args:[{prim:"operation"}]}]]},{prim:"CONS"},{prim:"DIP",args:[[{prim:"UNIT"}]]},{prim:"PAIR"}]]}]]},{prim:"APPLY"},{prim:"DIP",args:[[{prim:"PUSH",args:[{prim:"address"},{string:this.lambdaContract.address}]},{prim:"DUP"},{prim:"CONTRACT",args:[{prim:"lambda",args:[{prim:"unit"},{prim:"pair",args:[{prim:"list",args:[{prim:"operation"}]},{prim:"unit"}]}]}]},{prim:"IF_NONE",args:[[{prim:"PUSH",args:[{prim:"string"},{string:"Contract does not exists"}]},{prim:"FAILWITH"}],[{prim:"DIP",args:[[{prim:"DROP"}]]}]]},{prim:"PUSH",args:[{prim:"mutez"},{int:"0"}]}]]},{prim:"TRANSFER_TOKENS"},{prim:"DIP",args:[[{prim:"NIL",args:[{prim:"operation"}]}]]},{prim:"CONS"}]]},{prim:"CONS"},{prim:"DIP",args:[[{prim:"UNIT"}]]},{prim:"PAIR"}]},t.prototype.getView=function(){var t=this.viewContract.entrypoints.entrypoints[this.viewMethod];if(!t)throw Error("Contract at "+this.viewContract.address+" does not have entrypoint: "+this.viewMethod);if(!("prim"in t)||!t.args)throw Error("Entrypoint args undefined");var e,r=Array.from(t.args),n=$e(r,2),i=n[0],o=n[1];if("annots"in i&&delete i.annots,!("prim"in o)||!o.args)throw Error("Callback contract args undefined");if("pair"!==t.prim?e="Expected {'prim': 'pair', ..} but found {'prim': "+t.prim+", ..}":2!==r.length?e="Expected an Array of length 2, but found: "+r:"contract"!==o.prim?e="Expected a {prim: 'contract', ...}, but found: "+o.prim:o.args&&1!==o.args.length&&(e="Expected a single argument to 'contract', but found: "+o.args),e)throw Error(e);return[i,o.args[0]]},t}(),Yr="default",Xr=function(){function t(t,e,r,n,i,o,a){void 0===o&&(o=!0),void 0===a&&(a=!1),this.provider=t,this.address=e,this.parameterSchema=r,this.name=n,this.args=i,this.isMultipleEntrypoint=o,this.isAnonymous=a}return Object.defineProperty(t.prototype,"schema",{get:function(){return this.isAnonymous?this.parameterSchema.ExtractSchema()[this.name]:this.parameterSchema.ExtractSchema()},enumerable:!1,configurable:!0}),t.prototype.send=function(t){return void 0===t&&(t={}),this.provider instanceof Wr?this.provider.transfer(this.toTransferParams(t)).send():this.provider.transfer(this.toTransferParams(t))},t.prototype.toTransferParams=function(t){var e,r,n=void 0===t?{}:t,i=n.fee,o=n.gasLimit,a=n.storageLimit,s=n.source,c=n.amount,u=void 0===c?0:c,p=n.mutez,l=void 0!==p&&p;return{to:this.address,amount:u,fee:i,mutez:l,source:s,gasLimit:o,storageLimit:a,parameter:{entrypoint:this.isMultipleEntrypoint?this.name:"default",value:this.isAnonymous?(e=this.parameterSchema).Encode.apply(e,Ze([this.name],this.args)):(r=this.parameterSchema).Encode.apply(r,Ze(this.args))}}},t}(),$r=function(){function t(t,e,r,n,i,o,a){this.currentContract=t,this.provider=e,this.name=r,this.chainId=n,this.callbackParametersSchema=i,this.parameterSchema=o,this.args=a}return t.prototype.read=function(t){return Qe(this,void 0,void 0,(function(){var e,r,n,i,o;return Ye(this,(function(a){switch(a.label){case 0:if(t)e=t;else if(this.chainId===_r.CARTHAGENET)e=Tr.CARTHAGENET;else if(this.chainId===_r.DELPHINET)e=Tr.DELPHINET;else{if(this.chainId!==_r.MAINNET)throw new Hr;e=Tr.MAINNET}return[4,this.provider.at(e)];case 1:return r=a.sent(),n=(o=this.parameterSchema).Encode.apply(o,Ze(this.args)),[4,new Qr(r,this.currentContract,this.name,n).execute()];case 2:return i=a.sent(),[2,this.callbackParametersSchema.Execute(i)]}}))}))},t}(),Zr=function(t,e,r){var n=e.ExtractSignatures();if(!n.find((function(e){return e.length===t.length})))throw new Br(r,n,t)},Jr=function(){function t(t,e,r,n,i,o){this.address=t,this.script=e,this.storageProvider=n,this.entrypoints=i,this.chainId=o,this.methods={},this.views={},this.schema=ne.fromRPCResponse({script:this.script}),this.parameterSchema=ie.fromRPCResponse({script:this.script}),this._initializeMethods(this,t,r,this.entrypoints.entrypoints,this.chainId)}return t.prototype._initializeMethods=function(t,e,r,n,i){var o=this,a=this.parameterSchema,s=Object.keys(n);if(a.isMultipleEntryPoint){s.forEach((function(a){var s=new ie(n[a]);if(o.methods[a]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Zr(t,s,a),new Xr(r,e,s,a,t)},void 0!==r.contractProviderTypeSymbol&&function(t){var e=!1,r=t.ExtractSignatures();return"contract"===r[0][r[0].length-1]&&(e=!0),e}(s)){o.views[a]=function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];var s=n[a].args[0],c=new ie(s),u=n[a].args[1].args[0],p=new ie(u);return Zr(e,c,a),new $r(t,r,a,i,p,c,e)}}})),Object.keys(a.ExtractSchema()).filter((function(t){return-1===Object.keys(n).indexOf(t)})).forEach((function(t){o.methods[t]=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return Zr(Ze([t],n),a,t),new Xr(r,e,a,t,n,!1,!0)}}))}else{var c=this.parameterSchema;this.methods.default=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Zr(t,a,Yr),new Xr(r,e,c,Yr,t,!1)}}},t.prototype.storage=function(){return this.storageProvider.getStorage(this.address,this.schema)},t.prototype.bigMap=function(t){return this.storageProvider.getBigMapKey(this.address,t,this.schema)},t}(),tn=function(){function t(t,e,r){this.id=t,this.schema=e,this.provider=r}return t.prototype.get=function(t){return Qe(this,void 0,void 0,(function(){var e;return Ye(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.provider.getBigMapKeyByID(this.id.toString(),t,this.schema)];case 1:return[2,r.sent()];case 2:if((e=r.sent())instanceof n.b&&e.status===n.c.NOT_FOUND)return[2,void 0];throw e;case 3:return[2]}}))}))},t.prototype.toJSON=function(){return this.id.toString()},t.prototype.toString=function(){return this.id.toString()},t}(),en=function(t){return{big_map:function(e,r){if(e&&"int"in e&&void 0!==e.int){var n=new ne(r);return new tn(new Y.a(e.int),n,t)}return{}}}},rn=function(t){function e(e,r){var n=t.call(this,e)||this;return n.estimator=r,n.contractProviderTypeSymbol=Symbol.for("taquito--provider-type-symbol"),n}return ze(e,t),e.prototype.getStorage=function(t,e){return Qe(this,void 0,void 0,(function(){var r,n;return Ye(this,(function(i){switch(i.label){case 0:return e?[3,2]:[4,this.rpc.getScript(t)];case 1:e=i.sent(),i.label=2;case 2:return r=ne.isSchema(e)?e:ne.fromRPCResponse({script:e}),[4,this.rpc.getStorage(t)];case 3:return n=i.sent(),[2,r.Execute(n,en(this))]}}))}))},e.prototype.getBigMapKey=function(t,e,r){return Qe(this,void 0,void 0,(function(){var n,i,o;return Ye(this,(function(a){switch(a.label){case 0:return r?[3,2]:[4,this.rpc.getScript(t)];case 1:r=a.sent(),a.label=2;case 2:return n=ne.isSchema(r)?r:ne.fromRPCResponse({script:r}),i=n.EncodeBigMapKey(e),[4,this.rpc.getBigMapKey(t,i)];case 3:return o=a.sent(),[2,n.ExecuteOnBigMapValue(o)]}}))}))},e.prototype.getBigMapKeyByID=function(t,e,r){return Qe(this,void 0,void 0,(function(){var n,i,o,a,s,c;return Ye(this,(function(u){switch(u.label){case 0:return n=r.EncodeBigMapKey(e),i=n.key,o=n.type,[4,this.context.rpc.packData({data:i,type:o})];case 1:return a=u.sent().packed,s=Object(tt.g)(a),[4,this.context.rpc.getBigMapExpr(t.toString(),s)];case 2:return c=u.sent(),[2,r.ExecuteOnBigMapValue(c,en(this))]}}))}))},e.prototype.originate=function(t){return Qe(this,void 0,void 0,(function(){var e,r,n,i,o,a,s,c,u,p;return Ye(this,(function(l){switch(l.label){case 0:return[4,this.estimate(t,this.estimator.originate.bind(this.estimator))];case 1:return e=l.sent(),[4,this.signer.publicKeyHash()];case 2:return r=l.sent(),[4,Dr(We(We({},t),e))];case 3:return n=l.sent(),[4,this.prepareOperation({operation:n,source:r})];case 4:return i=l.sent(),[4,this.forge(i)];case 5:return o=l.sent(),[4,this.signAndInject(o)];case 6:return a=l.sent(),s=a.hash,c=a.context,u=a.forgedBytes,p=a.opResponse,[2,new Fr(s,n,u,p,c,this)]}}))}))},e.prototype.setDelegate=function(t){return Qe(this,void 0,void 0,(function(){var e,r,n,i,o,a,s,c,u,p;return Ye(this,(function(l){switch(l.label){case 0:if(/kt1/i.test(t.source))throw new Vr(t.source);return[4,this.estimate(t,this.estimator.setDelegate.bind(this.estimator))];case 1:return e=l.sent(),[4,Cr(We(We({},t),e))];case 2:return r=l.sent(),(i=t.source)?[3,4]:[4,this.signer.publicKeyHash()];case 3:i=l.sent(),l.label=4;case 4:return n=i,[4,this.prepareAndForge({operation:r,source:n})];case 5:return o=l.sent(),[4,this.signAndInject(o)];case 6:return a=l.sent(),s=a.hash,c=a.context,u=a.forgedBytes,p=a.opResponse,[2,new Kr(s,r,n,u,p,c)]}}))}))},e.prototype.registerDelegate=function(t){return Qe(this,void 0,void 0,(function(){var e,r,n,i,o,a,s,c,u;return Ye(this,(function(p){switch(p.label){case 0:return[4,this.estimate(t,this.estimator.registerDelegate.bind(this.estimator))];case 1:return e=p.sent(),[4,this.signer.publicKeyHash()];case 2:return r=p.sent(),[4,jr(We(We({},t),e),r)];case 3:return n=p.sent(),[4,this.prepareAndForge({operation:n})];case 4:return i=p.sent(),[4,this.signAndInject(i)];case 5:return o=p.sent(),a=o.hash,s=o.context,c=o.forgedBytes,u=o.opResponse,[2,new Kr(a,n,r,c,u,s)]}}))}))},e.prototype.transfer=function(t){return Qe(this,void 0,void 0,(function(){var e,r,n,i,o,a,s,c,u,p;return Ye(this,(function(l){switch(l.label){case 0:return[4,this.estimate(t,this.estimator.transfer.bind(this.estimator))];case 1:return e=l.sent(),[4,Lr(We(We({},t),e))];case 2:return r=l.sent(),(i=t.source)?[3,4]:[4,this.signer.publicKeyHash()];case 3:i=l.sent(),l.label=4;case 4:return n=i,[4,this.prepareAndForge({operation:r,source:t.source})];case 5:return o=l.sent(),[4,this.signAndInject(o)];case 6:return a=l.sent(),s=a.hash,c=a.context,u=a.forgedBytes,p=a.opResponse,[2,new Gr(s,r,n,u,p,c)]}}))}))},e.prototype.at=function(t){return Qe(this,void 0,void 0,(function(){var e,r,n,i;return Ye(this,(function(o){switch(o.label){case 0:return[4,this.rpc.getScript(t)];case 1:return e=o.sent(),[4,this.rpc.getEntrypoints(t)];case 2:return r=o.sent(),[4,this.rpc.getBlockHeader()];case 3:return n=o.sent(),i=n.chain_id,[2,new Jr(t,e,this,this,r,i)]}}))}))},e}(Pr),nn=function(t){function e(e,r,n,i,o,a){var s=t.call(this,e,i,o,a)||this;return s.params=r,s.source=n,s}return ze(e,t),e.prototype.sumProp=function(t,e){return t.reduce((function(t,r){return e in r?Number(r[e])+t:t}),0)},Object.defineProperty(e.prototype,"status",{get:function(){return this.results.filter((function(t){return-1!==on.indexOf(t.kind)})).map((function(t){return hr(t)?t.metadata.operation_result.status:"unknown"}))[0]||"unknown"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fee",{get:function(){return this.sumProp(this.params,"fee")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gasLimit",{get:function(){return this.sumProp(this.params,"gas_limit")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"storageLimit",{get:function(){return this.sumProp(this.params,"storage_limit")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"consumedGas",{get:function(){return String(this.sumProp(mr({contents:this.results}),"consumed_gas"))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"storageDiff",{get:function(){return String(this.sumProp(mr({contents:this.results}),"paid_storage_size_diff"))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errors",{get:function(){return gr({contents:this.results})},enumerable:!1,configurable:!0}),e}(Sr),on=[p.ACTIVATION,p.ORIGINATION,p.TRANSACTION,p.DELEGATION],an=function(t){function e(e,r){var n=t.call(this,e)||this;return n.estimator=r,n.operations=[],n}return ze(e,t),e.prototype.withTransfer=function(t){return this.operations.push(We({kind:p.TRANSACTION},t)),this},e.prototype.withContractCall=function(t){return this.withTransfer(t.toTransferParams())},e.prototype.withDelegation=function(t){return this.operations.push(We({kind:p.DELEGATION},t)),this},e.prototype.withActivation=function(t){var e=t.pkh,r=t.secret;return this.operations.push({kind:p.ACTIVATION,pkh:e,secret:r}),this},e.prototype.withOrigination=function(t){return this.operations.push(We({kind:p.ORIGINATION},t)),this},e.prototype.getRPCOp=function(t){return Qe(this,void 0,void 0,(function(){return Ye(this,(function(e){switch(t.kind){case p.TRANSACTION:return[2,Lr(We({},t))];case p.ORIGINATION:return[2,Dr(We({},t))];case p.DELEGATION:return[2,Cr(We({},t))];case p.ACTIVATION:return[2,We({},t)];default:throw new Error("Unsupported operation kind: "+t.kind)}}))}))},e.prototype.with=function(t){var e,r;try{for(var n=Xe(t),i=n.next();!i.done;i=n.next()){var o=i.value;switch(o.kind){case p.TRANSACTION:this.withTransfer(o);break;case p.ORIGINATION:this.withOrigination(o);break;case p.DELEGATION:this.withDelegation(o);break;case p.ACTIVATION:this.withActivation(o);break;default:throw new Error("Unsupported operation kind: "+o.kind)}}}catch(a){e={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return this},e.prototype.send=function(t){return Qe(this,void 0,void 0,(function(){var e,r,n,i,o,a,s,c,u,p,l,h,f,d,m,g,y,v,b,E,w=this;return Ye(this,(function(O){switch(O.label){case 0:return[4,this.estimator.batch(this.operations)];case 1:e=O.sent(),r=[],n=0,O.label=2;case 2:O.trys.push([2,10,11,12]),i=Xe(this.operations),o=i.next(),O.label=3;case 3:return o.done?[3,9]:(a=o.value,pr(a)?[4,this.estimate(a,(function(){return Qe(w,void 0,void 0,(function(){return Ye(this,(function(t){return[2,e[n]]}))}))}))]:[3,6]);case 4:return s=O.sent(),u=(c=r).push,[4,this.getRPCOp(We(We({},a),s))];case 5:return u.apply(c,[O.sent()]),[3,7];case 6:r.push(We({},a)),O.label=7;case 7:n++,O.label=8;case 8:return o=i.next(),[3,3];case 9:return[3,12];case 10:return p=O.sent(),b={error:p},[3,12];case 11:try{o&&!o.done&&(E=i.return)&&E.call(i)}finally{if(b)throw b.error}return[7];case 12:return(h=t&&t.source)?[3,14]:[4,this.signer.publicKeyHash()];case 13:h=O.sent(),O.label=14;case 14:return l=h,[4,this.prepareAndForge({operation:r,source:l})];case 15:return f=O.sent(),[4,this.signAndInject(f)];case 16:return d=O.sent(),m=d.hash,g=d.context,y=d.forgedBytes,v=d.opResponse,[2,new nn(m,r,l,y,v,g)]}}))}))},e}(Pr),sn=function(){function t(t,e){this.context=t,this.estimator=e}return t.prototype.batch=function(t){var e=new an(this.context,this.estimator);return Array.isArray(t)&&e.with(t),e},t}(),cn={confirmationPollingIntervalSecond:10,defaultConfirmationCount:1,confirmationPollingTimeoutSecond:180,shouldObservableSubscriptionRetry:!1},un=function(){function t(t,e,r,n,i,o,a){void 0===e&&(e=new ar),this._rpc=t,this._signer=e,this._proto=r,this._config=n,this.tz=new Ir(this),this.estimate=new Mr(this),this.contract=new rn(this,this.estimate),this.batch=new sn(this,this.estimate),this.wallet=new Wr(this),"string"==typeof this._rpc?this._rpcClient=new m(this._rpc):this._rpcClient=this._rpc,this.config=n,this._forger=i||new nr(this),this._injector=o||new ir(this),this.operationFactory=new Ar(this),this._walletProvider=a||new qr(this)}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config},set:function(t){this._config=We(We({},cn),t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rpc",{get:function(){return this._rpcClient},set:function(t){this._rpcClient=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"injector",{get:function(){return this._injector},set:function(t){this._injector=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"forger",{get:function(){return this._forger},set:function(t){this._forger=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"signer",{get:function(){return this._signer},set:function(t){this._signer=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"walletProvider",{get:function(){return this._walletProvider},set:function(t){this._walletProvider=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"proto",{get:function(){return this._proto},set:function(t){this._proto=t},enumerable:!1,configurable:!0}),t.prototype.isAnyProtocolActive=function(t){return void 0===t&&(t=[]),Qe(this,void 0,void 0,(function(){var e;return Ye(this,(function(r){switch(r.label){case 0:return this._proto?[2,t.includes(this._proto)]:[3,1];case 1:return[4,this.rpc.getBlockMetadata()];case 2:return e=r.sent().next_protocol,[2,t.includes(e)]}}))}))},t.prototype.clone=function(){return new t(this.rpc,this.signer,this.proto,this.config,this.forger,this._injector)},t}(),pn=function(t,e){return"opHash"in e?function(t,e){return t.hash===e.opHash}(t,e):"source"in e?function(t,e){switch(t.kind){case"endorsement":return"metadata"in t&&t.metadata.delegate===e.source;case"activate_account":return"metadata"in t&&t.pkh===e.source;default:return"source"in t&&t.source===e.source}}(t,e):"kind"in e?function(t,e){return"kind"in t&&t.kind===e.kind}(t,e):"destination"in e&&function(t,e){switch(t.kind){case"delegation":return t.delegate===e.destination;case"origination":if("metadata"in t&&"operation_result"in t.metadata&&"originated_contracts"in t.metadata.operation_result&&Array.isArray(t.metadata.operation_result.originated_contracts))return t.metadata.operation_result.originated_contracts.some((function(t){return t===e.destination}));break;case"transaction":return t.destination===e.destination;default:return!1}}(t,e)},ln=function(t,e){if(Array.isArray(e.and))return e.and.every((function(e){return hn(t,e)}));if(Array.isArray(e.or))return e.or.some((function(e){return hn(t,e)}));throw new Error("Filter expression must contains either and/or property")},hn=function(t,e){var r=[];return Array.isArray(e)?r.push.apply(r,Ze(e)):r.push(e),r.every((function(e){return"and"in e||"or"in e?ln(t,e):pn(t,e)}))},fn=function(){function t(t,e){var r=this;void 0===e&&(e=!1),this.shouldRetry=e,this.errorListeners=[],this.messageListeners=[],this.closeListeners=[],this.completed$=new _.a,t.pipe(Object(B.a)(this.completed$),Object(I.a)((function(t){r.call(r.messageListeners,t)}),(function(t){r.call(r.errorListeners,t)}),(function(){r.call(r.closeListeners)})),this.shouldRetry?Object(H.a)():Object(I.a)(),Object(V.a)((function(){return P.a}))).subscribe()}return t.prototype.call=function(t,e){var r,n;try{for(var i=Xe(t),o=i.next();!o.done;o=i.next()){var a=o.value;try{a(e)}catch(s){console.error(s)}}}catch(c){r={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},t.prototype.remove=function(t,e){var r=t.indexOf(e);-1!==r&&t.splice(r,1)},t.prototype.on=function(t,e){switch(t){case"data":this.messageListeners.push(e);break;case"error":this.errorListeners.push(e);break;case"close":this.closeListeners.push(e);break;default:throw new Error("Trying to register on an unsupported event: "+t)}},t.prototype.off=function(t,e){switch(t){case"data":this.remove(this.messageListeners,e);break;case"error":this.remove(this.errorListeners,e);break;case"close":this.remove(this.closeListeners,e);break;default:throw new Error("Trying to unregister on an unsupported event: "+t)}},t.prototype.close=function(){this.completed$.next()},t}(),dn=function(t){return Object(v.a)(t.rpc.getBlock()).pipe(Object(x.a)())},mn=function(){function t(t,e){var r=this;void 0===e&&(e=2e4),this.context=t,this.POLL_INTERVAL=e,this.newBlock$=Object(w.a)(0,this.POLL_INTERVAL).pipe(Object(k.a)((function(){return r.context})),Object(C.a)(dn),Object(j.a)("hash"),Object(z.a)(),Object(W.a)())}return t.prototype.subscribe=function(t){return new fn(this.newBlock$.pipe(Object(q.a)("hash")),this.context.config.shouldObservableSubscriptionRetry)},t.prototype.subscribeOperation=function(t){return new fn(this.newBlock$.pipe(function(t){return Object(K.a)((function(e){return new S.a((function(r){var n,i,o,a,s,c;try{for(var u=Xe(e.operations),p=u.next();!p.done;p=u.next()){var l=p.value;try{for(var h=(o=void 0,Xe(l)),f=h.next();!f.done;f=h.next()){var d=f.value;try{for(var m=(s=void 0,Xe(d.contents)),g=m.next();!g.done;g=m.next()){var y=g.value;hn(We({hash:d.hash},y),t)&&r.next(We({hash:d.hash},y))}}catch(v){s={error:v}}finally{try{g&&!g.done&&(c=m.return)&&c.call(m)}finally{if(s)throw s.error}}}}catch(b){o={error:b}}finally{try{f&&!f.done&&(a=h.return)&&a.call(h)}finally{if(o)throw o.error}}}}catch(E){n={error:E}}finally{try{p&&!p.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}r.complete()}))}))}(t)),this.context.config.shouldObservableSubscriptionRetry)},t}(),gn=function(t){this.results=t,this.name="ForgingMismatchError",this.message="Forging mismatch error"},yn=(function(){function t(t){if(this.forgers=t,0===t.length)throw new Error("At least one forger must be specified")}t.prototype.forge=function(t){var e=t.branch,r=t.contents;return Qe(this,void 0,void 0,(function(){var t,n,i;return Ye(this,(function(o){switch(o.label){case 0:return[4,Promise.all(this.forgers.map((function(t){return t.forge({branch:e,contents:r})})))];case 1:if(0===(t=o.sent()).length)throw new Error("At least one forger must be specified");for(n=t.pop();t.length;){if((i=t.pop())!==n)throw new gn([n,i]);n=i}return[2,n]}}))}))}}(),function(){function t(t,e){void 0===e&&(e=new un(t)),this._rpc=t,this._context=e,this._options={},this.format=xr,this.batch=this._context.batch.batch.bind(this._context.batch),"string"==typeof this._rpc?this._rpcClient=new m(this._rpc):this._rpcClient=this._rpc,this._wallet=new Wr(this._context),this.setProvider({rpc:this._rpcClient})}return t.prototype.setProvider=function(t){var e=t.rpc,r=t.stream,n=t.signer,i=t.protocol,o=t.config,a=t.forger,s=t.wallet;this.setRpcProvider(e),this.setStreamProvider(r),this.setSignerProvider(n),this.setForgerProvider(a),this.setWalletProvider(s),this._context.proto=i,this._context.config=o},t.prototype.setSignerProvider=function(t){this._options.signer||void 0!==t?void 0!==t&&(this._context.signer=t,this._options.signer=t):(this._context.signer=new ar,this._options.signer=t)},t.prototype.setRpcProvider=function(t){"string"==typeof t?this._rpcClient=new m(t):t instanceof m&&(this._rpcClient=t),this._options.rpc=this._rpcClient,this._context.rpc=this._rpcClient},t.prototype.setForgerProvider=function(t){var e=void 0===t?this.getFactory(nr)():t;this._options.forger=e,this._context.forger=e},t.prototype.setStreamProvider=function(t){"string"==typeof t?this._stream=new mn(new un(new m(t))):void 0!==t?this._stream=t:void 0===this._options.stream&&(this._stream=this.getFactory(mn)()),this._options.stream=t},t.prototype.setWalletProvider=function(t){if(this._options.wallet||void 0!==t)void 0!==t&&(this._options.wallet=t,this._context.walletProvider=t);else{var e=this.getFactory(qr)();this._options.wallet=e,this._context.walletProvider=e}},Object.defineProperty(t.prototype,"tz",{get:function(){return this._context.tz},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"contract",{get:function(){return this._context.contract},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wallet",{get:function(){return this._wallet},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"operation",{get:function(){return this._context.operationFactory},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"estimate",{get:function(){return this._context.estimate},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stream",{get:function(){return this._stream},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rpc",{get:function(){return this._context.rpc},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"signer",{get:function(){return this._context.signer},enumerable:!1,configurable:!0}),t.prototype.getFactory=function(t){var e=this;return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new(t.bind.apply(t,Ze([void 0,e._context],r)))}},t}())},181:function(t,e,r){"use strict";var n=r(2),i=r(6),o=r(0),a=r.n(o),s=r(128),c=r.n(s),u=r(119),p=r(104),l=r(122),h=r(48),f=r.n(h);function d(t){var e=t.to,r=t.href,o=t.label,s=Object(i.a)(t,["to","href","label"]),c=Object(l.a)(e);return a.a.createElement(u.a,Object(n.a)({className:"footer__link-item"},r?{target:"_blank",rel:"noopener noreferrer",href:r}:{to:c},s),o)}var m=function(t){var e=t.url,r=t.alt;return a.a.createElement("img",{className:"footer__logo",alt:r,src:e})};e.a=function(){var t=Object(p.a)().siteConfig,e=(void 0===t?{}:t).themeConfig,r=(void 0===e?{}:e).footer,n=r||{},i=n.copyright,o=n.links,s=void 0===o?[]:o,u=n.logo,h=void 0===u?{}:u,g=Object(l.a)(h.src);return r?a.a.createElement("footer",{className:c()("footer",{"footer--dark":"dark"===r.style})},a.a.createElement("div",{className:"container"},s&&s.length>0&&a.a.createElement("div",{className:"row footer__links"},s.map((function(t,e){return a.a.createElement("div",{key:e,className:"col footer__col"},null!=t.title?a.a.createElement("h4",{className:"footer__title"},t.title):null,null!=t.items&&Array.isArray(t.items)&&t.items.length>0?a.a.createElement("ul",{className:"footer__items"},t.items.map((function(t,e){return t.html?a.a.createElement("div",{key:e,dangerouslySetInnerHTML:{__html:t.html}}):a.a.createElement("li",{key:t.href||t.to,className:"footer__item"},a.a.createElement(d,t))}))):null)}))),(h||i)&&a.a.createElement("div",{className:"text--center"},h&&h.src&&a.a.createElement("div",{className:"margin-bottom--sm"},h.href?a.a.createElement("a",{href:h.href,target:"_blank",rel:"noopener noreferrer",className:f.a.footerLogoLink},a.a.createElement(m,{alt:h.alt,url:g})):a.a.createElement(m,{alt:h.alt,url:g})),i))):null}},247:function(t,e,r){"use strict";(function(t){var n;r.d(e,"a",(function(){return s})),r.d(e,"b",(function(){return o})),r.d(e,"c",(function(){return n})),function(t){t[t.CONTINUE=100]="CONTINUE",t[t.SWITCHING_PROTOCOLS=101]="SWITCHING_PROTOCOLS",t[t.PROCESSING=102]="PROCESSING",t[t.OK=200]="OK",t[t.CREATED=201]="CREATED",t[t.ACCEPTED=202]="ACCEPTED",t[t.NON_AUTHORITATIVE_INFORMATION=203]="NON_AUTHORITATIVE_INFORMATION",t[t.NO_CONTENT=204]="NO_CONTENT",t[t.RESET_CONTENT=205]="RESET_CONTENT",t[t.PARTIAL_CONTENT=206]="PARTIAL_CONTENT",t[t.MULTI_STATUS=207]="MULTI_STATUS",t[t.ALREADY_REPORTED=208]="ALREADY_REPORTED",t[t.IM_USED=226]="IM_USED",t[t.MULTIPLE_CHOICES=300]="MULTIPLE_CHOICES",t[t.MOVED_PERMANENTLY=301]="MOVED_PERMANENTLY",t[t.FOUND=302]="FOUND",t[t.SEE_OTHER=303]="SEE_OTHER",t[t.NOT_MODIFIED=304]="NOT_MODIFIED",t[t.USE_PROXY=305]="USE_PROXY",t[t.SWITCH_PROXY=306]="SWITCH_PROXY",t[t.TEMPORARY_REDIRECT=307]="TEMPORARY_REDIRECT",t[t.PERMANENT_REDIRECT=308]="PERMANENT_REDIRECT",t[t.BAD_REQUEST=400]="BAD_REQUEST",t[t.UNAUTHORIZED=401]="UNAUTHORIZED",t[t.PAYMENT_REQUIRED=402]="PAYMENT_REQUIRED",t[t.FORBIDDEN=403]="FORBIDDEN",t[t.NOT_FOUND=404]="NOT_FOUND",t[t.METHOD_NOT_ALLOWED=405]="METHOD_NOT_ALLOWED",t[t.NOT_ACCEPTABLE=406]="NOT_ACCEPTABLE",t[t.PROXY_AUTHENTICATION_REQUIRED=407]="PROXY_AUTHENTICATION_REQUIRED",t[t.REQUEST_TIMEOUT=408]="REQUEST_TIMEOUT",t[t.CONFLICT=409]="CONFLICT",t[t.GONE=410]="GONE",t[t.LENGTH_REQUIRED=411]="LENGTH_REQUIRED",t[t.PRECONDITION_FAILED=412]="PRECONDITION_FAILED",t[t.PAYLOAD_TOO_LARGE=413]="PAYLOAD_TOO_LARGE",t[t.URI_TOO_LONG=414]="URI_TOO_LONG",t[t.UNSUPPORTED_MEDIA_TYPE=415]="UNSUPPORTED_MEDIA_TYPE",t[t.RANGE_NOT_SATISFIABLE=416]="RANGE_NOT_SATISFIABLE",t[t.EXPECTATION_FAILED=417]="EXPECTATION_FAILED",t[t.I_AM_A_TEAPOT=418]="I_AM_A_TEAPOT",t[t.MISDIRECTED_REQUEST=421]="MISDIRECTED_REQUEST",t[t.UNPROCESSABLE_ENTITY=422]="UNPROCESSABLE_ENTITY",t[t.LOCKED=423]="LOCKED",t[t.FAILED_DEPENDENCY=424]="FAILED_DEPENDENCY",t[t.UPGRADE_REQUIRED=426]="UPGRADE_REQUIRED",t[t.PRECONDITION_REQUIRED=428]="PRECONDITION_REQUIRED",t[t.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS",t[t.REQUEST_HEADER_FIELDS_TOO_LARGE=431]="REQUEST_HEADER_FIELDS_TOO_LARGE",t[t.UNAVAILABLE_FOR_LEGAL_REASONS=451]="UNAVAILABLE_FOR_LEGAL_REASONS",t[t.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR",t[t.NOT_IMPLEMENTED=501]="NOT_IMPLEMENTED",t[t.BAD_GATEWAY=502]="BAD_GATEWAY",t[t.SERVICE_UNAVAILABLE=503]="SERVICE_UNAVAILABLE",t[t.GATEWAY_TIMEOUT=504]="GATEWAY_TIMEOUT",t[t.HTTP_VERSION_NOT_SUPPORTED=505]="HTTP_VERSION_NOT_SUPPORTED",t[t.VARIANT_ALSO_NEGOTIATES=506]="VARIANT_ALSO_NEGOTIATES",t[t.INSUFFICIENT_STORAGE=507]="INSUFFICIENT_STORAGE",t[t.LOOP_DETECTED=508]="LOOP_DETECTED",t[t.NOT_EXTENDED=510]="NOT_EXTENDED",t[t.NETWORK_AUTHENTICATION_REQUIRED=511]="NETWORK_AUTHENTICATION_REQUIRED"}(n||(n={}));var i=void 0!==t&&null!=t.versions&&null!=t.versions.node?r(408).XMLHttpRequest:XMLHttpRequest,o=function(t,e,r,n,i){this.message=t,this.status=e,this.statusText=r,this.body=n,this.url=i,this.name="HttpResponse"},a=function(t,e){this.url=t,this.innerEvent=e,this.name="HttpRequestFailed",this.message="Request to "+t+" failed"},s=function(){function t(){}return t.prototype.serialize=function(t){if(!t)return"";var e=[],r=function(r){if(t.hasOwnProperty(r)&&t[r]){var n="function"==typeof t[r].toJSON?t[r].toJSON():t[r];if(null===n)return e.push(encodeURIComponent(r)),"continue";if(Array.isArray(n))return n.forEach((function(t){e.push(encodeURIComponent(r)+"="+encodeURIComponent(t))})),"continue";e.push(encodeURIComponent(r)+"="+encodeURIComponent(n))}};for(var n in t)r(n);var i=e.join("&");return i?"?"+i:""},t.prototype.createXHR=function(){return new i},t.prototype.createRequest=function(t,e){var r=this,n=t.url,i=t.method,s=t.timeout,c=t.query,u=t.headers,p=void 0===u?{}:u,l=t.json,h=void 0===l||l;return new Promise((function(t,u){var l=r.createXHR();for(var f in l.open(i||"GET",""+n+r.serialize(c)),l.setRequestHeader("Content-Type","application/json"),p)l.setRequestHeader(f,p[f]);if(l.timeout=s||3e4,l.onload=function(){if(this.status>=200&&this.status<300)if(h)try{t(JSON.parse(l.response))}catch(e){u(new Error("Unable to parse response: "+l.response))}else t(l.response);else u(new o("Http error response: ("+this.status+") "+l.response,this.status,l.statusText,l.response,n))},l.ontimeout=function(){u(new Error("Request timed out after: "+l.timeout+"ms"))},l.onerror=function(t){u(new a(n,t))},e){var d=JSON.stringify(e);l.send(d)}else l.send()}))},t}()}).call(this,r(95))},289:function(t,e){},359:function(t,e){},380:function(t,e){},413:function(t,e){},415:function(t,e){},484:function(t,e){},486:function(t,e){},499:function(t,e){},501:function(t,e){},521:function(t,e){},523:function(t,e){},551:function(t,e){},553:function(t,e){},554:function(t,e){},560:function(t,e){},562:function(t,e){},580:function(t,e){},582:function(t,e){},594:function(t,e){},597:function(t,e){},604:function(t,e){},605:function(t,e){},626:function(t,e){},628:function(t,e){},655:function(t,e){},657:function(t,e){},692:function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return c})),r.d(e,"b",(function(){return l}));var n=r(151),i=r(693),o=r.n(i);function a(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{c(n.next(t))}catch(e){o(e)}}function s(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}c((n=n.apply(t,e||[])).next())}))}function s(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var c;function u(e){var r=[];e.split("/").forEach((function(t){var e=parseInt(t,10);Number.isNaN(e)||(t.length>1&&"'"===t[t.length-1]&&(e+=2147483648),r.push(e))}));var n=t.alloc(1+4*r.length);return n[0]=r.length,r.forEach((function(t,e){n.writeUInt32BE(t,1+4*e)})),n}function p(e,r){var n=t.alloc(32);n.fill(0);var i=r[e],o=e+1;return i>32&&(o+=i-32,i=32),r.copy(n,32-i,o,o+i),{buffer:n,idxValueStart:o,length:i}}!function(t){t[t.ED25519=0]="ED25519",t[t.SECP256K1=1]="SECP256K1",t[t.P256=2]="P256"}(c||(c={}));var l=function(){function e(t,e,r,n){if(void 0===e&&(e="44'/1729'/0'/0'"),void 0===r&&(r=!0),void 0===n&&(n=c.ED25519),this.transport=t,this.path=e,this.prompt=r,this.derivationType=n,this.CLA=128,this.INS_GET_PUBLIC_KEY=2,this.INS_PROMPT_PUBLIC_KEY=3,this.INS_SIGN=4,this.FIRST_MESSAGE_SEQUENCE=0,this.LAST_MESSAGE_SEQUENCE=129,this.OTHER_MESSAGE_SEQUENCE=1,this.transport.setScrambleKey("XTZ"),!e.startsWith("44'/1729'"))throw new Error("The derivation path must start with 44'/1729'");if(!Object.values(c).includes(n))throw new Error("The derivation type must be DerivationType.ED25519, DerivationType.SECP256K1 or DerivationType.P256")}return e.prototype.publicKeyHash=function(){return a(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return this._publicKeyHash?[3,2]:[4,this.publicKey()];case 1:t.sent(),t.label=2;case 2:if(this._publicKeyHash)return[2,this._publicKeyHash];throw new Error("Unable to get the public key hash.")}}))}))},e.prototype.publicKey=function(){return a(this,void 0,void 0,(function(){var t,e,r,i,a,u,p,l;return s(this,(function(s){switch(s.label){case 0:return this._publicKey?[2,this._publicKey]:[4,this.getLedgerpublicKey()];case 1:return t=s.sent(),e=t[0],r=t.slice(1,1+e),i=function(t,e){return 0===e?t=t.slice(1):(t[0]=2+(1&t[64]),t=t.slice(0,33)),t}(r,this.derivationType),a=n.n[n.a.EDPK],u=n.n[n.a.TZ1],this.derivationType===c.SECP256K1?(a=n.n[n.a.SPPK],u=n.n[n.a.TZ2]):this.derivationType===c.P256&&(a=n.n[n.a.P2PK],u=n.n[n.a.TZ3]),p=Object(n.d)(i,a),[4,o.a.ready];case 2:return s.sent(),l=Object(n.d)(o.a.crypto_generichash(20,i),u),this._publicKey=p,this._publicKeyHash=l,[2,p]}}))}))},e.prototype.getLedgerpublicKey=function(){return a(this,void 0,void 0,(function(){var t;return s(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),t=this.INS_PROMPT_PUBLIC_KEY,!1===this.prompt&&(t=this.INS_GET_PUBLIC_KEY),[4,this.transport.send(this.CLA,t,this.FIRST_MESSAGE_SEQUENCE,this.derivationType,u(this.path))];case 1:return[2,e.sent()];case 2:throw e.sent(),new Error("Unable to retrieve public key");case 3:return[2]}}))}))},e.prototype.secretKey=function(){return a(this,void 0,void 0,(function(){return s(this,(function(t){throw new Error("Secret key cannot be exposed")}))}))},e.prototype.sign=function(e,r){return a(this,void 0,void 0,(function(){var i,o,a,l,h,f,d,m,g;return s(this,(function(s){switch(s.label){case 0:return i=function(e,r){var n=e;return void 0!==r&&(n=t.from(r).toString("hex").concat(e)),n}(e,r),o=t.from(i,"hex"),(a=[]).push(u(this.path)),a=function(e,r){for(var n=0;n!==r.length;){var i=n+230>=r.length?r.length-n:230,o=t.alloc(i);r.copy(o,0,n,n+i),e.push(o),n+=i}return e}(a,o),[4,this.signWithLedger(a)];case 1:if(l=s.sent(),this.derivationType===c.ED25519)h=l.slice(0,l.length-2).toString("hex");else{if(!function(t){var e=!0;49!==t[0]&&48!==t[0]&&(e=!1),t[1]+4!==t.length&&(e=!1),2!==t[2]&&(e=!1);var r=t[3];2!==t[4+r]&&(e=!1);var n=5+r;return n+1+t[n]+2!==t.length&&(e=!1),e}(l))throw new Error("Cannot parse ledger response.");3,f=p(3,l),d=f.idxValueStart+f.length+1,m=p(d,l),g=t.concat([f.buffer,m.buffer]),h=g.toString("hex")}return[2,{bytes:e,sig:Object(n.d)(h,n.n[n.a.SIG]),prefixSig:Object(n.d)(h,n.n[n.a.SIG]),sbytes:e+h}]}}))}))},e.prototype.signWithLedger=function(t){return a(this,void 0,void 0,(function(){var e,r,n;return s(this,(function(i){switch(i.label){case 0:return[4,this.transport.send(this.CLA,this.INS_SIGN,this.FIRST_MESSAGE_SEQUENCE,this.derivationType,t[0])];case 1:e=i.sent(),r=1,i.label=2;case 2:return r<t.length?(n=r===t.length-1?this.LAST_MESSAGE_SEQUENCE:this.OTHER_MESSAGE_SEQUENCE,[4,this.transport.send(this.CLA,this.INS_SIGN,n,this.derivationType,t[r])]):[3,5];case 3:e=i.sent(),i.label=4;case 4:return r++,[3,2];case 5:return[2,e]}}))}))},e}()}).call(this,r(92).Buffer)},742:function(t,e,r){"use strict";var n=r(2),i=r(6),o=r(104),a=r(179),s=r(518),c=r.n(s),u=r(151),p=r(600),l=r.n(p),h=r(602),f=r.n(h),d=r(340),m=r.n(d),g=r(638);function y(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{c(n.next(t))}catch(e){o(e)}}function s(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}c((n=n.apply(t,e||[])).next())}))}function v(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var b=function(){function t(t,e,r){this.key=t;var n=t.substr(0,e?5:4);if(!Object(u.l)(n))throw new Error("key contains invalid prefix");if(this._key=r(Object(u.c)(this.key,u.n[n])),this._publicKey=this._key.slice(32),!this._key)throw new Error("Unable to decode key");this.isInit=this.init()}return t.prototype.init=function(){return y(this,void 0,void 0,(function(){var t,e,r;return v(this,(function(n){switch(n.label){case 0:return[4,c.a.ready];case 1:return n.sent(),64!==this._key.length&&(t=c.a.crypto_sign_seed_keypair(new Uint8Array(this._key),"uint8array"),e=t.publicKey,r=t.privateKey,this._publicKey=e,this._key=r),[2,!0]}}))}))},t.prototype.sign=function(t,e){return y(this,void 0,void 0,(function(){var r,n,i;return v(this,(function(o){switch(o.label){case 0:return[4,this.isInit];case 1:return o.sent(),r=c.a.crypto_sign_detached(new Uint8Array(e),new Uint8Array(this._key)),n=l()(r),i=t+Object(u.f)(n),[2,{bytes:t,sig:Object(u.d)(r,u.n.sig),prefixSig:Object(u.d)(r,u.n.edsig),sbytes:i}]}}))}))},t.prototype.publicKey=function(){return y(this,void 0,void 0,(function(){return v(this,(function(t){switch(t.label){case 0:return[4,this.isInit];case 1:return t.sent(),[2,Object(u.d)(this._publicKey,u.n.edpk)]}}))}))},t.prototype.publicKeyHash=function(){return y(this,void 0,void 0,(function(){return v(this,(function(t){switch(t.label){case 0:return[4,this.isInit];case 1:return t.sent(),[4,c.a.ready];case 2:return t.sent(),[2,Object(u.d)(c.a.crypto_generichash(20,new Uint8Array(this._publicKey)),u.n.tz1)]}}))}))},t.prototype.secretKey=function(){return y(this,void 0,void 0,(function(){var t,e;return v(this,(function(r){switch(r.label){case 0:return[4,this.isInit];case 1:return r.sent(),[4,c.a.ready];case 2:return r.sent(),t=this._key,e=c.a.crypto_sign_seed_keypair(new Uint8Array(t).slice(0,32),"uint8array").privateKey,t=l()(e),[2,Object(u.d)(t,u.n.edsk)]}}))}))},t}(),E={p256:{pk:u.n.p2pk,sk:u.n.p2sk,pkh:u.n.tz3,sig:u.n.p2sig},secp256k1:{pk:u.n.sppk,sk:u.n.spsk,pkh:u.n.tz2,sig:u.n.spsig}},w=function(){function t(t,e,r,n){this.curve=t,this.key=e;var i=e.substr(0,r?5:4);if(!Object(u.l)(i))throw new Error("key contains invalid prefix");this._key=n(Object(u.c)(this.key,u.n[i]));var o=new f.a.ec(this.curve).keyFromPrivate(this._key),a=o.getPublic().getY().toArray()[31]%2?3:2,s=new Array(32).fill(0);this._publicKey=l()(new Uint8Array([a].concat(s.concat(o.getPublic().getX().toArray()).slice(-32))))}return t.prototype.sign=function(t,e){return y(this,void 0,void 0,(function(){var r,n,i,o;return v(this,(function(a){return r=new f.a.ec(this.curve).keyFromPrivate(this._key),n=r.sign(e,{canonical:!0}),i=n.r.toString("hex",64)+n.s.toString("hex",64),o=t+i,[2,{bytes:t,sig:Object(u.d)(i,u.n.sig),prefixSig:Object(u.d)(i,E[this.curve].sig),sbytes:o}]}))}))},t.prototype.publicKey=function(){return y(this,void 0,void 0,(function(){return v(this,(function(t){return[2,Object(u.d)(this._publicKey,E[this.curve].pk)]}))}))},t.prototype.publicKeyHash=function(){return y(this,void 0,void 0,(function(){return v(this,(function(t){switch(t.label){case 0:return[4,c.a.ready];case 1:return t.sent(),[2,Object(u.d)(c.a.crypto_generichash(20,new Uint8Array(this._publicKey)),E[this.curve].pkh)]}}))}))},t.prototype.secretKey=function(){return y(this,void 0,void 0,(function(){var t;return v(this,(function(e){return t=this._key,[2,Object(u.d)(t,E[this.curve].sk)]}))}))},t}(),O=w.bind(null,"p256"),A=w.bind(null,"secp256k1");function T(t,e,r,n,i){return y(this,void 0,void 0,(function(){var o,a,s,c;return v(this,(function(u){switch(u.label){case 0:return e&&r&&n&&i?(c=_.fromFundraiser(e,r,n),t.setProvider({signer:c}),[4,c.publicKeyHash()]):[3,8];case 1:o=u.sent(),a=void 0,u.label=2;case 2:return u.trys.push([2,4,,5]),[4,t.tz.activate(o,i)];case 3:return a=u.sent(),[3,5];case 4:if(s=u.sent(),!(s&&s.body&&/Invalid activation/.test(s.body)))throw s;return[3,5];case 5:return a?[4,a.confirmation()]:[3,7];case 6:u.sent(),u.label=7;case 7:return[3,10];case 8:return[4,_.fromSecretKey(e,r)];case 9:c=u.sent(),t.setProvider({signer:c}),u.label=10;case 10:return[2]}}))}))}var _=function(){function t(t,e){var r="e"===t.substring(2,3),n=function(t){return t};if(r){if(!e)throw new Error("Encrypted key provided without a passphrase.");n=function(t){var r=l()(t.slice(0,8)),n=t.slice(8),i=m.a.pbkdf2Sync(e,r,32768,32,"sha512");return c.a.crypto_secretbox_open_easy(new Uint8Array(n),new Uint8Array(24),new Uint8Array(i))}}switch(t.substr(0,4)){case"edes":case"edsk":this._key=new b(t,r,n);break;case"spsk":case"spes":this._key=new A(t,r,n);break;case"p2sk":case"p2es":this._key=new O(t,r,n);break;default:throw new Error("Unsupported key type")}}return t.fromFundraiser=function(e,r,n){var i=Object(g.mnemonicToSeedSync)(n,""+e+r);return new t(Object(u.d)(i.slice(0,32),u.n.edsk2))},t.fromSecretKey=function(e,r){return y(this,void 0,void 0,(function(){return v(this,(function(n){switch(n.label){case 0:return[4,c.a.ready];case 1:return n.sent(),[2,new t(e,r)]}}))}))},t.prototype.sign=function(t,e){return y(this,void 0,void 0,(function(){var r,n;return v(this,(function(i){switch(i.label){case 0:return r=Object(u.k)(t),void 0!==e&&(r=Object(u.m)(e,r)),[4,c.a.ready];case 1:return i.sent(),n=l()(c.a.crypto_generichash(32,r)),[2,this._key.sign(t,n)]}}))}))},t.prototype.publicKey=function(){return y(this,void 0,void 0,(function(){return v(this,(function(t){return[2,this._key.publicKey()]}))}))},t.prototype.publicKeyHash=function(){return y(this,void 0,void 0,(function(){return v(this,(function(t){return[2,this._key.publicKeyHash()]}))}))},t.prototype.secretKey=function(){return y(this,void 0,void 0,(function(){return v(this,(function(t){return[2,this._key.secretKey()]}))}))},t}(),P=r(740),S=function(){return(S=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function I(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{c(n.next(t))}catch(e){o(e)}}function s(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}c((n=n.apply(t,e||[])).next())}))}function R(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var k=function(){this.name="BeaconWalletNotInitialized",this.message="You need to initialize BeaconWallet by calling beaconWallet.requestPermissions first"},N=function(t){this.requiredScopes=t,this.name="MissingRequiredScopes",this.message="Required permissions scopes were not granted: "+t.join(",")},x=function(){function t(t){this.client=new P.f(t)}return t.prototype.getPermissionOrFail=function(){if(!this.permissions)throw new k;return this.permissions},t.prototype.validateRequiredScopesOrFail=function(t,e){var r,n,i=new Set(e);try{for(var o=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t.scopes),a=o.next();!a.done;a=o.next()){var s=a.value;i.has(s)&&i.delete(s)}}catch(c){r={error:c}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}if(i.size>0)throw new N(Array.from(i))},t.prototype.requestPermissions=function(t){return I(this,void 0,void 0,(function(){var e,r;return R(this,(function(n){switch(n.label){case 0:return[4,this.client.getActiveAccount()];case 1:return(e=n.sent())?(this.permissions=e,[2]):[4,this.client.requestPermissions(t)];case 2:return r=n.sent(),this.permissions=r,[2]}}))}))},t.prototype.removeFeeAndLimit=function(t){t.fee,t.gas_limit,t.storage_limit;return function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r}(t,["fee","gas_limit","storage_limit"])},t.prototype.getPKH=function(){var t=this.getPermissionOrFail().address;return Promise.resolve(t)},t.prototype.mapTransferParamsToWalletParams=function(t){return Object(a.e)(t)},t.prototype.mapOriginateParamsToWalletParams=function(t){return Object(a.c)(t)},t.prototype.mapDelegateParamsToWalletParams=function(t){return Object(a.d)(t)},t.prototype.sendOperations=function(t){return I(this,void 0,void 0,(function(){var e,r,n=this;return R(this,(function(i){switch(i.label){case 0:return e=this.getPermissionOrFail(),this.validateRequiredScopesOrFail(e,[P.r.OPERATION_REQUEST]),r=e.network,[4,this.client.requestOperation({network:r,operationDetails:t.map((function(t){return S({},n.removeFeeAndLimit(t))}))})];case 1:return[2,i.sent().transactionHash]}}))}))},t}(),D=r(692),L=function(){return(L=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function C(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{c(n.next(t))}catch(e){o(e)}}function s(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}c((n=n.apply(t,e||[])).next())}))}function j(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var U=function(){this.name="TezBridgeNotDetectedError",this.message="tezbridge plugin could not be detected in your browser"},M=function(){function t(){if("undefined"==typeof tezbridge)throw new U}return t.prototype.getPKH=function(){return C(this,void 0,void 0,(function(){return j(this,(function(t){return[2,tezbridge.request({method:"get_source"})]}))}))},t.prototype.setHost=function(t){return C(this,void 0,void 0,(function(){return j(this,(function(e){switch(e.label){case 0:return[4,tezbridge.request({method:"set_host",host:t})];case 1:return e.sent(),[2]}}))}))},t.prototype.mapTransferParamsToWalletParams=function(t){return Object(a.e)(t)},t.prototype.mapOriginateParamsToWalletParams=function(t){return Object(a.c)(t)},t.prototype.mapDelegateParamsToWalletParams=function(t){return Object(a.d)(t)},t.prototype.sendOperations=function(t){return C(this,void 0,void 0,(function(){var e=this;return j(this,(function(r){switch(r.label){case 0:return[4,tezbridge.request({method:"inject_operations",operations:t.map((function(t){return L({},e.removeFeeAndLimit(t))}))})];case 1:return[2,r.sent().operation_id]}}))}))},t.prototype.removeFeeAndLimit=function(t){t.fee,t.gas_limit,t.storage_limit;return function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r}(t,["fee","gas_limit","storage_limit"])},t}(),K=r(743),F=r(695),G=r(3),B=r(128),H=r.n(B),V=r(381),z=r.n(V),W=r(0),q=r.n(W),Q=r(701),Y=r(58),X=r.n(Y),$=function(t){function e(){var e;return(e=t.call(this)||this).onChange=function(t){e.code=t},e}Object(G.a)(e,t);var r=e.prototype;return r.UNSAFE_componentWillMount=function(){this.code=this.props.code},r.componentDidUpdate=function(){},r.run=function(){var t=this.props,e=t.scope,r=t.transformCode,n=t.noInline,i='\nlet _printlnBuffer = "";\n\nfunction println(value) {\n  _printlnBuffer += value + "\\n";\n\n  render(_printlnBuffer);\n}\n\nTezos.setProvider({ rpc: \'https://api.tez.ie/rpc/carthagenet\' });\n\n'+(this.props.wallet?'const option = {name:"exampleWallet"};\n  const wallet = new BeaconWallet(option);\n  const network = {type:"carthagenet"};\n  wallet.requestPermissions({network})\n  .then(permission => {\n    return Tezos.setWalletProvider(wallet);\n  })\n  .then(() => {\n    '+this.code+"\n  });":"fetch('https://api.tez.ie/keys/carthagenet/', {\n    method: 'POST',\n    headers: { Authorization: 'Bearer taquito-example' },\n  })\n  .then(response => response.text())\n  .then(privateKey => {\n    return importKey(Tezos, privateKey);\n   })\n  .then(() => {\n    "+this.code+"\n   });")+'\n\n//contract used in example "estimate a contract origination"\nconst genericMultisigJSONfile = \n[ { "prim": "parameter","args":[ { "prim": "or","args":[ { "prim": "unit", "annots": [ "%default" ] },{ "prim": "pair","args":[ { "prim": "pair","args":[ { "prim": "nat","annots": [ "%counter" ] },{ "prim": "or","args":[ { "prim": "lambda","args":[ { "prim": "unit" },{ "prim": "list","args":[ { "prim":"operation" } ] } ],"annots":[ "%operation" ] },{ "prim": "pair", "args":[ { "prim": "nat","annots":[ "%threshold" ] },{ "prim": "list",\n"args":[ { "prim": "key" } ],"annots":[ "%keys" ] } ],"annots":[ "%change_keys" ] } ],"annots": [ ":action" ] } ],"annots": [ ":payload" ] },{ "prim": "list","args":[ { "prim": "option","args":[ { "prim": "signature" } ] } ],"annots": [ "%sigs" ] } ],"annots": [ "%main" ] } ] } ] },\n{ "prim": "storage","args":[ { "prim": "pair","args":[ { "prim": "nat","annots": [ "%stored_counter" ] },{ "prim": "pair","args":[ { "prim": "nat", "annots": [ "%threshold" ] },{ "prim": "list","args": [ { "prim": "key" } ],"annots": [ "%keys" ] } ] } ] } ] },\n{ "prim": "code","args":[ [ [ [ { "prim": "DUP" }, { "prim": "CAR" },{ "prim": "DIP","args": [ [ { "prim": "CDR" } ] ] } ] ],{ "prim": "IF_LEFT","args":[ [ { "prim": "DROP" },{ "prim": "NIL","args": [ { "prim": "operation" } ] },{ "prim": "PAIR" } ],[ { "prim": "PUSH","args":[ { "prim": "mutez" },{ "int": "0" } ] },{ "prim": "AMOUNT" },[ [ { "prim": "COMPARE" },{ "prim": "EQ" } ], { "prim": "IF","args":[ [],[ [ { "prim": "UNIT" },{ "prim": "FAILWITH" } ] ] ] } ],{ "prim": "SWAP" }, \n{ "prim": "DUP" },{ "prim": "DIP","args": [ [ { "prim": "SWAP" } ] ] },{ "prim": "DIP","args":[ [ [ [ { "prim": "DUP" },{ "prim": "CAR" },{ "prim": "DIP","args":[ [ { "prim": "CDR" } ] ] } ] ],{ "prim": "DUP" },{ "prim": "SELF" },{ "prim": "ADDRESS" },{ "prim": "PAIR" },{ "prim": "PACK" },{ "prim": "DIP","args":[ [ [ [ { "prim": "DUP" },{ "prim": "CAR","annots":[ "@counter" ] },{ "prim": "DIP","args":[ [ { "prim":"CDR" } ] ] } ] ],{ "prim": "DIP","args":[ [ { "prim": "SWAP" } ] ] } ] ] },{ "prim": "SWAP" } ] ] },\n[ [ { "prim": "DUP" },{ "prim": "CAR","annots": [ "@stored_counter" ] },{ "prim": "DIP","args": [ [ { "prim": "CDR" } ] ] } ] ],{ "prim": "DIP","args": [ [ { "prim": "SWAP" } ] ] },[ [ { "prim": "COMPARE" },{ "prim": "EQ" } ],{ "prim": "IF","args":[ [],[ [ { "prim": "UNIT" },{ "prim": "FAILWITH" } ] ] ] } ],{ "prim": "DIP","args": [ [ { "prim": "SWAP" } ] ] },[ [ { "prim": "DUP" },{ "prim": "CAR","annots": [ "@threshold" ] },{ "prim": "DIP","args":[ [ { "prim": "CDR","annots": [ "@keys" ] } ] ] } ] ],\n{ "prim": "DIP","args":[ [ { "prim": "PUSH","args":[ { "prim": "nat" },{ "int": "0" } ],"annots": [ "@valid" ] },{ "prim": "SWAP" },{ "prim": "ITER","args":[ [ { "prim": "DIP","args":[ [ { "prim": "SWAP" } ] ] },{ "prim": "SWAP" },{ "prim": "IF_CONS","args":[ [ [ { "prim":"IF_NONE","args":[ [ { "prim":"SWAP" },{ "prim":"DROP" } ],[ { "prim":"SWAP" },{ "prim":"DIP","args":[ [ { "prim":"SWAP" },{ "prim":"DIP","args":[ { "int":"2" },[ [ { "prim":"DIP","args":[ [ { "prim":"DUP" } ] ] },{ "prim":"SWAP" } ] ] ] },\n[ [ { "prim":"DIP","args":[ { "int":"2" },[ { "prim":"DUP" } ] ] },{ "prim":"DIG","args":[ { "int":"3" } ] } ],{ "prim":"DIP","args":[ [ { "prim":"CHECK_SIGNATURE" } ] ] },{ "prim":"SWAP" },{ "prim":"IF","args":[ [ { "prim":"DROP" } ],[ { "prim":"FAILWITH" } ] ] } ],{ "prim":"PUSH","args":[ { "prim":"nat" },{ "int":"1" } ] },{ "prim":"ADD","annots":[ "@valid" ] } ] ] } ] ] } ] ],[ [ { "prim":"UNIT" },{ "prim":"FAILWITH" } ] ] ] },{ "prim": "SWAP" } ] ] } ] ] },[ [ { "prim": "COMPARE" },{ "prim": "LE" } ],{ "prim": "IF","args":[ [],\n[ [ { "prim": "UNIT" },{ "prim": "FAILWITH" } ] ] ] } ],{ "prim": "IF_CONS","args":[ [ [ { "prim": "UNIT" },{ "prim": "FAILWITH" } ] ],[] ] }, { "prim": "DROP" },{ "prim": "DIP","args":[ [ [ [ { "prim": "DUP" },{ "prim": "CAR" },{ "prim": "DIP","args":[ [ { "prim": "CDR" } ] ] } ] ],{ "prim": "PUSH","args":[ { "prim": "nat" },{ "int": "1" } ] },{ "prim": "ADD","annots": [ "@new_counter" ] },{ "prim": "PAIR" } ] ] },{ "prim": "IF_LEFT","args":[ [ { "prim": "UNIT" },{ "prim": "EXEC" } ],[ { "prim": "DIP","args":[ [ { "prim": "CAR" } ] ] },\n{ "prim": "SWAP" },{ "prim": "PAIR" },{ "prim": "NIL","args":[ { "prim": "operation" } ] } ] ] },{ "prim": "PAIR" } ] ] } ] ] } ]\n\n//contract for the example "Contract origination with map in storage having initial values"\nconst contractMapTacoShop = \n[ { "prim": "parameter", "args": [ { "prim": "nat" } ] },\n{ "prim": "storage","args":[ { "prim": "map","args":[ { "prim": "nat" },{ "prim": "pair","args":[ { "prim": "nat", "annots": [ "%current_stock" ] },{ "prim": "mutez", "annots": [ "%max_price" ] } ] } ] } ] },\n{ "prim": "code","args":[ [ { "prim": "DUP" }, { "prim": "CAR" },{ "prim": "DIG", "args": [ { "int": "1" } ] }, { "prim": "DUP" },{ "prim": "DUG", "args": [ { "int": "2" } ] }, { "prim": "CDR" },{ "prim": "DUP" }, { "prim": "DIG", "args": [ { "int": "2" } ] },{ "prim": "DUP" }, { "prim": "DUG", "args": [ { "int": "3" } ] },{ "prim": "GET" },{ "prim": "IF_NONE","args":[ [ { "prim": "PUSH","args":[ { "prim": "string" },{ "string": "Unknown kind of taco." } ] },{ "prim": "FAILWITH" } ],[ { "prim": "DUP" },{ "prim": "DIP", "args": [ [ { "prim": "DROP" } ] ] } ] ] },\n{ "prim": "DUP" }, { "prim": "CAR" },{ "prim": "DIG", "args": [ { "int": "1" } ] }, { "prim": "DUP" },{ "prim": "DUG", "args": [ { "int": "2" } ] }, { "prim": "CDR" },{ "prim": "EDIV" },{ "prim": "IF_NONE","args":[ [ { "prim": "PUSH","args":[ { "prim": "string" }, { "string": "DIV by 0" } ] },{ "prim": "FAILWITH" } ], [] ] }, { "prim": "CAR" },{ "prim": "DUP" }, { "prim": "AMOUNT" }, { "prim": "COMPARE" },{ "prim": "NEQ" },{ "prim": "IF","args":[ [ { "prim": "PUSH","args":[ { "prim": "string" },{ "string":"Sorry, the taco you are trying to purchase has a different price" } ] },\n{ "prim": "FAILWITH" } ],[ { "prim": "PUSH","args": [ { "prim": "unit" }, { "prim": "Unit" } ] } ] ] },{ "prim": "DIG", "args": [ { "int": "2" } ] }, { "prim": "DUP" },{ "prim": "DUG", "args": [ { "int": "3" } ] },{ "prim": "PUSH", "args": [ { "prim": "nat" }, { "int": "1" } ] },{ "prim": "DIG", "args": [ { "int": "4" } ] }, { "prim": "DUP" },{ "prim": "DUG", "args": [ { "int": "5" } ] }, { "prim": "CAR" },{ "prim": "SUB" }, { "prim": "ABS" }, { "prim": "SWAP" },{ "prim": "CDR" }, { "prim": "SWAP" }, { "prim": "PAIR" },{ "prim": "DIG", "args": [ { "int": "4" } ] }, { "prim": "DUP" },\n{ "prim": "DUG", "args": [ { "int": "5" } ] },{ "prim": "DIG", "args": [ { "int": "1" } ] }, { "prim": "DUP" },{ "prim": "DUG", "args": [ { "int": "2" } ] },{ "prim": "DIG", "args": [ { "int": "7" } ] }, { "prim": "DUP" },{ "prim": "DUG", "args": [ { "int": "8" } ] }, { "prim": "SWAP" },{ "prim": "SOME" }, { "prim": "SWAP" }, { "prim": "UPDATE" },{ "prim": "NIL", "args": [ { "prim": "operation" } ] },{ "prim": "PAIR" },{ "prim": "DIP","args": [ [ { "prim": "DROP", "args": [ { "int": "7" } ] } ] ] } ] ] } ]\n\n\n//contract for the example of map wih pair key\nconst contractMapPairKey = \n[ { "prim": "parameter", "args": [ { "prim": "unit" } ] },\n{ "prim": "storage","args":[ { "prim": "pair","args":[ { "prim": "pair","args":[ { "prim": "address", "annots": [ "%theAddress" ] },\n{ "prim": "map","args":[ { "prim": "pair","args":[ { "prim": "nat" }, { "prim": "address" } ] },{ "prim": "pair","args":[ { "prim": "mutez", "annots": [ "%amount" ] },{ "prim": "int", "annots": [ "%quantity" ] } ] } ],"annots": [ "%theMap" ] } ] },{ "prim": "int", "annots": [ "%theNumber" ] } ] } ] },\n{ "prim": "code","args":[ [ { "prim": "DUP" }, { "prim": "CDR" },{ "prim": "NIL", "args": [ { "prim": "operation" } ] },{ "prim": "PAIR" },{ "prim": "DIP", "args": [ [ { "prim": "DROP" } ] ] } ] ] } ]\n\n//contract for the example of map in storage with 8 nested pairs\nconst contractMap8pairs = \n[{ "prim": "parameter", "args": [{ "prim": "unit" }] },{"prim": "storage","args":[{prim: \'map\',args: [{prim: "pair", args: [{ prim: "int" },{prim: "pair", args: [{ prim: "nat" },{prim: "pair", args: [{ prim: "string" },{prim: "pair", args: [{ prim: "bytes" },{prim: "pair", args: [{ prim: "mutez" },{prim: "pair", args: [{ prim: "bool" },{prim: "pair", args: [{ prim: "key_hash" },{prim: "pair", args: [{ prim: "timestamp" },{ prim: "address" }]}]}]}]}]}]}]}]}, { prim: "int" }]},]},{"prim": "code","args":[[{ "prim": "DUP" }, { "prim": "CDR" },{ "prim": "NIL", "args": [{ "prim": "operation" }] },\n{ "prim": "PAIR" },{ "prim": "DIP", "args": [[{ "prim": "DROP" }]] }]]}]\n\n//contract for map and bigmap combined example\nconst contractMapBigMap = \n[ { "prim": "parameter", "args": [ { "prim": "unit" } ] },{ "prim": "storage","args":[ { "prim": "pair","args":[ { "prim": "big_map","args":[ { "prim": "pair","args": [ { "prim": "nat" }, { "prim": "address" } ] },{ "prim": "int" } ], "annots": [ "%thebigmap" ] },{ "prim": "map","args":[ { "prim": "pair","args": [ { "prim": "nat" }, { "prim": "address" } ] },{ "prim": "int" } ], "annots": [ "%themap" ] } ] } ] },{ "prim": "code","args":[ [ { "prim": "DUP" }, { "prim": "CDR" },{ "prim": "NIL", "args": [ { "prim": "operation" } ] },{ "prim": "PAIR" },{ "prim": "DIP", "args": [ [ { "prim": "DROP" } ] ] } ] ] } ]\n\n//signer for example with complex storage/parameters\nconst emailExample = "zsjpcmui.oysiavbv@tezos.example.org"\nconst passwordExample = "4rW0D22yXt"\nconst mnemonicExample = "arrange ceiling whisper churn congress double step carpet empty rice prevent swallow silk casual champion"\nconst secretExample = "af552679c4943509bd77643b8ef3f8dcf42e61b3"\n\n//contracts for examples of storage with and without annotations\nconst contractStorageAnnot = \n[ { "prim": "parameter", "args": [ { "prim": "unit" } ] },{ "prim": "storage","args":[ { "prim": "pair","args":[ { "prim": "pair","args":[ { "prim": "pair","args":[ { "prim": "address", "annots": [ "%theAddress" ] },{ "prim": "bool", "annots": [ "%theBool" ] } ] },{ "prim": "pair","args":[ { "prim": "nat", "annots": [ "%theNat" ] },{ "prim": "int", "annots": [ "%theNumber" ] } ] } ] },{ "prim": "mutez", "annots": [ "%theTez" ] } ] } ] },{ "prim": "code","args":[ [ { "prim": "DUP" }, { "prim": "CDR" },{ "prim": "NIL", "args": [ { "prim": "operation" } ] },{ "prim": "PAIR" },{ "prim": "DIP", "args": [ [ { "prim": "DROP" } ] ] } ] ] } ]\n\nconst contractStorageWithAndWithoutAnnot =\n[ { "prim": "parameter", "args": [ { "prim": "unit" } ] },{ "prim": "storage","args":[ { "prim": "pair","args":[ { "prim": "pair","args":[ { "prim": "pair","args":[ { "prim": "address"},{ "prim": "bool"} ] },{ "prim": "pair","args":[ { "prim": "nat", "annots": [ "%theNat" ] },{ "prim": "int", "annots": [ "%theNumber" ] } ] } ] },{ "prim": "mutez" } ] } ] },{ "prim": "code","args":[ [ { "prim": "DUP" }, { "prim": "CDR" },{ "prim": "NIL", "args": [ { "prim": "operation" } ] },{ "prim": "PAIR" },{ "prim": "DIP", "args": [ [ { "prim": "DROP" } ] ] } ] ] } ]\n\nconst contractStorageWithoutAnnot =\n[ { "prim": "parameter", "args": [ { "prim": "unit" } ] },{ "prim": "storage","args":[ { "prim": "pair","args":[ { "prim": "pair","args":[ { "prim": "pair","args":[ { "prim": "address"},{ "prim": "bool"} ] },{ "prim": "pair","args":[ { "prim": "nat" },{ "prim": "int" } ] } ] },{ "prim": "mutez" } ] } ] },{ "prim": "code","args":[ [ { "prim": "DUP" }, { "prim": "CDR" },{ "prim": "NIL", "args": [ { "prim": "operation" } ] },{ "prim": "PAIR" },{ "prim": "DIP", "args": [ [ { "prim": "DROP" } ] ] } ] ] } ]\n\nconst managerCode = [{"prim": "parameter","args":[{"prim": "or","args":[{"prim": "lambda","args":[{ "prim": "unit" },{"prim": "list","args": [{ "prim": "operation" }]}],"annots": ["%do"]},{ "prim": "unit", "annots": ["%default"] }]}]},{ "prim": "storage", "args": [{ "prim": "key_hash" }] },{"prim": "code","args":[[[[{ "prim": "DUP" }, { "prim": "CAR" },{"prim": "DIP","args": [[{ "prim": "CDR" }]]}]],{"prim": "IF_LEFT","args":[[{"prim": "PUSH","args":[{ "prim": "mutez" },{ "int": "0" }]},{ "prim": "AMOUNT" },[[{ "prim": "COMPARE" },{ "prim": "EQ" }],{"prim": "IF","args":[[],[[{ "prim": "UNIT" },{ "prim": "FAILWITH" }]]]}],\n[{"prim": "DIP","args": [[{ "prim": "DUP" }]]},{ "prim": "SWAP" }],{ "prim": "IMPLICIT_ACCOUNT" },{ "prim": "ADDRESS" },{ "prim": "SENDER" },[[{ "prim": "COMPARE" },{ "prim": "EQ" }],{"prim": "IF","args":[[],[[{ "prim": "UNIT" },{ "prim": "FAILWITH" }]]]}],{ "prim": "UNIT" }, { "prim": "EXEC" },{ "prim": "PAIR" }],[{ "prim": "DROP" },{"prim": "NIL","args": [{ "prim": "operation" }]},{ "prim": "PAIR" }]]}]]}]\n\n';this.transpile({code:i,scope:e,transformCode:r,noInline:n})},e}(Q.d);var Z=function(t){var e=t.children,r=t.theme,o=t.transformCode,a=Object(i.a)(t,["children","theme","transformCode"]),s=Object(W.useState)(!1),c=s[0],u=s[1],p=Object(W.useRef)(null),l=Object(W.useRef)(null);return Object(W.useEffect)((function(){var t;return l.current&&(t=new z.a(l.current,{text:function(){return p.current.code}})),function(){t&&t.destroy()}}),[l.current,p.current]),q.a.createElement($,Object(n.a)({ref:p,code:e,transformCode:o||function(t){return t+";"},theme:r},a),q.a.createElement("div",{className:X.a.playgroundEditorWrapper},q.a.createElement("div",{className:H()(X.a.playgroundHeader,X.a.playgroundEditorHeader)},"Live Editor"),q.a.createElement(Q.a,null),q.a.createElement("button",{ref:l,type:"button","aria-label":"Copy code to clipboard",className:H()(X.a.button,X.a.copyButton),onClick:function(){window.getSelection().empty(),u(!0),setTimeout((function(){return u(!1)}),2e3)}},c?"Copied":"Copy")),q.a.createElement("div",{className:H()(X.a.playgroundHeader,X.a.playgroundPreviewHeader)},"Result",q.a.createElement("button",{type:"button","aria-label":"Execute example",className:H()(X.a.button,X.a.runButton),onClick:function(){p.current&&p.current.run()}},"Run code")),q.a.createElement("div",{className:X.a.playgroundPreview},q.a.createElement(Q.c,null),q.a.createElement(Q.b,null)))},J=r(735),tt=r.n(J),et=r(392),rt=r(736),nt=r(59),it=r.n(nt),ot=/{([\d,-]+)}/;e.a=function(t){var e=t.children,r=t.className,s=t.live,c=t.metastring,p=Object(i.a)(t,["children","className","live","metastring"]),l=Object(o.a)().siteConfig.themeConfig.prism,h=void 0===l?{}:l,f=Object(W.useState)(!1),d=f[0],m=f[1],g=Object(W.useRef)(null),y=Object(W.useRef)(null),v=[];if(c&&ot.test(c)){var b=c.match(ot)[1];v=tt.a.parse(b).filter((function(t){return t>0}))}if(Object(W.useEffect)((function(){var t;return y.current&&(t=new z.a(y.current,{target:function(){return g.current}})),function(){t&&t.destroy()}}),[y.current,g.current]),s){var E=new a.b("https://api.tez.ie/rpc/carthagenet");return q.a.createElement(Z,Object(n.a)({scope:Object.assign({},q.a,{Tezos:E,importKey:T,validateAddress:u.o,validateChain:u.p,validateKeyHash:u.r,validateContractAddress:u.q,validatePublicKey:u.s,validateSignature:u.t,b58cencode:u.d,prefix:u.n,Prefix:u.a,MichelsonMap:a.a,BeaconWallet:x,InMemorySigner:_,LedgerSigner:D.b,TezBridgeWallet:M,ThanosWallet:K.a,DerivationType:D.a,TransportU2F:F.a}),code:e.trim(),theme:h.theme||rt.a,transformCode:function(t){return t.replace(/import .*/g,"")}},p))}var w=r&&r.replace(/language-/,"");!w&&h.defaultLanguage&&(w=h.defaultLanguage);var O=function(){window.getSelection().empty(),m(!0),setTimeout((function(){return m(!1)}),2e3)};return q.a.createElement(et.a,Object(n.a)({},et.b,{theme:h.theme||rt.a,code:e.trim(),language:w}),(function(t){var e=t.className,r=t.style,i=t.tokens,o=t.getLineProps,a=t.getTokenProps;return q.a.createElement("div",{className:it.a.codeBlockWrapper},q.a.createElement("pre",{ref:g,className:H()(e,it.a.codeBlock),style:r},i.map((function(t,e){var r=o({line:t,key:e});return v.includes(e+1)&&(r.className=r.className+" docusaurus-highlight-code-line"),q.a.createElement("div",Object(n.a)({key:e},r),t.map((function(t,e){return q.a.createElement("span",Object(n.a)({key:e},a({token:t,key:e})))})))}))),q.a.createElement("button",{ref:y,type:"button","aria-label":"Copy code to clipboard",className:it.a.copyButton,onClick:O},d?"Copied":"Copy"))}))}}}]);