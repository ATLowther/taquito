(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{90:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return i})),a.d(t,"metadata",(function(){return l})),a.d(t,"rightToc",(function(){return s})),a.d(t,"default",(function(){return p}));var n=a(2),o=a(6),r=(a(0),a(96)),i={title:"Wallet API",id:"wallet_API",author:"Claude Barde"},l={unversionedId:"wallet_API",id:"wallet_API",isDocsHomePage:!1,title:"Wallet API",description:"What is the Wallet API?",source:"@site/../docs/wallet_API.md",slug:"/wallet_API",permalink:"/docs/wallet_API",version:"current",sidebar:"docs",previous:{title:"Taquito boilerplate",permalink:"/docs/boilerplate"},next:{title:"Making Transfers",permalink:"/docs/making_transfers"}},s=[{value:"What is the Wallet API?",id:"what-is-the-wallet-api",children:[]},{value:"Installing the Wallet API",id:"installing-the-wallet-api",children:[]},{value:"Connecting the wallet",id:"connecting-the-wallet",children:[{value:"- TezBridge wallet",id:"--tezbridge-wallet",children:[]},{value:"- Thanos wallet",id:"--thanos-wallet",children:[]},{value:"- Beacon wallet",id:"--beacon-wallet",children:[]}]},{value:"Making transfers",id:"making-transfers",children:[{value:"- Transfer between implicit accounts",id:"--transfer-between-implicit-accounts",children:[]},{value:"- Transfer to smart contracts",id:"--transfer-to-smart-contracts",children:[]}]},{value:"Sending transactions",id:"sending-transactions",children:[{value:"- Contract entrypoint arguments",id:"--contract-entrypoint-arguments",children:[]},{value:"- <code>.send()</code> function arguments",id:"--send-function-arguments",children:[]},{value:"- Operation hash and confirmation",id:"--operation-hash-and-confirmation",children:[]}]},{value:"Originating a contract",id:"originating-a-contract",children:[]},{value:"Working with the contract abstraction instance",id:"working-with-the-contract-abstraction-instance",children:[{value:"- Instance creation",id:"--instance-creation",children:[]},{value:"- Contract properties and methods",id:"--contract-properties-and-methods",children:[]}]},{value:"The Wallet instance",id:"the-wallet-instance",children:[]},{value:"Choosing between the Contract API and the Wallet API",id:"choosing-between-the-contract-api-and-the-wallet-api",children:[]}],c={rightToc:s};function p(e){var t=e.components,a=Object(o.a)(e,["components"]);return Object(r.b)("wrapper",Object(n.a)({},c,a,{components:t,mdxType:"MDXLayout"}),Object(r.b)("h2",{id:"what-is-the-wallet-api"},"What is the Wallet API?"),Object(r.b)("p",null,"The Tezos blockchain is a fantastic tool but it is self-contained. Except for the transactions you send to it, it has no interaction with the outside world. However, it would be amazing to interact with it, for example to make payments, to read the balance of an account or to record data in a smart contract. This is what the Wallet API (and Taquito in general) achieves. The Wallet API provides a new, yet familiar way to interact with the blockchain and smart contracts by delegating a number of actions that were previously handled by Taquito to the wallets. This offers more flexibility for both developers and users and give more space for the ecosystem to evolve."),Object(r.b)("h2",{id:"installing-the-wallet-api"},"Installing the Wallet API"),Object(r.b)("p",null,"The first thing to do to use the wallet API is to install it."),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"npm install @taquito/taquito\n")),Object(r.b)("p",null,"or"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"yarn add @taquito/taquito\n")),Object(r.b)("p",null,"Make sure you have the latest version, starting with ",Object(r.b)("inlineCode",{parentName:"p"},"6.3.2-beta.0")," (when the API became available) or above.",Object(r.b)("br",{parentName:"p"}),"\n","Once the package is downloaded, you can install the wallet of your choice. The wallet API supports different kinds of wallets, ",Object(r.b)("em",{parentName:"p"},"TezBridge"),", ",Object(r.b)("em",{parentName:"p"},"Beacon")," and ",Object(r.b)("em",{parentName:"p"},"Thanos")," wallets are available to use at the moment. You can install one or multiple wallets according to your needs:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"npm install @taquito/tezbridge-wallet\nnpm install @taquito/beacon-wallet\nnpm install @thanos-wallet/dapp\n")),Object(r.b)("p",null,"Remember that some wallets may require an extra step in addition to the package installation. For example, TezBridge requires a plugin file, Thanos must be used with an extension installed in the browser, etc. The requirements for the different wallets will be explained in details in the sections below."),Object(r.b)("h2",{id:"connecting-the-wallet"},"Connecting the wallet"),Object(r.b)("p",null,"After installing the Taquito package and the package containing the Wallet API for the wallet of your choice, it's time to import the Wallet API into your project! Although the steps are very similar for each wallet, they all have their specificities that we will check in the paragraphs below.\nTo start, let's create an instance of the ",Object(r.b)("inlineCode",{parentName:"p"},"TezosToolkit")," from Taquito:\nWhen doing so, we have to choose the network we want to use:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"import { TezosToolkit } from '@taquito/taquito';\nconst Tezos = new TezosToolkit('https://YOUR_PREFERRED_RPC_URL');\n")),Object(r.b)("p",null,"This object exposes different methods we are going to use to set up our wallet. TezBridge has been around for some time and it may be the one you are the most familiar with, so let's start with that!"),Object(r.b)("h3",{id:"--tezbridge-wallet"},"- TezBridge wallet"),Object(r.b)("p",null,"First, we have to import the TezBridge wallet from the package:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"import { TezBridgeWallet } from '@taquito/tezbridge-wallet';\n")),Object(r.b)("p",null,"Next, we can set up the wallet. In general, you will give your dapp users the choice of the wallet they prefer, so the wallet initialization wouldn't happen when the dapp is mounted but after user's interaction, for example after pressing a button. It is important to remember that you have to import the TezBridge class in your HTML file before setting up your wallet or this will throw an error:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),'<script src="https://www.tezbridge.com/plugin.js"><\/script>\n')),Object(r.b)("p",null,"To set up TezBridge as your wallet, you use the ",Object(r.b)("inlineCode",{parentName:"p"},"setWalletProvider")," method of the ",Object(r.b)("inlineCode",{parentName:"p"},"TezosToolkit")," instance and pass a new instance of the ",Object(r.b)("inlineCode",{parentName:"p"},"TezBridgeWallet")," class:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"Tezos.setWalletProvider(new TezBridgeWallet());\n")),Object(r.b)("p",null,"or"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"Tezos.setProvider({ wallet: new TezBridgeWallet() });\n")),Object(r.b)("p",null,"Please note that you don't need to interact directly with the ",Object(r.b)("inlineCode",{parentName:"p"},"tezbridge")," object that the plugin injects in the ",Object(r.b)("inlineCode",{parentName:"p"},"window")," object. Taquito will take care of it. You can even get the user's address using the TezBridgeWallet instance like so:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"const wallet = new TezBridgeWallet();\nTezos.setWalletProvider(wallet);\nconst userAddress = await wallet.getPKH();\n")),Object(r.b)("h4",{id:"try-the-tezbridge-wallet"},"Try the TezBridge wallet!"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js",metastring:"live noInline",live:!0,noInline:!0}),"//import { TezBridgeWallet } from '@taquito/tezbridge-wallet';\nconst wallet = new TezBridgeWallet();\nTezos.setWalletProvider(wallet);\nwallet.getPKH().then((userAddress) => println(`Your address: ${userAddress}`));\n")),Object(r.b)("h3",{id:"--thanos-wallet"},"- Thanos wallet"),Object(r.b)("p",null,"Just like the other wallets, you have to import Thanos wallet class first:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"import { ThanosWallet } from '@thanos-wallet/dapp';\n")),Object(r.b)("p",null,"Then, Thanos requires an extra step to verify that the extension is installed and connected in the browser. The ",Object(r.b)("inlineCode",{parentName:"p"},"ThanosWallet")," class exposes a static property called ",Object(r.b)("inlineCode",{parentName:"p"},"isAvailable")," that just does that. You must use it before attempting to connect the wallet:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"try {\n  const available = await ThanosWallet.isAvailable();\n  if (!available) {\n    throw new Error('Thanos Wallet not installed');\n  }\n} catch (err) {\n  console.log(err);\n}\n")),Object(r.b)("p",null,"In order for this to work, you have to enable dapps in the Thanos wallet. Under ",Object(r.b)("inlineCode",{parentName:"p"},"Settings"),", you will find a ",Object(r.b)("inlineCode",{parentName:"p"},"DApps")," section where the checkbox must be checked to allow interactions between the wallet and the dapps."),Object(r.b)("p",null,"Now that we are sure the extension is installed and running, we can continue and connect the wallet. We start by creating a new instance of the ThanosWallet class:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"const wallet = new ThanosWallet('MyAwesomeDapp');\n")),Object(r.b)("p",null,"The class constructor takes one parameter, the name of your dapp (this will be used later in the transaction confirmation pop-up). After the instantiation, we can connect the wallet by calling the ",Object(r.b)("inlineCode",{parentName:"p"},"connect")," method:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"await wallet.connect('mainnet' | 'carthagenet' | 'labnet' | 'sandbox');\n")),Object(r.b)("p",null,"Once the wallet is connected, there are a couple of things you can get out of it:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"const wallet = new ThanosWallet('MyAwesomeDapp');\n// the ThanosWallet can return an instance of the Tezos singleton\nconst Tezos = await wallet.toTezos();\n// the ThanosWallet can return the user's address\nconst userAddress = wallet.pkh || (await wallet.getPKH());\n")),Object(r.b)("p",null,"If you are using your own TezosToolkit instance, it is time to set the wallet as the provider (this is not necessary if you use the one provided by Thanos wallet, but remember you have to continue using it throughout your dapp):"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"Tezos.setWalletProvider(wallet);\n")),Object(r.b)("p",null,"or"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"Tezos.setProvider({ wallet: wallet });\n")),Object(r.b)("h4",{id:"try-the-thanos-wallet"},"Try the Thanos wallet!"),Object(r.b)("p",null,"Make sure you have the Thanos browser extension installed first."),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js",metastring:"live noInline",live:!0,noInline:!0}),"//import { ThanosWallet } from '@thanos-wallet/dapp';\n\nThanosWallet.isAvailable()\n  .then(() => {\n    const wallet = new ThanosWallet('MyAwesomeDapp');\n\n    wallet.connect('carthagenet').then(() => {\n      Tezos.setWalletProvider(wallet);\n\n      println(`Your address: ${wallet.pkh}`);\n    });\n  })\n  .catch((err) => console.log(err));\n")),Object(r.b)("h3",{id:"--beacon-wallet"},"- Beacon wallet"),Object(r.b)("p",null,"The Beacon wallet is a package implementing the TZIP-10 standard that describes the communication between a dapp (decentralised application on Tezos) and a wallet (eg. browser extension). The Beacon wallet works with the Beacon extension you can install in your browser but also with any wallet that supports the TZIP-10 standard (for example Thanos)."),Object(r.b)("p",null,"First, the ",Object(r.b)("inlineCode",{parentName:"p"},"BeaconWallet")," class must be imported:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"import { BeaconWallet } from '@taquito/beacon-wallet';\n")),Object(r.b)("p",null,"Then, you can start initializing the wallet:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"const options = {\n  name: 'MyAwesomeDapp',\n  iconUrl: 'https://tezostaquito.io/img/favicon.png',\n  eventHandlers: {\n    PERMISSION_REQUEST_SUCCESS: {\n      handler: async (data) => {\n        console.log('permission data:', data);\n      },\n    },\n  },\n};\nconst wallet = new BeaconWallet(options);\n")),Object(r.b)("p",null,"The necessary bare minimum to instantiate the wallet is an object with a ",Object(r.b)("inlineCode",{parentName:"p"},"name")," property which contains the name of your dapp. However, the Beacon wallet allows you to customize your dapp responses to different events. In the example above, instead of getting the default Beacon pop-up after the user connects the wallet, it will just display the available data in the console. You can use whatever solution you prefer for feedback. For more customization options, you can find a list of all the default handlers ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/airgap-it/beacon-sdk/blob/master/src/events.ts"}),"in the beacon-sdk Github repo"),"."),Object(r.b)("p",null,"Next, you can set the wallet as your provider:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"Tezos.setWalletProvider(wallet);\n")),Object(r.b)("p",null,"or"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"Tezos.setProvider({ wallet });\n")),Object(r.b)("p",null,"The Beacon wallet requires an extra step to set up the network to connect to and the permissions:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"await wallet.requestPermissions({ network: { type: 'mainnet' | 'carthagenet' | 'custom' } });\n\nconst userAddress = wallet.permissions.address;\n")),Object(r.b)("p",null,"You can choose among ",Object(r.b)("inlineCode",{parentName:"p"},"mainnet"),", ",Object(r.b)("inlineCode",{parentName:"p"},"carthagenet")," and ",Object(r.b)("inlineCode",{parentName:"p"},"custom")," to set up the network. Once the permissions have been configured, you can find the user's address under the ",Object(r.b)("inlineCode",{parentName:"p"},"address")," property of the ",Object(r.b)("inlineCode",{parentName:"p"},"wallet.permissions")," object. You can also get the user's address by calling the ",Object(r.b)("inlineCode",{parentName:"p"},"getPKH")," method on the wallet:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"const userAddress = await wallet.getPKH();\n")),Object(r.b)("h4",{id:"try-the-beacon-wallet"},"Try the Beacon wallet!"),Object(r.b)("p",null,"Make sure you have the Beacon browser extension installed (the extension is only used for development purposes, the BeaconWallet works with any wallet implementing the TZIP-10 standard) or the AirGap wallet on your phone."),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js",metastring:"live noInline",live:!0,noInline:!0}),"//import { BeaconWallet } from '@taquito/beacon-wallet';\n\nconst options = { name: 'MyAwesomeDapp' };\nconst wallet = new BeaconWallet(options);\n\nwallet\n  .requestPermissions({ network: { type: 'carthagenet' } })\n  .then((_) => println(`Your address: ${wallet.permissions.address}`));\n\nTezos.setWalletProvider(wallet);\n")),Object(r.b)("h2",{id:"making-transfers"},"Making transfers"),Object(r.b)("p",null,"Although it is possible and perfectly fine to transfer tokens directly from the wallets, Taquito offers the possibility to programmatically send tokens. This could be a better solution if you want to do calculations before sending the tokens or if the amount of tokens to send is based on a variable value. This could also be preferrable in order to avoid manual inputs that can often be a source of errors. Using Taquito to send tokens only requires to sign a transaction, sit back and relax :)"),Object(r.b)("h3",{id:"--transfer-between-implicit-accounts"},"- Transfer between implicit accounts"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js",metastring:"live noInline wallet",live:!0,noInline:!0,wallet:!0}),"Tezos.wallet\n  .transfer({ to: 'tz1NhNv9g7rtcjyNsH8Zqu79giY5aTqDDrzB', amount: 0.2 })\n  .send()\n  .then((op) => {\n    println(`Hash: ${op.opHash}`);\n\n    op.confirmation()\n      .then((result) => {\n        console.log(result);\n        if (result.completed) {\n          println('Transaction correctly processed!');\n        } else {\n          println('An error has occurred');\n        }\n      })\n      .catch((err) => println(err));\n  });\n")),Object(r.b)("p",null,"The ",Object(r.b)("inlineCode",{parentName:"p"},"transfer")," method takes an object with only two required properties: the ",Object(r.b)("inlineCode",{parentName:"p"},"to")," property that indicates the recipient of the transaction and the ",Object(r.b)("inlineCode",{parentName:"p"},"amount")," property for the amount of tokens that should be sent. Unlike the Contract API, the transfer must be ",Object(r.b)("em",{parentName:"p"},"sent")," by using the ",Object(r.b)("inlineCode",{parentName:"p"},".send")," method which returns a promise that will resolve with an instance of the ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"https://tezostaquito.io/typedoc/classes/_taquito_taquito.transactionwalletoperation-2.html"}),Object(r.b)("strong",{parentName:"a"},"TransactionWalletOperation class")),". This instance holds, among others, the transaction hash under the ",Object(r.b)("inlineCode",{parentName:"p"},"opHash")," property. You can then call the ",Object(r.b)("inlineCode",{parentName:"p"},".confirmation()")," method and pass as a parameter the number of confirmations you want to wait (one by default). Once confirmed, the returned promise resolved to an object with a ",Object(r.b)("inlineCode",{parentName:"p"},"complete")," property set to true if the operation has been confirmed."),Object(r.b)("h3",{id:"--transfer-to-smart-contracts"},"- Transfer to smart contracts"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js",metastring:"live noInline wallet",live:!0,noInline:!0,wallet:!0}),"Tezos.wallet\n  .transfer({ to: 'KT1TMZhfoYtpjbGG1nLjs7SZioFM1njsRwkP', amount: 0.2 })\n  .send()\n  .then((op) => {\n    println(`Waiting for ${op.opHash} to be confirmed...`);\n    return op.confirmation(1).then(() => op.opHash);\n  })\n  .then(hash => println(`Operation injected: https://carthagenet.tzstats.com/${hash}`))\n      .catch((err) => println(err))\n\n")),Object(r.b)("p",null,"Transactions to smart contracts operate in the same fashion as transactions to an implicit account, the only difference being the ",Object(r.b)("inlineCode",{parentName:"p"},"KT1...")," address. You will also receive a transaction hash and have to wait for the transaction to be confirmed. Once confirmed, it can be the right time to update the user's/contract's balance, for example."),Object(r.b)("h2",{id:"sending-transactions"},"Sending transactions"),Object(r.b)("p",null,"Sending a transaction to a smart contract to update its storage is going to be a different type of action as it implies targetting a specific entrypoint and formatting correctly the data to be sent.",Object(r.b)("br",{parentName:"p"}),"\n","Fortunately, Taquito will make this operation go like a breeze! First, you need the contract abstraction created with the address of the smart contract you are targetting:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"const contract = await Tezos.wallet.at('KT1TMZhfoYtpjbGG1nLjs7SZioFM1njsRwkP');\n")),Object(r.b)("p",null,"This line creates a contract abstraction with multiple methods named after the contract entrypoints. For example, if you have a ",Object(r.b)("inlineCode",{parentName:"p"},"transfer")," entrypoint in your contract, you will also have a ",Object(r.b)("inlineCode",{parentName:"p"},".transfer()")," method in the ",Object(r.b)("inlineCode",{parentName:"p"},"contract")," object. Each method accepts parameters required by the contract entrypoint."),Object(r.b)("p",null,"In this example, we are working with a simple smart contract with two methods: ",Object(r.b)("inlineCode",{parentName:"p"},"areYouThere")," expects a value of type ",Object(r.b)("inlineCode",{parentName:"p"},"boolean")," to update the ",Object(r.b)("inlineCode",{parentName:"p"},"areYouThere")," value in the storage of the same type and ",Object(r.b)("inlineCode",{parentName:"p"},"addName")," expects a value of type ",Object(r.b)("inlineCode",{parentName:"p"},"string")," to add it to the map in the contract."),Object(r.b)("h3",{id:"--contract-entrypoint-arguments"},"- Contract entrypoint arguments"),Object(r.b)("p",null,"Most of the possible arguments of the entrypoint method are pretty straightforward and intuitive and do not require any explanation. However, a couple of them need more attention.\nMost of the time, the process is simple: you take the contract abstraction you created for the contract you target, you call the ",Object(r.b)("inlineCode",{parentName:"p"},"methods")," property on it which exposes all the entrypoints of the contract as methods. You pass the argument you want to send to the contract as a function argument before calling the ",Object(r.b)("inlineCode",{parentName:"p"},"send()")," method to send the transaction:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js",metastring:"live noInline wallet",live:!0,noInline:!0,wallet:!0}),"Tezos.wallet\n  .at('KT1PCLg8Da8T5h5SWibMopPVsxiKg27tSRxx')\n  .then((contract) => contract.methods.areYouThere(true).send())\n  .then((op) => {\n    println(`Hash: ${op.opHash}`);\n    return op.confirmation();\n  })\n  .then((result) => {\n    console.log(result);\n    if (result.completed) {\n      println(`Transaction correctly processed!\n      Block: ${result.block.header.level}\n      Chain ID: ${result.block.chain_id}`);\n    } else {\n      println('An error has occurred');\n    }\n  })\n  .catch((err) => console.log(err));\n")),Object(r.b)("p",null,"In the case of multiple arguments (for example if the entrypoint expects a pair), you can just pass the arguments one by one. Be careful of the order of the arguments, they must be in the exact order expected by the contract entrypoint:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js",metastring:"live noInline wallet",live:!0,noInline:!0,wallet:!0}),"Tezos.wallet\n  .at('KT1PCLg8Da8T5h5SWibMopPVsxiKg27tSRxx')\n  .then((contract) =>\n    contract.methods.addName('tz1VSUr8wwNhLAzempoch5d6hLRiTh8Cjcjb', 'Alice').send()\n  )\n  .then((op) => {\n    println(`Hash: ${op.opHash}`);\n    return op.confirmation();\n  })\n  .then((result) => {\n    console.log(result);\n    if (result.completed) {\n      println(`Transaction correctly processed!\n      Block: ${result.block.header.level}\n      Chain ID: ${result.block.chain_id}`);\n    } else {\n      println('An error has occurred');\n    }\n  })\n  .catch((err) => console.log(err));\n")),Object(r.b)("p",null,"If the entrypoint doesn't expect any value (or more precisely, if it expects a ",Object(r.b)("inlineCode",{parentName:"p"},"unit")," value), you also have to specify it when sending the transaction as follows:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"contract.methods.noArgumentEntrypoint([['unit']]).send();\n")),Object(r.b)("p",null,"This will tell Taquito that a value of type unit needs to be sent to the entrypoint."),Object(r.b)("h3",{id:"--send-function-arguments"},"- ",Object(r.b)("inlineCode",{parentName:"h3"},".send()")," function arguments"),Object(r.b)("p",null,"In the previous examples, we called the ",Object(r.b)("inlineCode",{parentName:"p"},"send()")," method without passing any argument. However, it is also possible to change some options before sending a transaction by passing an object to the ",Object(r.b)("inlineCode",{parentName:"p"},"send()")," method.\nThe properties of the argument are described in the following interface:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-ts"}),"interface SendParams {\n  fee?: number;\n  storageLimit?: number;\n  gasLimit?: number;\n  amount: number;\n  source?: string;\n  mutez?: boolean;\n}\n")),Object(r.b)("p",null,"If you choose to use the parameters, only one property is mandatory: the ",Object(r.b)("inlineCode",{parentName:"p"},"amount")," property. It represents the amount of tokens you want to send to the contract. Let's check the other properties:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"fee"),": a custom fee for the current transaction"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"storageLimit"),": sets the storage limit for the current transaction"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"gasLimit"),": sets the gas limit for the current transaction"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"source"),": a string indicating the source of the transaction"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"mutez"),": if set to ",Object(r.b)("inlineCode",{parentName:"li"},"true"),", it indicates that the amount provided is in mutez")),Object(r.b)("h3",{id:"--operation-hash-and-confirmation"},"- Operation hash and confirmation"),Object(r.b)("p",null,"The ",Object(r.b)("inlineCode",{parentName:"p"},".send()")," method returns an instance of the ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"https://tezostaquito.io/typedoc/classes/_taquito_taquito.transactionwalletoperation-2.html"}),Object(r.b)("inlineCode",{parentName:"a"},"TransactionWalletOperation"))," class with different properties and methods you can use to gather information about the transaction. Among them, there are two properties and one method that you will use most of the time when using Taquito:"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},Object(r.b)("inlineCode",{parentName:"p"},".opHash"),": this property holds the hash of the current transaction, it can be useful for debugging purposes or checking the status of the transaction in a block explorer.")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},Object(r.b)("inlineCode",{parentName:"p"},"._included"),": the ",Object(r.b)("inlineCode",{parentName:"p"},"_included")," property is set to ",Object(r.b)("inlineCode",{parentName:"p"},"false")," when the transaction is sent to the network and will be updated to ",Object(r.b)("inlineCode",{parentName:"p"},"true")," when it is included in a block. It can be useful to verify the transaction has been properly included in the blockchain.")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},Object(r.b)("inlineCode",{parentName:"p"},".confirmation()"),": this method is a crucial promise to use in your code: it will wait until the transaction is confirmed before executing the rest of the code. You can pass a number as an argument if you want to wait several block confirmations, otherwise it is set to ",Object(r.b)("inlineCode",{parentName:"p"},"1")," by default. Note that this method returns a promise with different valuable information:"),Object(r.b)("ul",{parentName:"li"},Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"block"),": holds details about the block in which the transaction was included, for example the chain ID, the block level, etc."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"completed"),": ",Object(r.b)("inlineCode",{parentName:"li"},"true")," if the the transaction is over"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"currentConfirmation"),": the current number of confirmations, if more than 1 confirmation was requested (otherwise 1)")))),Object(r.b)("h2",{id:"originating-a-contract"},"Originating a contract"),Object(r.b)("p",null,'In the Tezos lingo, "origination" means "deployment of a contract to the blockchain". Before Taquito, this was a painstaking work as it required to interact directly with a Tezos node and type commands to originate the contract. But not anymore! With Taquito, you only need the Michelson code and the initial storage to make it happen.'),Object(r.b)("p",null,"First, you need to get the code of the contract. If you deploy a contract you wrote, then you already have the code. If you want to deploy the copy of a contract, you cand easily get its code with the following method:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"const contract = await Tezos.contract.at(address);\nconst storage = await contract.storage();\nconst code = contract.script.code;\n")),Object(r.b)("p",null,"If you get the contract code through this method, it will already be properly formatted for origination. If you have a ",Object(r.b)("inlineCode",{parentName:"p"},".tz")," file, you can use the ",Object(r.b)("inlineCode",{parentName:"p"},"michel-codec")," package to encode it properly:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"import { Parser } from '@taquito/michel-codec';\nconst parser = new Parser();\nconst parsedMichelson = parser.parseScript(michelsonCode);\n")),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},"Note: Since Taquito version 6.3.2, you can also passed plain Michelson to the parser without formatting it.")),Object(r.b)("p",null,"For example, this very simple Michelson contract:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"parameter int;\nstorage int;\ncode { DUP ; CDR ; SWAP ; CAR ; ADD ; NIL operation ; PAIR }\n")),Object(r.b)("p",null,"will be encoded and formatted this way:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-json"}),'[\n  {\n    "prim": "parameter",\n    "args": [\n      {\n        "prim": "int"\n      }\n    ]\n  },\n  {\n    "prim": "storage",\n    "args": [\n      {\n        "prim": "int"\n      }\n    ]\n  },\n  {\n    "prim": "code",\n    "args": [\n      [\n        {\n          "prim": "DUP"\n        },\n        {\n          "prim": "CDR"\n        },\n        {\n          "prim": "SWAP"\n        },\n        {\n          "prim": "CAR"\n        },\n        {\n          "prim": "ADD"\n        },\n        {\n          "prim": "NIL",\n          "args": [\n            {\n              "prim": "operation"\n            }\n          ]\n        },\n        {\n          "prim": "PAIR"\n        }\n      ]\n    ]\n  }\n]\n')),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},'Note: make sure you have three objects in the main array with the following properties: one with "prim":"parameter", one with "prim":"storage" and one with "prim":"code".')),Object(r.b)("p",null,"Second, you need the initial storage. According to the storage type of your smart contract, you must include a default storage to initialize the contract during the origination. The default (or initial) storage holds the values that will be saved into the smart contract when it is created and stored on the blockchain. For simple contracts like the one above, this will be very easy:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"{\n  code: parsedMichelson,\n  storage: 2\n}\n")),Object(r.b)("p",null,"If you use the Ligo programming language and the storage is a record, you can simply use a JavaScript object that Taquito will encode according to the storage type:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),'{\n  code: parsedMichelson,\n  storage: {\n    owner: "tz1...",\n    counter: 2,\n    paused: false\n  }\n}\n')),Object(r.b)("p",null,"In case of a map or a big map, you must import ",Object(r.b)("inlineCode",{parentName:"p"},"MichelsonMap")," from ",Object(r.b)("inlineCode",{parentName:"p"},"@taquito/taquito")," and use it to initialize the map:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),'import { MichelsonMap } from "@taquito/taquito";\n\n{\n  code: parsedMichelson,\n  storage: {\n    ledger: new MichelsonMap(),\n    owner: "tz1..."\n  }\n}\n')),Object(r.b)("p",null,"You can even initialize your map/big map with key/value pairs if you wish:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),'import { MichelsonMap } from "@taquito/taquito";\n\n{\n  code: parsedMichelson,\n  storage: {\n    // ledger must be of type (map string int/nat/mutez) or (big_map string int/nat/mutez)\n    ledger: MichelsonMap.fromLiteral({\n      alice: 25,\n      bob: 16\n    }),\n    owner: "tz1..."\n  }\n}\n')),Object(r.b)("p",null,"Now, we have everything we need to originate a new contract!"),Object(r.b)("p",null,"Then, we can start the process. The TezosToolkit has a ",Object(r.b)("inlineCode",{parentName:"p"},"wallet")," property with an ",Object(r.b)("inlineCode",{parentName:"p"},"originate")," method. This is the one that must be called to originate the contract. This method takes an argument, an object with two properties: ",Object(r.b)("inlineCode",{parentName:"p"},"code")," that holds the parsed Michelson code to be originated and ",Object(r.b)("inlineCode",{parentName:"p"},"storage")," that holds the initial storage. After passing this argument, you call the ",Object(r.b)("inlineCode",{parentName:"p"},"send()")," method to originate the contract."),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"const op = await Tezos.wallet\n  .originate({\n    code: parsedMichelson,\n    storage,\n  })\n  .send();\nconst opHash = op.opHash;\nconst contract = await op.contract();\nconsole.log('Contract address:', contract.address);\n")),Object(r.b)("p",null,"The origination function returns an instance of the ",Object(r.b)("inlineCode",{parentName:"p"},"OriginationWalletOperation")," class that contains, among others, the hash of the transaction under the ",Object(r.b)("inlineCode",{parentName:"p"},"opHash")," property. You can call the ",Object(r.b)("inlineCode",{parentName:"p"},"contract()")," method on this instance to wait for the contract to be confirmed. Once confirmed, the method returns a contract abstraction that you can use, for example to get the contract address or to interact with the contract."),Object(r.b)("h2",{id:"working-with-the-contract-abstraction-instance"},"Working with the contract abstraction instance"),Object(r.b)("p",null,"Taquito makes interacting with smart contracts very easy! With only the address of the smart contract you want to interact with, you can create a ",Object(r.b)("inlineCode",{parentName:"p"},"contract abstraction")," and use it for subsequent interactions. You will not only be able to call entrypoints of the smart contract but also fetch its storage!"),Object(r.b)("h3",{id:"--instance-creation"},"- Instance creation"),Object(r.b)("p",null,"First, you need to import TezosToolkit and instantiate it with the RPC host you want to connect to:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"import { TezosToolkit } from '@taquito/taquito';\n\nconst Tezos = new TezosToolkit('https://YOUR_PREFERRED_RPC_URL');\n")),Object(r.b)("p",null,"Next, you can use the ",Object(r.b)("inlineCode",{parentName:"p"},"TezosToolkit")," instance to create the smart contract instance with the contract address:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"const contractInstance = await Tezos.wallet.at('contract address');\n")),Object(r.b)("p",null,"This returns the contract abstraction that you can now use to interact with the contract."),Object(r.b)("h3",{id:"--contract-properties-and-methods"},"- Contract properties and methods"),Object(r.b)("p",null,"Now, let's observe the contract abstraction that we obtained. It's an instance of the ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"https://tezostaquito.io/typedoc/classes/_taquito_taquito.contractabstraction-2.html"}),"ContractAbstraction class")," with different properties and methods:"),Object(r.b)("p",null,Object(r.b)("em",{parentName:"p"},"Properties:")),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},Object(r.b)("inlineCode",{parentName:"li"},"address"),": a string containing the address of the smart contract."),Object(r.b)("li",{parentName:"ol"},Object(r.b)("inlineCode",{parentName:"li"},"methods"),": an object whose methods are named after the contract entrypoints (if the entrypoints are not annotated, the methods will be numbers)."),Object(r.b)("li",{parentName:"ol"},Object(r.b)("inlineCode",{parentName:"li"},"parameterSchema"),": an instance of the ",Object(r.b)("a",Object(n.a)({parentName:"li"},{href:"https://github.com/ecadlabs/taquito/blob/d424fa178a95675920b21c8e8c228fbe0e7df36e/packages/taquito-michelson-encoder/src/schema/parameter.ts"}),"Parameter class")," with two useful methods: ",Object(r.b)("inlineCode",{parentName:"li"},"hasAnnotation")," tells you if the entrypoints are annotated and ",Object(r.b)("inlineCode",{parentName:"li"},"isMultipleEntryPoint")," tells you if the contract has multiple entrypoints (if ",Object(r.b)("em",{parentName:"li"},"false"),", you can interact with the contract with ",Object(r.b)("inlineCode",{parentName:"li"},".methods.default()"),")."),Object(r.b)("li",{parentName:"ol"},Object(r.b)("inlineCode",{parentName:"li"},"schema"),": an instance of the ",Object(r.b)("a",Object(n.a)({parentName:"li"},{href:"https://github.com/ecadlabs/taquito/blob/d424fa178a95675920b21c8e8c228fbe0e7df36e/packages/taquito-michelson-encoder/src/schema/storage.ts#L15"}),"Schema class")," with various methods to get more information about the storage or the structure of the contract."),Object(r.b)("li",{parentName:"ol"},Object(r.b)("inlineCode",{parentName:"li"},"script"),": an object with two properties: ",Object(r.b)("inlineCode",{parentName:"li"},"code")," is an array with three objects, each representing the JSON formatted Michelson code for the parameter, storage and code (respectively), ",Object(r.b)("inlineCode",{parentName:"li"},"storage")," is the JSON formatted Michelson code for the storage of the contract.")),Object(r.b)("p",null,Object(r.b)("em",{parentName:"p"},"Methods:")),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},Object(r.b)("inlineCode",{parentName:"li"},"bigMap"),": a promise that takes a key from the big map in the storage as a parameter and that returns the value associated to that key."),Object(r.b)("li",{parentName:"ol"},Object(r.b)("inlineCode",{parentName:"li"},"storage"),": a promise that returns a representation of the storage value(s). The storage is represented as an object whose keys are the name of the values. ",Object(r.b)("inlineCode",{parentName:"li"},"map")," and ",Object(r.b)("inlineCode",{parentName:"li"},"big map")," values are returned as an instance of the ",Object(r.b)("a",Object(n.a)({parentName:"li"},{href:"https://tezostaquito.io/typedoc/classes/_taquito_taquito.bigmapabstraction-1.html"}),"BigMapAbstraction")," while numeric values are returned as BigNumber.")),Object(r.b)("h2",{id:"the-wallet-instance"},"The Wallet instance"),Object(r.b)("p",null,"The TezosToolkit instance exposes a ",Object(r.b)("em",{parentName:"p"},"wallet")," property in the same fashion it exposes the ",Object(r.b)("em",{parentName:"p"},"contract")," property you may be used to. This property is an instance of the ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"https://tezostaquito.io/typedoc/classes/_taquito_taquito.wallet-2.html"}),"Wallet class")," with a few useful methods you want to check out. It becomes available as soon as you set up a wallet by calling ",Object(r.b)("inlineCode",{parentName:"p"},"Tezos.setProvider({wallet})")," or ",Object(r.b)("inlineCode",{parentName:"p"},"Tezos.setWalletProvider(wallet)"),". Here is a list of the methods and a basic description of their function before seeing some examples:"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},Object(r.b)("inlineCode",{parentName:"li"},"at"),": creates an smart contract abstraction for the address specified"),Object(r.b)("li",{parentName:"ol"},Object(r.b)("inlineCode",{parentName:"li"},"batch"),": creates a batch of operations"),Object(r.b)("li",{parentName:"ol"},Object(r.b)("inlineCode",{parentName:"li"},"originate"),": originates a new contract"),Object(r.b)("li",{parentName:"ol"},Object(r.b)("inlineCode",{parentName:"li"},"pkh"),": retrieves the private key hash of the account that is currently in use by the wallet"),Object(r.b)("li",{parentName:"ol"},Object(r.b)("inlineCode",{parentName:"li"},"registerDelegate"),": registers the current address as delegate"),Object(r.b)("li",{parentName:"ol"},Object(r.b)("inlineCode",{parentName:"li"},"setDelegate"),": sets the delegate for a contract"),Object(r.b)("li",{parentName:"ol"},Object(r.b)("inlineCode",{parentName:"li"},"transfer"),": transfers Tezos tokens from current address to a specific address or call a smart contract")),Object(r.b)("p",null,"We have already seen the ",Object(r.b)("inlineCode",{parentName:"p"},"at")," method of the Wallet instance earlier in order to create the contract abstraction:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"const contract = await Tezos.wallet.at('KT1TMZhfoYtpjbGG1nLjs7SZioFM1njsRwkP');\n")),Object(r.b)("p",null,"The method is a promise that expects the address of the contract for which you want to create the abstraction."),Object(r.b)("p",null,"This may be a lesser-known feature of Taquito but it is possible to send batches of operations at once! This is what the ",Object(r.b)("inlineCode",{parentName:"p"},"batch")," method does. There are two different ways of using it: you can either pass the operations to send as an array of objects in the parameter of the method or you can use the ",Object(r.b)("inlineCode",{parentName:"p"},"withTransfer"),", ",Object(r.b)("inlineCode",{parentName:"p"},"withContractCall"),", ",Object(r.b)("inlineCode",{parentName:"p"},"withTransfer"),", ",Object(r.b)("inlineCode",{parentName:"p"},"withOrigination")," or ",Object(r.b)("inlineCode",{parentName:"p"},"withDelegation")," methods it provides:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"const op = await Tezos.wallet\n  .batch([\n    {\n      kind: 'transaction',\n      to: 'tz1...',\n      amount: 2,\n    },\n    {\n      kind: 'origination',\n      balance: '1',\n      code: code,\n      storage: 0,\n    },\n  ])\n  .send();\n\nawait op.confirmation();\n")),Object(r.b)("p",null,"or"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"const batch = Tezos.wallet\n  .batch()\n  .withTransfer({ to: 'tz1...', amount: 2 })\n  .withOrigination({\n    balance: '1',\n    code: code,\n    storage: 0,\n  })\n  .withContractCall(contractInstance.methods.entrypoint());\n\nconst batchOp = await batch.send();\n\nawait batchOp.confirmation();\n")),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},"Note: you cannot make a contract call with the first method.")),Object(r.b)("p",null,"As with other operations, you must call the ",Object(r.b)("inlineCode",{parentName:"p"},"confirmation")," method on the returned operation to wait for the operation to be confirmed."),Object(r.b)("p",null,"We already checked the ",Object(r.b)("inlineCode",{parentName:"p"},"originate")," method earlier, it takes an object as a parameter with two properties: ",Object(r.b)("inlineCode",{parentName:"p"},"code")," with the Michelson code of the contract in a JSON format and storage with the initial storage."),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"const op = await Tezos.wallet\n  .originate({\n    code: parsedMichelson,\n    storage,\n  })\n  .send();\nconst opHash = op.opHash;\nconst contract = await op.contract();\nconsole.log('Contract address:', contract.address);\n")),Object(r.b)("p",null,"Next, the ",Object(r.b)("inlineCode",{parentName:"p"},"pkh")," method allows you to retrieve the public key hash currently associated with the chosen wallet. Because the key is saved earlier in the process, you can pass an object as a parameter with a ",Object(r.b)("inlineCode",{parentName:"p"},"forceRefetch")," property set to ",Object(r.b)("strong",{parentName:"p"},"true")," if you want Taquito to refetch the key and be sure you have the right one:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"// to fetch the current public key hash\nconst pkh = await Tezos.wallet.pkh();\n// to force Taquito to retrieve the current public key hash\nconst refetchedPkh = await Tezos.wallet.pkh({ forceRefetch: true });\n")),Object(r.b)("p",null,"The Wallet instance also provides two methods to deal with delegate things on Tezos: the ",Object(r.b)("inlineCode",{parentName:"p"},"registerDelegate")," method takes the current address and registers it as a new delegate:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"const op = await Tezos.wallet.registerDelegate().send();\n\nawait op.confirmation();\n")),Object(r.b)("p",null,"The ",Object(r.b)("inlineCode",{parentName:"p"},"setDelegate")," method takes an object as a parameter with a ",Object(r.b)("inlineCode",{parentName:"p"},"delegate")," property set to the address you want to set as a delegate:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"const op = await Tezos.wallet.setDelegate({ delegate: 'tz1...' }).send();\n\nawait op.confirmation();\n")),Object(r.b)("p",null,"Finally, the ",Object(r.b)("inlineCode",{parentName:"p"},"transfer")," method allows transfers between implicit accounts but also calls to a smart contract. It takes an object as a parameter with four properties: ",Object(r.b)("inlineCode",{parentName:"p"},"amount"),", ",Object(r.b)("inlineCode",{parentName:"p"},"mutez"),", ",Object(r.b)("inlineCode",{parentName:"p"},"parameter")," and ",Object(r.b)("inlineCode",{parentName:"p"},"to"),". Here is how to use it to transfer tokens between two addresses:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"const op = await Tezos.wallet.transfer({ to: 'tz1...', amount: 2 }).send();\n\nawait op.confirmation();\n")),Object(r.b)("p",null,"If you want to send a transaction to a contract, the process is very similar with the addition of the ",Object(r.b)("inlineCode",{parentName:"p"},"parameter")," property that must point to the entrypoint you are targetting and the value you want to pass:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"const op = await Tezos.wallet\n  .transfer({ to: 'KT1...', parameter: { entrypoint: 'increment', value: 2 } })\n  .send();\n\nawait op.confirmation();\n")),Object(r.b)("h2",{id:"choosing-between-the-contract-api-and-the-wallet-api"},"Choosing between the Contract API and the Wallet API"),Object(r.b)("p",null,"In most cases, you want to use the Wallet API when you give the users of your dapp the freedom to choose the wallet of their choice to interact with it. The Contract API is more suited for back-end applications and forging/signing offline (for example using the ",Object(r.b)("inlineCode",{parentName:"p"},"inMemorySigner"),"). You would also use the Contract API to build a wallet."),Object(r.b)("p",null,"The Wallet API introduces a new method to process operation confirmations. Observables. When the dApp sends the operation to the wallet, the dApp will \u201clisten\u201d for when the operation appears in a block. The Wallet API observable will \u201cemit\u201d a stream of events as they occur. Orphan/Uncle block detection is also surfaced when observing confirmations for an operation."),Object(r.b)("p",null,"The duties of a Wallet are much broader than the very narrow duty of signing operation byte sequences. That\u2019s one reason why we built the Wallet API. It offers a better user experience by doing less. It allows Wallets to carry out all the duties expected of a Wallet."))}p.isMDXComponent=!0},96:function(e,t,a){"use strict";a.d(t,"a",(function(){return b})),a.d(t,"b",(function(){return u}));var n=a(0),o=a.n(n);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var c=o.a.createContext({}),p=function(e){var t=o.a.useContext(c),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},b=function(e){var t=p(e.components);return o.a.createElement(c.Provider,{value:t},e.children)},h={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},d=o.a.forwardRef((function(e,t){var a=e.components,n=e.mdxType,r=e.originalType,i=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),b=p(a),d=n,u=b["".concat(i,".").concat(d)]||b[d]||h[d]||r;return a?o.a.createElement(u,l(l({ref:t},c),{},{components:a})):o.a.createElement(u,l({ref:t},c))}));function u(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var r=a.length,i=new Array(r);i[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:n,i[1]=l;for(var c=2;c<r;c++)i[c]=a[c];return o.a.createElement.apply(null,i)}return o.a.createElement.apply(null,a)}d.displayName="MDXCreateElement"}}]);