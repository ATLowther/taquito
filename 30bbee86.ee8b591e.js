(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{106:function(e,n,t){"use strict";t.d(n,"a",(function(){return m})),t.d(n,"b",(function(){return d}));var r=t(0),a=t.n(r);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var p=a.a.createContext({}),l=function(e){var n=a.a.useContext(p),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},m=function(e){var n=l(e.components);return a.a.createElement(p.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return a.a.createElement(a.a.Fragment,{},n)}},b=a.a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,i=e.originalType,o=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),m=l(t),b=r,d=m["".concat(o,".").concat(b)]||m[b]||u[b]||i;return t?a.a.createElement(d,s(s({ref:n},p),{},{components:t})):a.a.createElement(d,s({ref:n},p))}));function d(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=t.length,o=new Array(i);o[0]=b;var s={};for(var c in n)hasOwnProperty.call(n,c)&&(s[c]=n[c]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var p=2;p<i;p++)o[p]=t[p];return a.a.createElement.apply(null,o)}return a.a.createElement.apply(null,t)}b.displayName="MDXCreateElement"},75:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return o})),t.d(n,"metadata",(function(){return s})),t.d(n,"rightToc",(function(){return c})),t.d(n,"default",(function(){return l}));var r=t(3),a=t(7),i=(t(0),t(106)),o={title:"In Memory Signer",author:"Simon Boissonneault-Robert"},s={unversionedId:"inmemory_signer",id:"inmemory_signer",isDocsHomePage:!1,title:"In Memory Signer",description:"**Storing private keys in memory is suitable for development workflows, but risky for",source:"@site/../docs/inmemory_signer.md",slug:"/inmemory_signer",permalink:"/docs/inmemory_signer",version:"current",sidebar:"docs",previous:{title:"TZIP-16",permalink:"/docs/metadata-tzip16"},next:{title:"TezBridge Signer",permalink:"/docs/tezbridge_signer"}},c=[{value:"Usage",id:"usage",children:[{value:"Loading an unencrypted private key",id:"loading-an-unencrypted-private-key",children:[]},{value:"Loading an encrypted private key with a passphrase",id:"loading-an-encrypted-private-key-with-a-passphrase",children:[]},{value:"Using a testnet faucet key",id:"using-a-testnet-faucet-key",children:[]},{value:"A simple factory multiple keys/wallets",id:"a-simple-factory-multiple-keyswallets",children:[]}]}],p={rightToc:c};function l(e){var n=e.components,t=Object(a.a)(e,["components"]);return Object(i.b)("wrapper",Object(r.a)({},p,t,{components:n,mdxType:"MDXLayout"}),Object(i.b)("div",{className:"admonition admonition-caution alert alert--warning"},Object(i.b)("div",Object(r.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(r.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(r.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"}),Object(i.b)("path",Object(r.a)({parentName:"svg"},{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"})))),"Warning")),Object(i.b)("div",Object(r.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},Object(i.b)("strong",{parentName:"p"},"Storing private keys in memory is suitable for development workflows, but risky for\nproduction use-cases! Use the InMemorySigner appropriately given your risk profile")))),Object(i.b)("p",null,"In memory signer is a local signer implementation that allows you to directly use a private key in your browser or your nodejs app."),Object(i.b)("p",null,"This signer implementation is intended to be used for development workflows."),Object(i.b)("p",null,"Using the InMemorySigner for operations on mainnet where your system is dealing with tokens of real value, is discouraged."),Object(i.b)("p",null,"If you require server-side signing of operations on mainnet, we recommend exploring the use of the Remote Signer package in conjunction with an HSM remote signer such as ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"https://signatory.io"}),"Signatory"),", or ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"https://github.com/tacoinfra/remote-signer"}),"TacoInfra's Remote Signer"),"."),Object(i.b)("h2",{id:"usage"},"Usage"),Object(i.b)("h3",{id:"loading-an-unencrypted-private-key"},"Loading an unencrypted private key"),Object(i.b)("p",null,"If you configure taquito this way you will now be able to use every function that needs signing support."),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),"\nimport { InMemorySigner } from '@taquito/signer'\nimport { TezosToolkit } from '@taquito/taquito';\n\nconst Tezos = new TezosToolkit('https://YOUR_PREFERRED_RPC_URL');\n\nTezos.setProvider({signer: await InMemorySigner.fromSecretKey('your_private_key')})\n")),Object(i.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(i.b)("div",Object(r.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(r.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(r.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(i.b)("path",Object(r.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(i.b)("div",Object(r.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"Operation will be signed automatically using the signer (no prompt)"))),Object(i.b)("p",null,"The ",Object(i.b)("inlineCode",{parentName:"p"},"fromSecretKey")," method takes a secret that is base58 encoded as a parameter. Here are three examples with unencrypted private keys:"),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js",metastring:"live noInline",live:!0,noInline:!0}),"// import { TezosToolkit } from '@taquito/taquito'\n// import { InMemorySigner } from '@taquito/signer'\n// const Tezos = new TezosToolkit('https://api.tez.ie/rpc/carthagenet');\n\nInMemorySigner.fromSecretKey('edsk2rKA8YEExg9Zo2qNPiQnnYheF1DhqjLVmfKdxiFfu5GyGRZRnb')\n.then( theSigner => {\n  Tezos.setProvider({signer: theSigner})\n  //We can access the public key hash\n  return Tezos.signer.publicKeyHash()\n}).then( publicKeyHash => {\n  println(`The puclic key hash associated is: ${publicKeyHash}.`)\n}).catch(error => println(`Error: ${error} ${JSON.stringify(error, null, 2)}`));\n")),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js",metastring:"live noInline",live:!0,noInline:!0}),"// import { TezosToolkit } from '@taquito/taquito'\n// import { InMemorySigner } from '@taquito/signer'\n// const Tezos = new TezosToolkit('https://api.tez.ie/rpc/carthagenet');\n\nInMemorySigner.fromSecretKey('spsk2Fiz7sGP5fNMJrokp6ynTa4bcFbsRhw58FHXbNf5ProDNFJ5Xq')\n.then( theSigner => {\n  Tezos.setProvider({signer: theSigner})\n  //We can access the public key hash\n  return Tezos.signer.publicKeyHash()\n}).then( publicKeyHash => {\n  println(`The puclic key hash associated is: ${publicKeyHash}.`)\n}).catch(error => println(`Error: ${error} ${JSON.stringify(error, null, 2)}`));\n")),Object(i.b)("p",null,"When required, Taquito offers the ",Object(i.b)("inlineCode",{parentName:"p"},"b58cencode")," function allowing to encode the secret in base58. The parameters of the function are the secret, that can be a ",Object(i.b)("inlineCode",{parentName:"p"},"hex string")," or an ",Object(i.b)("inlineCode",{parentName:"p"},"Uint8Array"),", and the desired prefix. Here is an example with a ",Object(i.b)("inlineCode",{parentName:"p"},"hex string"),":"),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js",metastring:"live noInline",live:!0,noInline:!0}),"// import { b58cencode, prefix, Prefix } from '@taquito/utils';\n// import { TezosToolkit } from '@taquito/taquito'\n// import { InMemorySigner } from '@taquito/signer'\n// const Tezos = new TezosToolkit('https://api.tez.ie/rpc/carthagenet');\n\nconst b58encodedSecret = b58cencode('7c842c15c8b0c8fd228e6cb5302a50201f41642dd36b699003fb3c857920bc9d', prefix[Prefix.P2SK]);\nprintln(`The secret is encoded in base58 and the prefix \"p2sk\" is added to it: ${b58encodedSecret}.`)\n//We take the encoded secret to configure the signer.\nInMemorySigner.fromSecretKey(b58encodedSecret)\n.then( theSigner => {\n  Tezos.setProvider({signer: theSigner})\n  //We can access the public key hash\n  return Tezos.signer.publicKeyHash()\n}).then( publicKeyHash => {\n  println(`The puclic key hash associated is: ${publicKeyHash}.`)\n}).catch(error => println(`Error: ${error} ${JSON.stringify(error, null, 2)}`));\n\n")),Object(i.b)("h3",{id:"loading-an-encrypted-private-key-with-a-passphrase"},"Loading an encrypted private key with a passphrase"),Object(i.b)("p",null,"If your private key is encrypted, you can specify a passphrase to decrypt it. Doing so will automatically decrypt the key and allow you to use the signer to sign transactions. "),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),"\nimport { InMemorySigner } from '@taquito/signer'\nimport { TezosToolkit } from '@taquito/taquito'\n\nconst Tezos = new TezosToolkit('https://YOUR_PREFERRED_RPC_URL');\nTezos.setProvider({signer: await InMemorySigner.fromSecretKey('your_private_key', 'your_passphrase')})\n")),Object(i.b)("p",null,"Here are three examples with encrypted private keys where the passphrase used is ",Object(i.b)("inlineCode",{parentName:"p"},"test"),":"),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js",metastring:"live noInline",live:!0,noInline:!0}),"// import { TezosToolkit } from '@taquito/taquito'\n// import { InMemorySigner } from '@taquito/signer'\n// const Tezos = new TezosToolkit('https://api.tez.ie/rpc/carthagenet');\n\nInMemorySigner.fromSecretKey('edesk1GXwWmGjXiLHBKxGBxwmNvG21vKBh6FBxc4CyJ8adQQE2avP5vBB57ZUZ93Anm7i4k8RmsHaPzVAvpnHkFF', 'test')\n.then( theSigner => {\n  Tezos.setProvider({signer: theSigner})\n  //We can access the public key hash\n  return Tezos.signer.publicKeyHash()\n}).then( publicKeyHash => {\n  println(`The puclic key hash associated is: ${publicKeyHash}.`)\n}).catch(error => println(`Error: ${error} ${JSON.stringify(error, null, 2)}`));\n")),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js",metastring:"live noInline",live:!0,noInline:!0}),"// import { TezosToolkit } from '@taquito/taquito'\n// import { InMemorySigner } from '@taquito/signer'\n// const Tezos = new TezosToolkit('https://api.tez.ie/rpc/carthagenet');\n\nInMemorySigner.fromSecretKey('spesk24UQkAiJk8X6AufNtRv1WWPp2BAssEgmijCTQPMgUXweSKPmLdbyAjPmCG1pR2dC9P5UZZVeZcb7zVodUHZ', 'test')\n.then( theSigner => {\n  Tezos.setProvider({signer: theSigner})\n  //We can access the public key hash\n  return Tezos.signer.publicKeyHash()\n}).then( publicKeyHash => {\n  println(`The puclic key hash associated is: ${publicKeyHash}.`)\n}).catch(error => println(`Error: ${error} ${JSON.stringify(error, null, 2)}`));\n")),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js",metastring:"live noInline",live:!0,noInline:!0}),"// import { TezosToolkit } from '@taquito/taquito'\n// import { InMemorySigner } from '@taquito/signer'\n// const Tezos = new TezosToolkit('https://api.tez.ie/rpc/carthagenet');\n\nInMemorySigner.fromSecretKey('p2esk28hoUE2J88QNFj2aDX2pjzL7wcVh2g8tkEwtWWguby9M3FHUgSbzvF2Sd7wQ4Kd8crFwvto6gF3otcBuo4T', 'test')\n.then( theSigner => {\n  Tezos.setProvider({signer: theSigner})\n  //We can access the public key hash\n  return Tezos.signer.publicKeyHash()\n}).then( publicKeyHash => {\n  println(`The puclic key hash associated is: ${publicKeyHash}.`)\n}).catch(error => println(`Error: ${error} ${JSON.stringify(error, null, 2)}`));\n")),Object(i.b)("h3",{id:"using-a-testnet-faucet-key"},"Using a testnet faucet key"),Object(i.b)("p",null,"To load a faucet key (available from ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"https://faucet.tzalpha.net/"}),"https://faucet.tzalpha.net/"),") for working a public testnet use the ",Object(i.b)("inlineCode",{parentName:"p"},"importKey")," function.\ncan do so as follows:"),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),"import { TezosToolkit } from '@taquito/taquito'\nimport { importKey } from '@taquito/taquito-signer';\n\nconst Tezos = new TezosToolkit('https://YOUR_PREFERRED_TESTNET_RPC_URL');\n\n// A key faucet, similar to what is available from https://faucet.tzalpha.net/\nconst FAUCET_KEY = {\n  mnemonic: [\n    'cart',\n    'will',\n    'page',\n    'bench',\n    'notice',\n    'leisure',\n    'penalty',\n    'medal',\n    'define',\n    'odor',\n    'ride',\n    'devote',\n    'cannon',\n    'setup',\n    'rescue',\n  ],\n  secret: '35f266fbf0fca752da1342fdfc745a9c608e7b20',\n  amount: '4219352756',\n  pkh: 'tz1YBMFg1nLAPxBE6djnCPbMRH5PLXQWt8Mg',\n  password: 'Fa26j580dQ',\n  email: 'jxmjvauo.guddusns@tezos.example.org',\n};\n\nimportKey(\n  Tezos,\n  FAUCET_KEY.email,\n  FAUCET_KEY.password,\n  FAUCET_KEY.mnemonic.join(' '),\n  FAUCET_KEY.secret\n);\n// Your Tezos instance is now operably configured for signing with the faucet key.\n")),Object(i.b)("p",null,"If you configure taquito this way, you will now be able to use every function that needs signing support."),Object(i.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(i.b)("div",Object(r.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(r.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(r.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(i.b)("path",Object(r.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(i.b)("div",Object(r.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"Operation will be signed automatically using the signer (no prompt)"))),Object(i.b)("h3",{id:"a-simple-factory-multiple-keyswallets"},"A simple factory multiple keys/wallets"),Object(i.b)("p",null,"If you require to sign operations with many different keys, then implementing a factory function can be useful.\nThe ",Object(i.b)("inlineCode",{parentName:"p"},"signerFactory")," function example creates a new Tezos instance. Use the tezos instance for signing, and discard it when complete. "),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),"import { InMemorySigner } from \"@taquito/signer\";\nimport { TezosToolkit } from \"@taquito/taquito\";\n\nconst signerFactory = async (rpcUrl: string, pk: string) => {\n  const Tezos = new TezosToolkit(rpcUrl);\n  await Tezos.setProvider({ signer: await InMemorySigner.fromSecretKey(pk) });\n  return Tezos;\n};\n\nconst bob = await signerFactory('bobs_secret_key')\nconst alice = await signerFactory('alices_secret_key')\n")))}l.isMDXComponent=!0}}]);